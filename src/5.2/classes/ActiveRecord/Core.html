---
title: ActiveRecord::Core
layout: default
---
<div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 5.2.8</span><br />
        
        <div class="type">Module</div>
        <h1>
            ActiveRecord::Core
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/activerecord/lib/active_record/core_rb.html">activerecord/lib/active_record/core.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  

  

  
  


  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-3C-3D-3E">&lt;=&gt;</a>
        </li>
      
        <li>
          <a href="#method-i-3D-3D">==</a>
        </li>
      
        <li>
          <a href="#method-i-clone">clone</a>
        </li>
      
        <li>
          <a href="#method-c-configurations">configurations</a>
        </li>
      
        <li>
          <a href="#method-c-configurations-3D">configurations=</a>
        </li>
      
        <li>
          <a href="#method-c-connection_handler">connection_handler</a>
        </li>
      
        <li>
          <a href="#method-i-connection_handler">connection_handler</a>
        </li>
      
        <li>
          <a href="#method-c-connection_handler-3D">connection_handler=</a>
        </li>
      
        <li>
          <a href="#method-i-dup">dup</a>
        </li>
      
        <li>
          <a href="#method-i-encode_with">encode_with</a>
        </li>
      
        <li>
          <a href="#method-i-eql-3F">eql?</a>
        </li>
      
        <li>
          <a href="#method-i-freeze">freeze</a>
        </li>
      
        <li>
          <a href="#method-i-frozen-3F">frozen?</a>
        </li>
      
        <li>
          <a href="#method-i-hash">hash</a>
        </li>
      
        <li>
          <a href="#method-i-init_with">init_with</a>
        </li>
      
        <li>
          <a href="#method-i-inspect">inspect</a>
        </li>
      
        <li>
          <a href="#method-c-new">new</a>
        </li>
      
        <li>
          <a href="#method-i-pretty_print">pretty_print</a>
        </li>
      
        <li>
          <a href="#method-i-readonly-21">readonly!</a>
        </li>
      
        <li>
          <a href="#method-i-readonly-3F">readonly?</a>
        </li>
      
        <li>
          <a href="#method-i-slice">slice</a>
        </li>
      
    </ul>
  

  

  
    

    

    

    

    <!-- Methods -->
    
      <h2 id="class-public-methods">Class Public methods</h2>
      
        <div class="method">
          <h3 id="method-c-configurations">
            
              configurations()
            
          </h3>

          
            <div class="description">
              <p>Returns fully resolved configurations hash</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 59
      def self.configurations
        @@configurations
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L59" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-c-configurations-3D">
            
              configurations=(config)
            
          </h3>

          
            <div class="description">
              <p>Contains the database configuration - as is typically stored in config/database.yml - as a <a href="../Hash.html"><code>Hash</code></a>.</p>

<p>For example, the following database.yml‚Ä¶</p>

<pre><code>development:
  adapter: sqlite3
  database: db/development.sqlite3

production:
  adapter: sqlite3
  database: db/production.sqlite3
</code></pre>

<p>‚Ä¶would result in <a href="Core.html#method-c-configurations"><code>ActiveRecord::Base.configurations</code></a> to look like this:</p>

<pre><code>{
   &#39;development&#39; =&gt; {
      &#39;adapter&#39;  =&gt; &#39;sqlite3&#39;,
      &#39;database&#39; =&gt; &#39;db/development.sqlite3&#39;
   },
   &#39;production&#39; =&gt; {
      &#39;adapter&#39;  =&gt; &#39;sqlite3&#39;,
      &#39;database&#39; =&gt; &#39;db/production.sqlite3&#39;
   }
}
</code></pre>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 53
      def self.configurations=(config)
        @@configurations = ActiveRecord::ConnectionHandling::MergeAndResolveDefaultUrlConfig.new(config).resolve
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L53" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-c-connection_handler">
            
              connection_handler()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 130
      def self.connection_handler
        ActiveRecord::RuntimeRegistry.connection_handler || default_connection_handler
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L130" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-c-connection_handler-3D">
            
              connection_handler=(handler)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 134
      def self.connection_handler=(handler)
        ActiveRecord::RuntimeRegistry.connection_handler = handler
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L134" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-c-new">
            
              new(attributes = nil)
            
          </h3>

          
            <div class="description">
              <p>New objects can be instantiated as either empty (pass no construction parameter) or pre-set with attributes but not yet saved (pass a hash with key names matching the associated table column names). In both instances, valid attribute keys are determined by the column names of the associated table ‚Äì hence you can&#39;t have attributes that aren&#39;t part of the table columns.</p>

<h4 id="method-c-new-label-Example-3A">Example:</h4>

<pre><code># Instantiates a single new object
User.new(first_name: &#39;Jamie&#39;)
</code></pre>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 308
    def initialize(attributes = nil)
      self.class.define_attribute_methods
      @attributes = self.class._default_attributes.deep_dup

      init_internals
      initialize_internals_callback

      assign_attributes(attributes) if attributes

      yield self if block_given?
      _run_initialize_callbacks
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L308" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-3C-3D-3E">
            
              &lt;=&gt;(other_object)
            
          </h3>

          
            <div class="description">
              <p>Allows sort on objects</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 453
    def &lt;=&gt;(other_object)
      if other_object.is_a?(self.class)
        to_key &lt;=&gt; other_object.to_key
      else
        super
      end
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L453" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-3D-3D">
            
              ==(comparison_object)
            
          </h3>

          
            <div class="description">
              <p>Returns true if <code>comparison_object</code> is the same exact object, or <code>comparison_object</code> is of the same type and <code>self</code> has an ID and it is equal to <code>comparison_object.id</code>.</p>

<p>Note that new records are different from any other record by definition, unless the other record is the receiver itself. Besides, if you fetch existing records with <code>select</code> and leave the ID out, you&#39;re on your own, this predicate will return false.</p>

<p>Note also that destroying a record preserves its ID in the model instance, so deleted models are still comparable.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="Core.html#method-i-eql-3F">eql?</a>
            </div>
          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 421
    def ==(comparison_object)
      super ||
        comparison_object.instance_of?(self.class) &amp;&amp;
        !id.nil? &amp;&amp;
        comparison_object.id == id
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L421" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-clone">
            
              clone
            
          </h3>

          
            <div class="description">
              <p>Identical to Ruby&#39;s clone method.  This is a ‚Äúshallow‚Äù copy.  Be warned that your attributes are not copied. That means that modifying attributes of the clone will modify the original, since they will both point to the same attributes hash. If you need a copy of your attributes hash, please use the <a href="Core.html#method-i-dup"><code>dup</code></a> method.</p>

<pre><code>user = User.first
new_user = user.clone
user.name               # =&gt; &quot;Bob&quot;
new_user.name = &quot;Joe&quot;
user.name               # =&gt; &quot;Joe&quot;

user.object_id == new_user.object_id            # =&gt; false
user.name.object_id == new_user.name.object_id  # =&gt; true

user.name.object_id == user.dup.name.object_id  # =&gt; false
</code></pre>
            </div>
          

          

          

          
          
            <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L354" target="_blank" class="github_url">üîé See on GitHub</a>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-connection_handler">
            
              connection_handler()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 472
    def connection_handler
      self.class.connection_handler
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L472" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-dup">
            
              dup
            
          </h3>

          
            <div class="description">
              <p>Duped objects have no id assigned and are treated as new records. Note that this is a ‚Äúshallow‚Äù copy as it copies the object&#39;s attributes only, not its associations. The extent of a ‚Äúdeep‚Äù copy is application specific and is therefore left to the application to implement according to its need. The dup method does not preserve the timestamps (created|updated)_(at|on).</p>
            </div>
          

          

          

          
          
            <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L371" target="_blank" class="github_url">üîé See on GitHub</a>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-encode_with">
            
              encode_with(coder)
            
          </h3>

          
            <div class="description">
              <p>Populate <code>coder</code> with attributes about this record that should be serialized. The structure of <code>coder</code> defined in this method is guaranteed to match the structure of <code>coder</code> passed to the <a href="Core.html#method-i-init_with"><code>init_with</code></a> method.</p>

<p>Example:</p>

<pre><code>class Post &lt; ActiveRecord::Base
end
coder = {}
Post.new.encode_with(coder)
coder # =&gt; {&quot;attributes&quot; =&gt; {&quot;id&quot; =&gt; nil, ... }}
</code></pre>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 406
    def encode_with(coder)
      self.class.yaml_encoder.encode(@attributes, coder)
      coder[&quot;new_record&quot;] = new_record?
      coder[&quot;active_record_yaml_version&quot;] = 2
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L406" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-eql-3F">
            
              eql?(comparison_object)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="Core.html#method-i-3D-3D">==</a>
            </div>
          

          
          
        </div>
        
        <div class="method">
          <h3 id="method-i-freeze">
            
              freeze()
            
          </h3>

          
            <div class="description">
              <p>Clone and freeze the attributes hash such that associations are still accessible, even on destroyed records, but cloned models will not be frozen.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 442
    def freeze
      @attributes = @attributes.clone.freeze
      self
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L442" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-frozen-3F">
            
              frozen?()
            
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the attributes hash has been frozen.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 448
    def frozen?
      @attributes.frozen?
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L448" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-hash">
            
              hash()
            
          </h3>

          
            <div class="description">
              <p>Delegates to id in order to allow two records of the same type and id to work with something like:</p>

<pre><code>[ Person.find(1), Person.find(2), Person.find(3) ] &amp; [ Person.find(1), Person.find(4) ] # =&gt; [ Person.find(1) ]
</code></pre>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 431
    def hash
      if id
        self.class.hash ^ id.hash
      else
        super
      end
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L431" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-init_with">
            
              init_with(coder)
            
          </h3>

          
            <div class="description">
              <p>Initialize an empty model object from <code>coder</code>. <code>coder</code> should be the result of previously encoding an Active Record model, using <a href="Core.html#method-i-encode_with"><code>encode_with</code></a>.</p>

<pre><code>class Post &lt; ActiveRecord::Base
end

old_post = Post.new(title: &quot;hello world&quot;)
coder = {}
old_post.encode_with(coder)

post = Post.allocate
post.init_with(coder)
post.title # =&gt; &#39;hello world&#39;
</code></pre>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 335
    def init_with(coder)
      coder = LegacyYamlAdapter.convert(self.class, coder)
      @attributes = self.class.yaml_encoder.decode(coder)

      init_internals

      @new_record = coder[&quot;new_record&quot;]

      self.class.define_attribute_methods

      yield self if block_given?

      _run_find_callbacks
      _run_initialize_callbacks

      self
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L335" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-inspect">
            
              inspect()
            
          </h3>

          
            <div class="description">
              <p>Returns the contents of the record as a nicely formatted string.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 477
    def inspect
      # We check defined?(@attributes) not to issue warnings if the object is
      # allocated but not initialized.
      inspection = if defined?(@attributes) &amp;&amp; @attributes
        self.class.attribute_names.collect do |name|
          if has_attribute?(name)
            &quot;#{name}: #{attribute_for_inspect(name)}&quot;
          end
        end.compact.join(&quot;, &quot;)
      else
        &quot;not initialized&quot;
      end

      &quot;#&lt;#{self.class} #{inspection}&gt;&quot;
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L477" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-pretty_print">
            
              pretty_print(pp)
            
          </h3>

          
            <div class="description">
              <p>Takes a PP and prettily prints this record to it, allowing you to get a nice result from <code>pp record</code> when pp is required.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 495
    def pretty_print(pp)
      return super if custom_inspect_method_defined?
      pp.object_address_group(self) do
        if defined?(@attributes) &amp;&amp; @attributes
          column_names = self.class.column_names.select { |name| has_attribute?(name) || new_record? }
          pp.seplist(column_names, proc { pp.text &quot;,&quot; }) do |column_name|
            column_value = read_attribute(column_name)
            pp.breakable &quot; &quot;
            pp.group(1) do
              pp.text column_name
              pp.text &quot;:&quot;
              pp.breakable
              pp.pp column_value
            end
          end
        else
          pp.breakable &quot; &quot;
          pp.text &quot;not initialized&quot;
        end
      end
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L495" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-readonly-21">
            
              readonly!()
            
          </h3>

          
            <div class="description">
              <p>Marks this record as read only.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 468
    def readonly!
      @readonly = true
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L468" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-readonly-3F">
            
              readonly?()
            
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the record is read only. Records loaded through joins with piggy-back attributes will be marked as read only since they cannot be saved.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 463
    def readonly?
      @readonly
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L463" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-slice">
            
              slice(*methods)
            
          </h3>

          
            <div class="description">
              <p>Returns a hash of the given methods with their names as keys and returned values as values.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/core.rb, line 518
    def slice(*methods)
      Hash[methods.flatten.map! { |method| [method, public_send(method)] }].with_indifferent_access
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/26521331e5923a0c50fa50984d2f924e5f26c50b/activerecord/lib/active_record/core.rb#L518" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
  
</div>

    </div>
</div>
