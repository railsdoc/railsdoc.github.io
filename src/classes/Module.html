---
title: Module
layout: default
---
<div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 6.1.3.2</span><br />
        
        <div class="type">Class</div>
        <h1>
            Module
            
                <span class="parent">&lt;
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/module/aliasing_rb.html">activesupport/lib/active_support/core_ext/module/aliasing.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/module/anonymous_rb.html">activesupport/lib/active_support/core_ext/module/anonymous.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/module/attr_internal_rb.html">activesupport/lib/active_support/core_ext/module/attr_internal.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/module/attribute_accessors_rb.html">activesupport/lib/active_support/core_ext/module/attribute_accessors.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread_rb.html">activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/module/concerning_rb.html">activesupport/lib/active_support/core_ext/module/concerning.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/module/delegation_rb.html">activesupport/lib/active_support/core_ext/module/delegation.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/module/deprecation_rb.html">activesupport/lib/active_support/core_ext/module/deprecation.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/module/introspection_rb.html">activesupport/lib/active_support/core_ext/module/introspection.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/module/redefine_method_rb.html">activesupport/lib/active_support/core_ext/module/redefine_method.rb</a></li>
            
            <li><a href="../files/activesupport/lib/active_support/core_ext/module/remove_method_rb.html">activesupport/lib/active_support/core_ext/module/remove_method.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>Extends the module object with class/module and instance accessors for class/module attributes, just like the native attr* accessors for instance attributes.</p>

<p>Extends the module object with class/module and instance accessors for class/module attributes, just like the native attr* accessors for instance attributes, but does so on a per-thread basis.</p>

<p>So the values are scoped within the Thread.current space under the class name of the module.</p>

    </div>
  

  

  
  


  
    <h2 id="namespace">Namespace</h2>

    
      <h3 id="module">Module</h3>
      <ul>
      
        <li><a href="Module/Concerning.html">Module::Concerning</a></li>
      
      </ul>
    

    
      <h3 id="class">Class</h3>
      <ul>
      
        <li><a href="Module/DelegationError.html">Module::DelegationError</a></li>
      
      </ul>
    
  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-alias_attribute">alias_attribute</a>
        </li>
      
        <li>
          <a href="#method-i-anonymous-3F">anonymous?</a>
        </li>
      
        <li>
          <a href="#method-i-attr_internal">attr_internal</a>
        </li>
      
        <li>
          <a href="#method-i-attr_internal_accessor">attr_internal_accessor</a>
        </li>
      
        <li>
          <a href="#method-i-attr_internal_reader">attr_internal_reader</a>
        </li>
      
        <li>
          <a href="#method-i-attr_internal_writer">attr_internal_writer</a>
        </li>
      
        <li>
          <a href="#method-i-cattr_accessor">cattr_accessor</a>
        </li>
      
        <li>
          <a href="#method-i-cattr_reader">cattr_reader</a>
        </li>
      
        <li>
          <a href="#method-i-cattr_writer">cattr_writer</a>
        </li>
      
        <li>
          <a href="#method-i-delegate">delegate</a>
        </li>
      
        <li>
          <a href="#method-i-delegate_missing_to">delegate_missing_to</a>
        </li>
      
        <li>
          <a href="#method-i-deprecate">deprecate</a>
        </li>
      
        <li>
          <a href="#method-i-mattr_accessor">mattr_accessor</a>
        </li>
      
        <li>
          <a href="#method-i-mattr_reader">mattr_reader</a>
        </li>
      
        <li>
          <a href="#method-i-mattr_writer">mattr_writer</a>
        </li>
      
        <li>
          <a href="#method-i-module_parent">module_parent</a>
        </li>
      
        <li>
          <a href="#method-i-module_parent_name">module_parent_name</a>
        </li>
      
        <li>
          <a href="#method-i-module_parents">module_parents</a>
        </li>
      
        <li>
          <a href="#method-i-redefine_method">redefine_method</a>
        </li>
      
        <li>
          <a href="#method-i-redefine_singleton_method">redefine_singleton_method</a>
        </li>
      
        <li>
          <a href="#method-i-remove_possible_method">remove_possible_method</a>
        </li>
      
        <li>
          <a href="#method-i-remove_possible_singleton_method">remove_possible_singleton_method</a>
        </li>
      
        <li>
          <a href="#method-i-silence_redefinition_of_method">silence_redefinition_of_method</a>
        </li>
      
        <li>
          <a href="#method-i-thread_cattr_accessor">thread_cattr_accessor</a>
        </li>
      
        <li>
          <a href="#method-i-thread_mattr_accessor">thread_mattr_accessor</a>
        </li>
      
    </ul>
  

  
    <!-- Includes -->
    <h2 id="included-modules">Included Modules</h2>
    <ul>
      
        <li>
          
            <a href="Module/Concerning.html">
              Module::Concerning
            </a>
          
        </li>
      
    </ul>
  

  
    

    

    
      <!-- Section constants -->
      <h2 id="constants">Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">DELEGATION_RESERVED_KEYWORDS</td>
            <td>=</td>
            <td class="attr-value">%w(_ arg args block)</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">DELEGATION_RESERVED_METHOD_NAMES</td>
            <td>=</td>
            <td class="attr-value">Set.new(
RUBY_RESERVED_KEYWORDS + DELEGATION_RESERVED_KEYWORDS
).freeze</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">RUBY_RESERVED_KEYWORDS</td>
            <td>=</td>
            <td class="attr-value">%w(alias and BEGIN begin break case class def defined? do
else elsif END end ensure false for if in module next nil not or redo rescue retry
return self super then true undef unless until when while yield)</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    

    
      <!-- Section attributes -->
      <h2 id="attributes">Attributes</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>attr_internal_naming_format</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    

    <!-- Methods -->
    
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-alias_attribute">
            
              alias_attribute(new_name, old_name)
            
          </h3>

          
            <div class="description">
              <p>Allows you to make aliases for attributes, which includes getter, setter, and a predicate.</p>

<pre><code>class Content &lt; ActiveRecord::Base
  # has a title attribute
end

class Email &lt; Content
  alias_attribute :subject, :title
end

e = Email.find(1)
e.title    # =&gt; &quot;Superstars&quot;
e.subject  # =&gt; &quot;Superstars&quot;
e.subject? # =&gt; true
e.subject = &quot;Megastars&quot;
e.title    # =&gt; &quot;Megastars&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-alias_attribute_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/aliasing.rb, line 21</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">alias_attribute</span>(<span class="ruby-identifier">new_name</span>, <span class="ruby-identifier">old_name</span>)
    <span class="ruby-comment"># The following reader methods use an explicit `self` receiver in order to</span>
    <span class="ruby-comment"># support aliases that start with an uppercase letter. Otherwise, they would</span>
    <span class="ruby-comment"># be resolved as constants instead.</span>
    <span class="ruby-identifier">module_eval</span> <span class="ruby-identifier">&lt;&lt;-STR</span>, <span class="ruby-keyword">__FILE__</span>, <span class="ruby-keyword">__LINE__</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
<span class="ruby-value">      def #{new_name}; self.#{old_name}; end          # def subject; self.title; end
      def #{new_name}?; self.#{old_name}?; end        # def subject?; self.title?; end
      def #{new_name}=(v); self.#{old_name} = v; end  # def subject=(v); self.title = v; end
</span><span class="ruby-identifier">    STR</span>
  <span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-anonymous-3F">
            
              anonymous?()
            
          </h3>

          
            <div class="description">
              <p>A module may or may not have a name.</p>

<pre><code>module M; end
M.name # =&gt; &quot;M&quot;

m = Module.new
m.name # =&gt; nil
</code></pre>

<p><code>anonymous?</code> method returns true if module does not have a name, false otherwise:</p>

<pre><code>Module.new.anonymous? # =&gt; true

module M; end
M.anonymous?          # =&gt; false
</code></pre>

<p>A module gets a name when it is first assigned to a constant. Either via the <code>module</code> or <code>class</code> keyword or by an explicit assignment:</p>

<pre><code>m = Module.new # creates an anonymous module
m.anonymous?   # =&gt; true
M = m          # m gets a name here as a side-effect
m.name         # =&gt; &quot;M&quot;
m.anonymous?   # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-anonymous-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/anonymous.rb, line 27</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">anonymous?</span>
  <span class="ruby-identifier">name</span>.<span class="ruby-identifier">nil?</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-attr_internal">
            
              attr_internal(*attrs)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="Module.html#method-i-attr_internal_accessor">attr_internal_accessor</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 id="method-i-attr_internal_accessor">
            
              attr_internal_accessor(*attrs)
            
          </h3>

          
            <div class="description">
              <p>Declares an attribute reader and writer backed by an internally-named instance variable.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="Module.html#method-i-attr_internal">attr_internal</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-attr_internal_accessor_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/attr_internal.rb, line 16</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">attr_internal_accessor</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attrs</span>)
  <span class="ruby-identifier">attr_internal_reader</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attrs</span>)
  <span class="ruby-identifier">attr_internal_writer</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attrs</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-attr_internal_reader">
            
              attr_internal_reader(*attrs)
            
          </h3>

          
            <div class="description">
              <p>Declares an attribute reader backed by an internally-named instance variable.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-attr_internal_reader_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/attr_internal.rb, line 5</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">attr_internal_reader</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attrs</span>)
  <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">attr_name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">attr_internal_define</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-value">:reader</span>) }
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-attr_internal_writer">
            
              attr_internal_writer(*attrs)
            
          </h3>

          
            <div class="description">
              <p>Declares an attribute writer backed by an internally-named instance variable.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-attr_internal_writer_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/attr_internal.rb, line 10</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">attr_internal_writer</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attrs</span>)
  <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">attr_name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">attr_internal_define</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-value">:writer</span>) }
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-cattr_accessor">
            
              cattr_accessor(*syms, instance_reader: true, instance_writer: true, instance_accessor: true, default: nil, &amp;blk)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="Module.html#method-i-mattr_accessor">mattr_accessor</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 id="method-i-cattr_reader">
            
              cattr_reader(*syms, instance_reader: true, instance_accessor: true, default: nil, location: nil)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="Module.html#method-i-mattr_reader">mattr_reader</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 id="method-i-cattr_writer">
            
              cattr_writer(*syms, instance_writer: true, instance_accessor: true, default: nil, location: nil)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="Module.html#method-i-mattr_writer">mattr_writer</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 id="method-i-delegate">
            
              delegate(*methods, to: nil, prefix: nil, allow_nil: nil, private: nil)
            
          </h3>

          
            <div class="description">
              <p>Provides a <code>delegate</code> class method to easily expose contained objects&#39; public methods as your own.</p>

<h4 id="method-i-delegate-label-Options">Options</h4>
<ul><li>
<p><code>:to</code> - Specifies the target object name as a symbol or string</p>
</li><li>
<p><code>:prefix</code> - Prefixes the new method with the target name or a custom prefix</p>
</li><li>
<p><code>:allow_nil</code> - If set to true, prevents a <code>Module::DelegationError</code> from being raised</p>
</li><li>
<p><code>:private</code> - If set to true, changes method visibility to private</p>
</li></ul>

<p>The macro receives one or more method names (specified as symbols or strings) and the name of the target object via the <code>:to</code> option (also a symbol or string).</p>

<p>Delegation is particularly useful with Active Record associations:</p>

<pre><code>class Greeter &lt; ActiveRecord::Base
  def hello
    &#39;hello&#39;
  end

  def goodbye
    &#39;goodbye&#39;
  end
end

class Foo &lt; ActiveRecord::Base
  belongs_to :greeter
  delegate :hello, to: :greeter
end

Foo.new.hello   # =&gt; &quot;hello&quot;
Foo.new.goodbye # =&gt; NoMethodError: undefined method `goodbye&#39; for #&lt;Foo:0x1af30c&gt;
</code></pre>

<p>Multiple delegates to the same target are allowed:</p>

<pre><code>class Foo &lt; ActiveRecord::Base
  belongs_to :greeter
  delegate :hello, :goodbye, to: :greeter
end

Foo.new.goodbye # =&gt; &quot;goodbye&quot;
</code></pre>

<p>Methods can be delegated to instance variables, class variables, or constants by providing them as a symbols:</p>

<pre><code>class Foo
  CONSTANT_ARRAY = [0,1,2,3]
  @@class_array  = [4,5,6,7]

  def initialize
    @instance_array = [8,9,10,11]
  end
  delegate :sum, to: :CONSTANT_ARRAY
  delegate :min, to: :@@class_array
  delegate :max, to: :@instance_array
end

Foo.new.sum # =&gt; 6
Foo.new.min # =&gt; 4
Foo.new.max # =&gt; 11
</code></pre>

<p>It&#39;s also possible to delegate a method to the class by using <code>:class</code>:</p>

<pre><code>class Foo
  def self.hello
    &quot;world&quot;
  end

  delegate :hello, to: :class
end

Foo.new.hello # =&gt; &quot;world&quot;
</code></pre>

<p>Delegates can optionally be prefixed using the <code>:prefix</code> option. If the value is <code>true</code>, the delegate methods are prefixed with the name of the object being delegated to.</p>

<pre><code>Person = Struct.new(:name, :address)

class Invoice &lt; Struct.new(:client)
  delegate :name, :address, to: :client, prefix: true
end

john_doe = Person.new(&#39;John Doe&#39;, &#39;Vimmersvej 13&#39;)
invoice = Invoice.new(john_doe)
invoice.client_name    # =&gt; &quot;John Doe&quot;
invoice.client_address # =&gt; &quot;Vimmersvej 13&quot;
</code></pre>

<p>It is also possible to supply a custom prefix.</p>

<pre><code>class Invoice &lt; Struct.new(:client)
  delegate :name, :address, to: :client, prefix: :customer
end

invoice = Invoice.new(john_doe)
invoice.customer_name    # =&gt; &#39;John Doe&#39;
invoice.customer_address # =&gt; &#39;Vimmersvej 13&#39;
</code></pre>

<p>The delegated methods are public by default. Pass <code>private: true</code> to change that.</p>

<pre><code>class User &lt; ActiveRecord::Base
  has_one :profile
  delegate :first_name, to: :profile
  delegate :date_of_birth, to: :profile, private: true

  def age
    Date.today.year - date_of_birth.year
  end
end

User.new.first_name # =&gt; &quot;Tomas&quot;
User.new.date_of_birth # =&gt; NoMethodError: private method `date_of_birth&#39; called for #&lt;User:0x00000008221340&gt;
User.new.age # =&gt; 2
</code></pre>

<p>If the target is <code>nil</code> and does not respond to the delegated method a <code>Module::DelegationError</code> is raised. If you wish to instead return <code>nil</code>, use the <code>:allow_nil</code> option.</p>

<pre><code>class User &lt; ActiveRecord::Base
  has_one :profile
  delegate :age, to: :profile
end

User.new.age
# =&gt; Module::DelegationError: User#age delegated to profile.age, but profile is nil
</code></pre>

<p>But if not having a profile yet is fine and should not be an error condition:</p>

<pre><code>class User &lt; ActiveRecord::Base
  has_one :profile
  delegate :age, to: :profile, allow_nil: true
end

User.new.age # nil
</code></pre>

<p>Note that if the target is not <code>nil</code> then the call is attempted regardless of the <code>:allow_nil</code> option, and thus an exception is still raised if said object does not respond to the method:</p>

<pre><code>class Foo
  def initialize(bar)
    @bar = bar
  end

  delegate :name, to: :@bar, allow_nil: true
end

Foo.new(&quot;Bar&quot;).name # raises NoMethodError: undefined method `name&#39;
</code></pre>

<p>The target method must be public, otherwise it will raise <code>NoMethodError</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-delegate_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/delegation.rb, line 171</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">delegate</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">methods</span>, <span class="ruby-value">to:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">prefix:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">allow_nil:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">private:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">to</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Delegation needs a target. Supply a keyword argument &#39;to&#39; (e.g. delegate :hello, to: :greeter).&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">prefix</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-regexp">/^[^a-z_]/</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-identifier">to</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Can only automatically set the delegation prefix when delegating to a method.&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">method_prefix</span> = \
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">prefix</span>
      <span class="ruby-node">&quot;#{prefix == true ? to : prefix}_&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-string">&quot;&quot;</span>
    <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">location</span> = <span class="ruby-identifier">caller_locations</span>(<span class="ruby-value">1</span>, <span class="ruby-value">1</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span> = <span class="ruby-identifier">location</span>.<span class="ruby-identifier">path</span>, <span class="ruby-identifier">location</span>.<span class="ruby-identifier">lineno</span>

  <span class="ruby-identifier">to</span> = <span class="ruby-identifier">to</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">to</span> = <span class="ruby-node">&quot;self.#{to}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">DELEGATION_RESERVED_METHOD_NAMES</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">to</span>)

  <span class="ruby-identifier">method_def</span> = []
  <span class="ruby-identifier">method_names</span> = []

  <span class="ruby-identifier">methods</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">method_name</span> = <span class="ruby-identifier">prefix</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;#{method_prefix}#{method}&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">method</span>
    <span class="ruby-identifier">method_names</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">method_name</span>.<span class="ruby-identifier">to_sym</span>

    <span class="ruby-comment"># Attribute writer methods only accept one argument. Makes sure []=</span>
    <span class="ruby-comment"># methods still accept two arguments.</span>
    <span class="ruby-identifier">definition</span> = <span class="ruby-keyword">if</span> <span class="ruby-regexp">/[^\]]=$/</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-identifier">method</span>)
      <span class="ruby-string">&quot;arg&quot;</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-constant">RUBY_VERSION</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-string">&quot;2.7&quot;</span>
      <span class="ruby-string">&quot;...&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-string">&quot;*args, &amp;block&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># The following generated method calls the target exactly once, storing</span>
    <span class="ruby-comment"># the returned value in a dummy variable.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># Reason is twofold: On one hand doing less calls is in general better.</span>
    <span class="ruby-comment"># On the other hand it could be that the target has side-effects,</span>
    <span class="ruby-comment"># whereas conceptually, from the user point of view, the delegator should</span>
    <span class="ruby-comment"># be doing one call.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">allow_nil</span>
      <span class="ruby-identifier">method</span> = <span class="ruby-identifier">method</span>.<span class="ruby-identifier">to_s</span>

      <span class="ruby-identifier">method_def</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-node">&quot;def #{method_name}(#{definition})&quot;</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-node">&quot;  _ = #{to}&quot;</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-node">&quot;  if !_.nil? || nil.respond_to?(:#{method})&quot;</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-node">&quot;    _.#{method}(#{definition})&quot;</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-string">&quot;  end&quot;</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-string">&quot;end&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">method</span> = <span class="ruby-identifier">method</span>.<span class="ruby-identifier">to_s</span>
      <span class="ruby-identifier">method_name</span> = <span class="ruby-identifier">method_name</span>.<span class="ruby-identifier">to_s</span>

      <span class="ruby-identifier">method_def</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-node">&quot;def #{method_name}(#{definition})&quot;</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-node">&quot;  _ = #{to}&quot;</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-node">&quot;  _.#{method}(#{definition})&quot;</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-string">&quot;rescue NoMethodError =&gt; e&quot;</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-node">&quot;  if _.nil? &amp;&amp; e.name == :#{method}&quot;</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-node">%(   raise DelegationError, &quot;#{self}##{method_name} delegated to #{to}.#{method}, but #{to} is nil: \#{self.inspect}&quot;)</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-string">&quot;  else&quot;</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-string">&quot;    raise&quot;</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-string">&quot;  end&quot;</span> <span class="ruby-operator">&lt;&lt;</span>
        <span class="ruby-string">&quot;end&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">module_eval</span>(<span class="ruby-identifier">method_def</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;;&quot;</span>), <span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>)
  <span class="ruby-identifier">private</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">method_names</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">private</span>
  <span class="ruby-identifier">method_names</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-delegate_missing_to">
            
              delegate_missing_to(target, allow_nil: nil)
            
          </h3>

          
            <div class="description">
              <p>When building decorators, a common pattern may emerge:</p>

<pre><code>class Partition
  def initialize(event)
    @event = event
  end

  def person
    detail.person || creator
  end

  private
    def respond_to_missing?(name, include_private = false)
      @event.respond_to?(name, include_private)
    end

    def method_missing(method, *args, &amp;block)
      @event.send(method, *args, &amp;block)
    end
end
</code></pre>

<p>With <code>Module#delegate_missing_to</code>, the above is condensed to:</p>

<pre><code>class Partition
  delegate_missing_to :@event

  def initialize(event)
    @event = event
  end

  def person
    detail.person || creator
  end
end
</code></pre>

<p>The target can be anything callable within the object, e.g. instance variables, methods, constants, etc.</p>

<p>The delegated method must be public on the target, otherwise it will raise <code>DelegationError</code>. If you wish to instead return <code>nil</code>, use the <code>:allow_nil</code> option.</p>

<p>The <code>marshal_dump</code> and <code>_dump</code> methods are exempt from delegation due to possible interference when calling <code>Marshal.dump(object)</code>, should the delegation target method of <code>object</code> add or remove instance variables.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-delegate_missing_to_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/delegation.rb, line 295</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">delegate_missing_to</span>(<span class="ruby-identifier">target</span>, <span class="ruby-value">allow_nil:</span> <span class="ruby-keyword">nil</span>)
    <span class="ruby-identifier">target</span> = <span class="ruby-identifier">target</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-identifier">target</span> = <span class="ruby-node">&quot;self.#{target}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">DELEGATION_RESERVED_METHOD_NAMES</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">target</span>)

    <span class="ruby-identifier">module_eval</span> <span class="ruby-identifier">&lt;&lt;-RUBY</span>, <span class="ruby-keyword">__FILE__</span>, <span class="ruby-keyword">__LINE__</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
<span class="ruby-value">      def respond_to_missing?(name, include_private = false)
        # It may look like an oversight, but we deliberately do not pass
        # +include_private+, because they do not get delegated.

        return false if name == :marshal_dump || name == :_dump
        #{target}.respond_to?(name) || super
      end

      def method_missing(method, *args, &amp;block)
        if #{target}.respond_to?(method)
          #{target}.public_send(method, *args, &amp;block)
        else
          begin
            super
          rescue NoMethodError
            if #{target}.nil?
              if #{allow_nil == true}
                nil
              else
                raise DelegationError, &quot;\#{method} delegated to #{target}, but #{target} is nil&quot;
              end
            else
              raise
            end
          end
        end
      end
      ruby2_keywords(:method_missing) if respond_to?(:ruby2_keywords, true)
</span><span class="ruby-identifier">    RUBY</span>
  <span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-deprecate">
            
              deprecate(*method_names)
            
          </h3>

          
            <div class="description">
              <pre><code>deprecate :foo
deprecate bar: &#39;message&#39;
deprecate :foo, :bar, baz: &#39;warning!&#39;, qux: &#39;gone!&#39;
</code></pre>

<p>You can also use custom deprecator instance:</p>

<pre><code>deprecate :foo, deprecator: MyLib::Deprecator.new
deprecate :foo, bar: &quot;warning!&quot;, deprecator: MyLib::Deprecator.new
</code></pre>

<p>Custom deprecators must respond to <code>deprecation_warning(deprecated_method_name, message, caller_backtrace)</code> method where you can implement your custom warning behavior.</p>

<pre><code>class MyLib::Deprecator
  def deprecation_warning(deprecated_method_name, message, caller_backtrace = nil)
    message = &quot;#{deprecated_method_name} is deprecated and will be removed from MyLibrary | #{message}&quot;
    Kernel.warn message
  end
end
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-deprecate_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/deprecation.rb, line 22</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">deprecate</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">method_names</span>)
  <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">deprecate_methods</span>(<span class="ruby-keyword">self</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">method_names</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-mattr_accessor">
            
              mattr_accessor(*syms, instance_reader: true, instance_writer: true, instance_accessor: true, default: nil, &amp;blk)
            
          </h3>

          
            <div class="description">
              <p>Defines both class and instance accessors for class attributes. All class and instance methods created will be public, even if this method is called with a private or protected access modifier.</p>

<pre><code>module HairColors
  mattr_accessor :hair_colors
end

class Person
  include HairColors
end

HairColors.hair_colors = [:brown, :black, :blonde, :red]
HairColors.hair_colors # =&gt; [:brown, :black, :blonde, :red]
Person.new.hair_colors # =&gt; [:brown, :black, :blonde, :red]
</code></pre>

<p>If a subclass changes the value then that would also change the value for parent class. Similarly if parent class changes the value then that would change the value of subclasses too.</p>

<pre><code>class Citizen &lt; Person
end

Citizen.new.hair_colors &lt;&lt; :blue
Person.new.hair_colors # =&gt; [:brown, :black, :blonde, :red, :blue]
</code></pre>

<p>To omit the instance writer method, pass <code>instance_writer: false</code>. To omit the instance reader method, pass <code>instance_reader: false</code>.</p>

<pre><code>module HairColors
  mattr_accessor :hair_colors, instance_writer: false, instance_reader: false
end

class Person
  include HairColors
end

Person.new.hair_colors = [:brown]  # =&gt; NoMethodError
Person.new.hair_colors             # =&gt; NoMethodError
</code></pre>

<p>Or pass <code>instance_accessor: false</code>, to omit both instance methods.</p>

<pre><code>module HairColors
  mattr_accessor :hair_colors, instance_accessor: false
end

class Person
  include HairColors
end

Person.new.hair_colors = [:brown]  # =&gt; NoMethodError
Person.new.hair_colors             # =&gt; NoMethodError
</code></pre>

<p>You can set a default value for the attribute.</p>

<pre><code>module HairColors
  mattr_accessor :hair_colors, default: [:brown, :black, :blonde, :red]
end

class Person
  include HairColors
end

Person.class_variable_get(&quot;@@hair_colors&quot;) # =&gt; [:brown, :black, :blonde, :red]
</code></pre>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="Module.html#method-i-cattr_accessor">cattr_accessor</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-mattr_accessor_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/attribute_accessors.rb, line 200</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">mattr_accessor</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">syms</span>, <span class="ruby-value">instance_reader:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">instance_writer:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">default:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">blk</span>)
  <span class="ruby-identifier">location</span> = <span class="ruby-identifier">caller_locations</span>(<span class="ruby-value">1</span>, <span class="ruby-value">1</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">mattr_reader</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">syms</span>, <span class="ruby-value">instance_reader:</span> <span class="ruby-identifier">instance_reader</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-identifier">instance_accessor</span>, <span class="ruby-value">default:</span> <span class="ruby-identifier">default</span>, <span class="ruby-value">location:</span> <span class="ruby-identifier">location</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">blk</span>)
  <span class="ruby-identifier">mattr_writer</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">syms</span>, <span class="ruby-value">instance_writer:</span> <span class="ruby-identifier">instance_writer</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-identifier">instance_accessor</span>, <span class="ruby-value">default:</span> <span class="ruby-identifier">default</span>, <span class="ruby-value">location:</span> <span class="ruby-identifier">location</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-mattr_reader">
            
              mattr_reader(*syms, instance_reader: true, instance_accessor: true, default: nil, location: nil)
            
          </h3>

          
            <div class="description">
              <p>Defines a class attribute and creates a class and instance reader methods. The underlying class variable is set to <code>nil</code>, if it is not previously defined. All class and instance methods created will be public, even if this method is called with a private or protected access modifier.</p>

<pre><code>module HairColors
  mattr_reader :hair_colors
end

HairColors.hair_colors # =&gt; nil
HairColors.class_variable_set(&quot;@@hair_colors&quot;, [:brown, :black])
HairColors.hair_colors # =&gt; [:brown, :black]
</code></pre>

<p>The attribute name must be a valid method name in Ruby.</p>

<pre><code>module Foo
  mattr_reader :&quot;1_Badname&quot;
end
# =&gt; NameError: invalid attribute name: 1_Badname
</code></pre>

<p>To omit the instance reader method, pass <code>instance_reader: false</code> or <code>instance_accessor: false</code>.</p>

<pre><code>module HairColors
  mattr_reader :hair_colors, instance_reader: false
end

class Person
  include HairColors
end

Person.new.hair_colors # =&gt; NoMethodError
</code></pre>

<p>You can set a default value for the attribute.</p>

<pre><code>module HairColors
  mattr_reader :hair_colors, default: [:brown, :black, :blonde, :red]
end

class Person
  include HairColors
end

Person.new.hair_colors # =&gt; [:brown, :black, :blonde, :red]
</code></pre>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="Module.html#method-i-cattr_reader">cattr_reader</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-mattr_reader_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/attribute_accessors.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">mattr_reader</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">syms</span>, <span class="ruby-value">instance_reader:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">default:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">location:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-string">&quot;module attributes should be defined directly on class, not singleton&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">singleton_class?</span>
  <span class="ruby-identifier">location</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">caller_locations</span>(<span class="ruby-value">1</span>, <span class="ruby-value">1</span>).<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">definition</span> = []
  <span class="ruby-identifier">syms</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sym</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NameError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;invalid attribute name: #{sym}&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-regexp">/\A[_A-Za-z]\w*\z/</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-identifier">sym</span>)

    <span class="ruby-identifier">definition</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;def self.#{sym}; @@#{sym}; end&quot;</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">instance_reader</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">instance_accessor</span>
      <span class="ruby-identifier">definition</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;def #{sym}; @@#{sym}; end&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">sym_default_value</span> = (<span class="ruby-identifier">block_given?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">default</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword">yield</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">default</span>
    <span class="ruby-identifier">class_variable_set</span>(<span class="ruby-node">&quot;@@#{sym}&quot;</span>, <span class="ruby-identifier">sym_default_value</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">sym_default_value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">class_variable_defined?</span>(<span class="ruby-node">&quot;@@#{sym}&quot;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">module_eval</span>(<span class="ruby-identifier">definition</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;;&quot;</span>), <span class="ruby-identifier">location</span>.<span class="ruby-identifier">path</span>, <span class="ruby-identifier">location</span>.<span class="ruby-identifier">lineno</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-mattr_writer">
            
              mattr_writer(*syms, instance_writer: true, instance_accessor: true, default: nil, location: nil)
            
          </h3>

          
            <div class="description">
              <p>Defines a class attribute and creates a class and instance writer methods to allow assignment to the attribute. All class and instance methods created will be public, even if this method is called with a private or protected access modifier.</p>

<pre><code>module HairColors
  mattr_writer :hair_colors
end

class Person
  include HairColors
end

HairColors.hair_colors = [:brown, :black]
Person.class_variable_get(&quot;@@hair_colors&quot;) # =&gt; [:brown, :black]
Person.new.hair_colors = [:blonde, :red]
HairColors.class_variable_get(&quot;@@hair_colors&quot;) # =&gt; [:blonde, :red]
</code></pre>

<p>To omit the instance writer method, pass <code>instance_writer: false</code> or <code>instance_accessor: false</code>.</p>

<pre><code>module HairColors
  mattr_writer :hair_colors, instance_writer: false
end

class Person
  include HairColors
end

Person.new.hair_colors = [:blonde, :red] # =&gt; NoMethodError
</code></pre>

<p>You can set a default value for the attribute.</p>

<pre><code>module HairColors
  mattr_writer :hair_colors, default: [:brown, :black, :blonde, :red]
end

class Person
  include HairColors
end

Person.class_variable_get(&quot;@@hair_colors&quot;) # =&gt; [:brown, :black, :blonde, :red]
</code></pre>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="Module.html#method-i-cattr_writer">cattr_writer</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-mattr_writer_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/attribute_accessors.rb, line 115</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">mattr_writer</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">syms</span>, <span class="ruby-value">instance_writer:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">default:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">location:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-string">&quot;module attributes should be defined directly on class, not singleton&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">singleton_class?</span>
  <span class="ruby-identifier">location</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">caller_locations</span>(<span class="ruby-value">1</span>, <span class="ruby-value">1</span>).<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">definition</span> = []
  <span class="ruby-identifier">syms</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sym</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NameError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;invalid attribute name: #{sym}&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-regexp">/\A[_A-Za-z]\w*\z/</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-identifier">sym</span>)
    <span class="ruby-identifier">definition</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;def self.#{sym}=(val); @@#{sym} = val; end&quot;</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">instance_writer</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">instance_accessor</span>
      <span class="ruby-identifier">definition</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;def #{sym}=(val); @@#{sym} = val; end&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">sym_default_value</span> = (<span class="ruby-identifier">block_given?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">default</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword">yield</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">default</span>
    <span class="ruby-identifier">class_variable_set</span>(<span class="ruby-node">&quot;@@#{sym}&quot;</span>, <span class="ruby-identifier">sym_default_value</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">sym_default_value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">class_variable_defined?</span>(<span class="ruby-node">&quot;@@#{sym}&quot;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">module_eval</span>(<span class="ruby-identifier">definition</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;;&quot;</span>), <span class="ruby-identifier">location</span>.<span class="ruby-identifier">path</span>, <span class="ruby-identifier">location</span>.<span class="ruby-identifier">lineno</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-module_parent">
            
              module_parent()
            
          </h3>

          
            <div class="description">
              <p>Returns the module which contains this one according to its name.</p>

<pre><code>module M
  module N
  end
end
X = M::N

M::N.module_parent # =&gt; M
X.module_parent    # =&gt; M
</code></pre>

<p>The parent of top-level and anonymous modules is <a href="Object.html"><code>Object</code></a>.</p>

<pre><code>M.module_parent          # =&gt; Object
Module.new.module_parent # =&gt; Object
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-module_parent_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/introspection.rb, line 35</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">module_parent</span>
  <span class="ruby-identifier">module_parent_name</span> <span class="ruby-operator">?</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Inflector</span>.<span class="ruby-identifier">constantize</span>(<span class="ruby-identifier">module_parent_name</span>) <span class="ruby-operator">:</span> <span class="ruby-constant">Object</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-module_parent_name">
            
              module_parent_name()
            
          </h3>

          
            <div class="description">
              <p>Returns the name of the module containing this one.</p>

<pre><code>M::N.module_parent_name # =&gt; &quot;M&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-module_parent_name_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/introspection.rb, line 10</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">module_parent_name</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@parent_name</span>)
    <span class="ruby-ivar">@parent_name</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">parent_name</span> = <span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/::[^:]+\z/</span> <span class="ruby-operator">?</span> <span class="ruby-operator">-</span><span class="ruby-node">$`</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@parent_name</span> = <span class="ruby-identifier">parent_name</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">frozen?</span>
    <span class="ruby-identifier">parent_name</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-module_parents">
            
              module_parents()
            
          </h3>

          
            <div class="description">
              <p>Returns all the parents of this module according to its name, ordered from nested outwards. The receiver is not contained within the result.</p>

<pre><code>module M
  module N
  end
end
X = M::N

M.module_parents    # =&gt; [Object]
M::N.module_parents # =&gt; [M, Object]
X.module_parents    # =&gt; [M, Object]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-module_parents_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/introspection.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">module_parents</span>
  <span class="ruby-identifier">parents</span> = []
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">module_parent_name</span>
    <span class="ruby-identifier">parts</span> = <span class="ruby-identifier">module_parent_name</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;::&quot;</span>)
    <span class="ruby-keyword">until</span> <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">parents</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Inflector</span>.<span class="ruby-identifier">constantize</span>(<span class="ruby-identifier">parts</span> <span class="ruby-operator">*</span> <span class="ruby-string">&quot;::&quot;</span>)
      <span class="ruby-identifier">parts</span>.<span class="ruby-identifier">pop</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">parents</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Object</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">parents</span>.<span class="ruby-identifier">include?</span> <span class="ruby-constant">Object</span>
  <span class="ruby-identifier">parents</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-redefine_method">
            
              redefine_method(method, &amp;block)
            
          </h3>

          
            <div class="description">
              <p>Replaces the existing method definition, if there is one, with the passed block as its body.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-redefine_method_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/redefine_method.rb, line 17</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">redefine_method</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">visibility</span> = <span class="ruby-identifier">method_visibility</span>(<span class="ruby-identifier">method</span>)
  <span class="ruby-identifier">silence_redefinition_of_method</span>(<span class="ruby-identifier">method</span>)
  <span class="ruby-identifier">define_method</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">send</span>(<span class="ruby-identifier">visibility</span>, <span class="ruby-identifier">method</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-redefine_singleton_method">
            
              redefine_singleton_method(method, &amp;block)
            
          </h3>

          
            <div class="description">
              <p>Replaces the existing singleton method definition, if there is one, with the passed block as its body.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-redefine_singleton_method_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/redefine_method.rb, line 26</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">redefine_singleton_method</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">singleton_class</span>.<span class="ruby-identifier">redefine_method</span>(<span class="ruby-identifier">method</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-remove_possible_method">
            
              remove_possible_method(method)
            
          </h3>

          
            <div class="description">
              <p>Removes the named method, if it exists.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-remove_possible_method_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/remove_method.rb, line 7</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_possible_method</span>(<span class="ruby-identifier">method</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">method_defined?</span>(<span class="ruby-identifier">method</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">private_method_defined?</span>(<span class="ruby-identifier">method</span>)
    <span class="ruby-identifier">undef_method</span>(<span class="ruby-identifier">method</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-remove_possible_singleton_method">
            
              remove_possible_singleton_method(method)
            
          </h3>

          
            <div class="description">
              <p>Removes the named singleton method, if it exists.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-remove_possible_singleton_method_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/remove_method.rb, line 14</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_possible_singleton_method</span>(<span class="ruby-identifier">method</span>)
  <span class="ruby-identifier">singleton_class</span>.<span class="ruby-identifier">remove_possible_method</span>(<span class="ruby-identifier">method</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-silence_redefinition_of_method">
            
              silence_redefinition_of_method(method)
            
          </h3>

          
            <div class="description">
              <p>Marks the named method as intended to be redefined, if it exists. Suppresses the Ruby method redefinition warning. Prefer <a href="Module.html#method-i-redefine_method"><code>redefine_method</code></a> where possible.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-silence_redefinition_of_method_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/redefine_method.rb, line 7</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">silence_redefinition_of_method</span>(<span class="ruby-identifier">method</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">method_defined?</span>(<span class="ruby-identifier">method</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">private_method_defined?</span>(<span class="ruby-identifier">method</span>)
    <span class="ruby-comment"># This suppresses the &quot;method redefined&quot; warning; the self-alias</span>
    <span class="ruby-comment"># looks odd, but means we don&#39;t need to generate a unique name</span>
    <span class="ruby-identifier">alias_method</span> <span class="ruby-identifier">method</span>, <span class="ruby-identifier">method</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-thread_cattr_accessor">
            
              thread_cattr_accessor(*syms, instance_reader: true, instance_writer: true, instance_accessor: true, default: nil)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="Module.html#method-i-thread_mattr_accessor">thread_mattr_accessor</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 id="method-i-thread_mattr_accessor">
            
              thread_mattr_accessor(*syms, instance_reader: true, instance_writer: true, instance_accessor: true, default: nil)
            
          </h3>

          
            <div class="description">
              <p>Defines both class and instance accessors for class attributes.</p>

<pre><code>class Account
  thread_mattr_accessor :user
end

Account.user = &quot;DHH&quot;
Account.user     # =&gt; &quot;DHH&quot;
Account.new.user # =&gt; &quot;DHH&quot;
</code></pre>

<p>If a subclass changes the value, the parent class&#39; value is not changed. Similarly, if the parent class changes the value, the value of subclasses is not changed.</p>

<pre><code>class Customer &lt; Account
end

Customer.user = &quot;Rafael&quot;
Customer.user # =&gt; &quot;Rafael&quot;
Account.user  # =&gt; &quot;DHH&quot;
</code></pre>

<p>To omit the instance writer method, pass <code>instance_writer: false</code>. To omit the instance reader method, pass <code>instance_reader: false</code>.</p>

<pre><code>class Current
  thread_mattr_accessor :user, instance_writer: false, instance_reader: false
end

Current.new.user = &quot;DHH&quot;  # =&gt; NoMethodError
Current.new.user          # =&gt; NoMethodError
</code></pre>

<p>Or pass <code>instance_accessor: false</code>, to omit both instance methods.</p>

<pre><code>class Current
  thread_mattr_accessor :user, instance_accessor: false
end

Current.new.user = &quot;DHH&quot;  # =&gt; NoMethodError
Current.new.user          # =&gt; NoMethodError
</code></pre>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="Module.html#method-i-thread_cattr_accessor">thread_cattr_accessor</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-thread_mattr_accessor_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activesupport/lib/active_support/core_ext/module/attribute_accessors_per_thread.rb, line 143</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">thread_mattr_accessor</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">syms</span>, <span class="ruby-value">instance_reader:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">instance_writer:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">default:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">thread_mattr_reader</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">syms</span>, <span class="ruby-value">instance_reader:</span> <span class="ruby-identifier">instance_reader</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-identifier">instance_accessor</span>, <span class="ruby-value">default:</span> <span class="ruby-identifier">default</span>)
  <span class="ruby-identifier">thread_mattr_writer</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">syms</span>, <span class="ruby-value">instance_writer:</span> <span class="ruby-identifier">instance_writer</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-identifier">instance_accessor</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
</div>
