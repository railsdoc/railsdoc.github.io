---
title: ActionMailbox::Router
layout: default
---
<div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 8.1.0.rc1</span><br />
        
        <div class="type">Class</div>
        <h1>
            ActionMailbox::Router
            
                <span class="parent">&lt;
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/actionmailbox/lib/action_mailbox/router_rb.html">actionmailbox/lib/action_mailbox/router.rb</a></li>
            
            <li><a href="../../files/actionmailbox/lib/action_mailbox/router/route_rb.html">actionmailbox/lib/action_mailbox/router/route.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h1 id="class-ActionMailbox::Router-label-Action+Mailbox+Router">Action Mailbox Router</h1>

<p>Encapsulates the routes that live on the ApplicationMailbox and performs the actual routing when an inbound_email is received.</p>

    </div>
  

  

  
  


  
    <h2 id="namespace">Namespace</h2>

    

    
      <h3 id="class">Class</h3>
      <ul>
      
        <li><a href="Router/Route.html">ActionMailbox::Router::Route</a></li>
      
        <li><a href="Router/RoutingError.html">ActionMailbox::Router::RoutingError</a></li>
      
      </ul>
    
  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-add_route">add_route</a>
        </li>
      
        <li>
          <a href="#method-i-add_routes">add_routes</a>
        </li>
      
        <li>
          <a href="#method-i-mailbox_for">mailbox_for</a>
        </li>
      
        <li>
          <a href="#method-c-new">new</a>
        </li>
      
        <li>
          <a href="#method-i-route">route</a>
        </li>
      
    </ul>
  

  

  
    

    

    

    

    <!-- Methods -->
    
      <h2 id="class-public-methods">Class Public methods</h2>
      
        <div class="method">
          <h3 id="method-c-new"><code><b>new</b>()</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">📝 Source code</span>
              </summary>

              <pre><code class="ruby"># File actionmailbox/lib/action_mailbox/router.rb, line 11
def initialize
  @routes = []
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/actionmailbox/lib/action_mailbox/router.rb#L11" target="_blank" class="github_url">🔎 See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-add_route"><code><b>add_route</b>(address, to:)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">📝 Source code</span>
              </summary>

              <pre><code class="ruby"># File actionmailbox/lib/action_mailbox/router.rb, line 21
def add_route(address, to:)
  routes.append Route.new(address, to: to)
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/actionmailbox/lib/action_mailbox/router.rb#L21" target="_blank" class="github_url">🔎 See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-add_routes"><code><b>add_routes</b>(routes)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">📝 Source code</span>
              </summary>

              <pre><code class="ruby"># File actionmailbox/lib/action_mailbox/router.rb, line 15
def add_routes(routes)
  routes.each do |(address, mailbox_name)|
    add_route address, to: mailbox_name
  end
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/actionmailbox/lib/action_mailbox/router.rb#L15" target="_blank" class="github_url">🔎 See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-mailbox_for"><code><b>mailbox_for</b>(inbound_email)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">📝 Source code</span>
              </summary>

              <pre><code class="ruby"># File actionmailbox/lib/action_mailbox/router.rb, line 35
def mailbox_for(inbound_email)
  routes.detect { |route| route.match?(inbound_email) }&amp;.mailbox_class
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/actionmailbox/lib/action_mailbox/router.rb#L35" target="_blank" class="github_url">🔎 See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-route"><code><b>route</b>(inbound_email)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">📝 Source code</span>
              </summary>

              <pre><code class="ruby"># File actionmailbox/lib/action_mailbox/router.rb, line 25
def route(inbound_email)
  if mailbox = mailbox_for(inbound_email)
    mailbox.receive(inbound_email)
  else
    inbound_email.bounced!

    raise RoutingError
  end
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/actionmailbox/lib/action_mailbox/router.rb#L25" target="_blank" class="github_url">🔎 See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
  
</div>

    </div>
</div>
