---
title: ActiveRecord::DatabaseConfigurations::HashConfig
layout: default
---
<div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 8.1.0.rc1</span><br />
        
        <div class="type">Class</div>
        <h1>
            ActiveRecord::DatabaseConfigurations::HashConfig
            
                <span class="parent">&lt;
                    
                    ActiveRecord::DatabaseConfigurations::DatabaseConfig
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/activerecord/lib/active_record/database_configurations/hash_config_rb.html">activerecord/lib/active_record/database_configurations/hash_config.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h1 id="class-ActiveRecord::DatabaseConfigurations::HashConfig-label-Active+Record+Database+Hash+Config">Active Record Database <a href="../../Hash.html"><code>Hash</code></a> Config</h1>

<p>A <a href="HashConfig.html"><code>HashConfig</code></a> object is created for each database configuration entry that is created from a hash.</p>

<p>A hash config:</p>

<pre><code>{ &quot;development&quot; =&gt; { &quot;database&quot; =&gt; &quot;db_name&quot; } }
</code></pre>

<p>Becomes:</p>

<pre><code>#&lt;ActiveRecord::DatabaseConfigurations::HashConfig:0x00007fd1acbded10
  @env_name=&quot;development&quot;, @name=&quot;primary&quot;, @config={database: &quot;db_name&quot;}&gt;
</code></pre>

<p>See <a href="../DatabaseConfigurations.html"><code>ActiveRecord::DatabaseConfigurations</code></a> for more info.</p>

    </div>
  

  

  
  


  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-adapter">adapter</a>
        </li>
      
        <li>
          <a href="#method-i-checkout_timeout">checkout_timeout</a>
        </li>
      
        <li>
          <a href="#method-i-database">database</a>
        </li>
      
        <li>
          <a href="#method-i-default_schema_cache_path">default_schema_cache_path</a>
        </li>
      
        <li>
          <a href="#method-i-host">host</a>
        </li>
      
        <li>
          <a href="#method-i-idle_timeout">idle_timeout</a>
        </li>
      
        <li>
          <a href="#method-i-keepalive">keepalive</a>
        </li>
      
        <li>
          <a href="#method-i-lazy_schema_cache_path">lazy_schema_cache_path</a>
        </li>
      
        <li>
          <a href="#method-i-max_age">max_age</a>
        </li>
      
        <li>
          <a href="#method-i-max_connections">max_connections</a>
        </li>
      
        <li>
          <a href="#method-i-max_queue">max_queue</a>
        </li>
      
        <li>
          <a href="#method-i-max_threads">max_threads</a>
        </li>
      
        <li>
          <a href="#method-i-migrations_paths">migrations_paths</a>
        </li>
      
        <li>
          <a href="#method-i-min_connections">min_connections</a>
        </li>
      
        <li>
          <a href="#method-i-min_threads">min_threads</a>
        </li>
      
        <li>
          <a href="#method-c-new">new</a>
        </li>
      
        <li>
          <a href="#method-i-pool">pool</a>
        </li>
      
        <li>
          <a href="#method-i-query_cache">query_cache</a>
        </li>
      
        <li>
          <a href="#method-i-replica-3F">replica?</a>
        </li>
      
        <li>
          <a href="#method-i-schema_cache_path">schema_cache_path</a>
        </li>
      
        <li>
          <a href="#method-i-schema_dump">schema_dump</a>
        </li>
      
        <li>
          <a href="#method-i-seeds-3F">seeds?</a>
        </li>
      
    </ul>
  

  

  
    

    

    

    
      <!-- Section attributes -->
      <h2 id="attributes">Attributes</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>configuration_hash</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    

    <!-- Methods -->
    
      <h2 id="class-public-methods">Class Public methods</h2>
      
        <div class="method">
          <h3 id="method-c-new">
            
              new(env_name, name, configuration_hash)
            
          </h3>

          
            <div class="description">
              <p>Initialize a new <a href="HashConfig.html"><code>HashConfig</code></a> object</p>

<h4 id="method-c-new-label-Parameters">Parameters</h4>
<ul><li>
<p><code>env_name</code> - The <a href="../../Rails.html"><code>Rails</code></a> environment, i.e. ‚Äúdevelopment‚Äù.</p>
</li><li>
<p><code>name</code> - The db config name. In a standard two-tier database configuration this will default to ‚Äúprimary‚Äù. In a multiple database three-tier database configuration this corresponds to the name used in the second tier, for example ‚Äúprimary_readonly‚Äù.</p>
</li><li>
<p><a href="HashConfig.html#attribute-i-configuration_hash"><code>configuration_hash</code></a> - The config hash. This is the hash that contains the database adapter, name, and other important information for database connections.</p>
</li></ul>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 38
def initialize(env_name, name, configuration_hash)
  super(env_name, name)
  @configuration_hash = configuration_hash.symbolize_keys.freeze
  validate_configuration!
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L38" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-adapter">
            
              adapter()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 130
def adapter
  configuration_hash[:adapter]&amp;.to_s
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L130" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-checkout_timeout">
            
              checkout_timeout()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 112
def checkout_timeout
  (configuration_hash[:checkout_timeout] || 5).to_f
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L112" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-database">
            
              database()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 65
def database
  configuration_hash[:database]
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L65" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-default_schema_cache_path">
            
              default_schema_cache_path(db_dir = &quot;db&quot;)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 140
def default_schema_cache_path(db_dir = &quot;db&quot;)
  if primary?
    File.join(db_dir, &quot;schema_cache.yml&quot;)
  else
    File.join(db_dir, &quot;#{name}_schema_cache.yml&quot;)
  end
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L140" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-host">
            
              host()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 57
def host
  configuration_hash[:host]
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L57" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-idle_timeout">
            
              idle_timeout()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 120
def idle_timeout
  timeout = configuration_hash.fetch(:idle_timeout, 300).to_f
  timeout if timeout &gt; 0
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L120" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-keepalive">
            
              keepalive()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 125
def keepalive
  keepalive = (configuration_hash[:keepalive] || 600).to_f
  keepalive if keepalive &gt; 0
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L125" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-lazy_schema_cache_path">
            
              lazy_schema_cache_path()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 148
def lazy_schema_cache_path
  schema_cache_path || default_schema_cache_path
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L148" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-max_age">
            
              max_age()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 95
def max_age
  v = configuration_hash[:max_age]&amp;.to_i
  if v &amp;&amp; v &gt; 0
    v
  else
    Float::INFINITY
  end
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L95" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-max_connections">
            
              max_connections()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="HashConfig.html#method-i-pool">pool</a>
            </div>
          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 73
def max_connections
  max_connections = configuration_hash.fetch(:max_connections) {
    configuration_hash.fetch(:pool, 5)
  }&amp;.to_i
  max_connections if max_connections &amp;&amp; max_connections &gt;= 0
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L73" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-max_queue">
            
              max_queue()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 108
def max_queue
  max_threads * 4
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L108" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-max_threads">
            
              max_threads()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 91
def max_threads
  (configuration_hash[:max_threads] || (max_connections || 5).clamp(0, 5)).to_i
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L91" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-migrations_paths">
            
              migrations_paths()
            
          </h3>

          
            <div class="description">
              <p>The migrations paths for a database configuration. If the <a href="HashConfig.html#method-i-migrations_paths"><code>migrations_paths</code></a> key is present in the config, <a href="HashConfig.html#method-i-migrations_paths"><code>migrations_paths</code></a> will return its value.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 53
def migrations_paths
  configuration_hash[:migrations_paths]
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L53" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-min_connections">
            
              min_connections()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 80
def min_connections
  (configuration_hash[:min_connections] || 0).to_i
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L80" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-min_threads">
            
              min_threads()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 87
def min_threads
  (configuration_hash[:min_threads] || 0).to_i
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L87" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-pool">
            
              pool()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="HashConfig.html#method-i-max_connections">max_connections</a>
            </div>
          

          
          
        </div>
        
        <div class="method">
          <h3 id="method-i-query_cache">
            
              query_cache()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 104
def query_cache
  configuration_hash[:query_cache]
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L104" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-replica-3F">
            
              replica?()
            
          </h3>

          
            <div class="description">
              <p>Determines whether a database configuration is for a replica / readonly connection. If the <code>replica</code> key is present in the config, <code>replica?</code> will return <code>true</code>.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 47
def replica?
  configuration_hash[:replica]
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L47" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-schema_cache_path">
            
              schema_cache_path()
            
          </h3>

          
            <div class="description">
              <p>The path to the schema cache dump file for a database. If omitted, the filename will be read from ENV or a default will be derived.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 136
def schema_cache_path
  configuration_hash[:schema_cache_path]
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L136" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-schema_dump">
            
              schema_dump(format = schema_format)
            
          </h3>

          
            <div class="description">
              <p>Determines whether to dump the schema/structure files and the filename that should be used.</p>

<p>If <code>configuration_hash[:schema_dump]</code> is set to <code>false</code> or <code>nil</code> the schema will not be dumped.</p>

<p>If the config option is set that will be used. Otherwise <a href="../../Rails.html"><code>Rails</code></a> will generate the filename from the database config name.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 172
def schema_dump(format = schema_format)
  if configuration_hash.key?(:schema_dump)
    if config = configuration_hash[:schema_dump]
      config
    end
  elsif primary?
    schema_file_type(format)
  else
    &quot;#{name}_#{schema_file_type(format)}&quot;
  end
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L172" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-seeds-3F">
            
              seeds?()
            
          </h3>

          
            <div class="description">
              <p>Determines whether the db:prepare task should seed the database from db/seeds.rb.</p>

<p>If the <code>seeds</code> key is present in the config, <code>seeds?</code> will return its value. Otherwise, it will return <code>true</code> for the primary database and <code>false</code> for all other configs.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 160
def seeds?
  configuration_hash.fetch(:seeds, primary?)
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activerecord/lib/active_record/database_configurations/hash_config.rb#L160" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
  
</div>

    </div>
</div>
