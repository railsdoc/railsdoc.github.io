---
title: ActiveRecord::Tasks::DatabaseTasks
layout: default
---
<div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 5.2.2</span><br />
        
        <div class="type">Module</div>
        <h1>
            ActiveRecord::Tasks::DatabaseTasks
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/activerecord/lib/active_record/tasks/database_tasks_rb.html">activerecord/lib/active_record/tasks/database_tasks.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p><a href="DatabaseTasks.html"><code>ActiveRecord::Tasks::DatabaseTasks</code></a> is a utility class, which encapsulates logic behind common tasks used to manage database and migrations.</p>

<p>The tasks defined here are used with Rake tasks provided by Active Record.</p>

<p>In order to use <a href="DatabaseTasks.html"><code>DatabaseTasks</code></a>, a few config values need to be set. All the needed config values are set by Rails already, so it&#39;s necessary to do it only if you want to change the defaults or when you want to use Active Record outside of Rails (in such case after configuring the database tasks, you can also use the rake tasks defined in Active Record).</p>

<p>The possible config values are:</p>
<ul><li>
<p><code>env</code>: current environment (like <a href="../../Rails.html#method-c-env"><code>Rails.env</code></a>).</p>
</li><li>
<p><code>database_configuration</code>: configuration of your databases (as in <code>config/database.yml</code>).</p>
</li><li>
<p><code>db_dir</code>: your <code>db</code> directory.</p>
</li><li>
<p><code>fixtures_path</code>: a path to fixtures directory.</p>
</li><li>
<p><code>migrations_paths</code>: a list of paths to directories with migrations.</p>
</li><li>
<p><code>seed_loader</code>: an object which will load seeds, it needs to respond to the <code>load_seed</code> method.</p>
</li><li>
<p><code>root</code>: a path to the root of the application.</p>
</li></ul>

<p>Example usage of <a href="DatabaseTasks.html"><code>DatabaseTasks</code></a> outside Rails could look as such:</p>

<pre><code>include ActiveRecord::Tasks
DatabaseTasks.database_configuration = YAML.load_file(&#39;my_database_config.yml&#39;)
DatabaseTasks.db_dir = &#39;db&#39;
# other settings...

DatabaseTasks.create_current(&#39;production&#39;)
</code></pre>

    </div>
  

  

  
  


  

  
    <!-- Method ref -->
    <h2>Methods</h2>
    <dl class="methods">
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-charset">charset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-charset_current">charset_current</a>,
              </li>
            
              
              <li>
                <a href="#method-i-check_protected_environments-21">check_protected_environments!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-check_schema_file">check_schema_file</a>,
              </li>
            
              
              <li>
                <a href="#method-i-check_target_version">check_target_version</a>,
              </li>
            
              
              <li>
                <a href="#method-i-collation">collation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-collation_current">collation_current</a>,
              </li>
            
              
              <li>
                <a href="#method-i-create">create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-create_all">create_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-create_current">create_current</a>,
              </li>
            
              
              <li>
                <a href="#method-i-current_config">current_config</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-db_dir">db_dir</a>,
              </li>
            
              
              <li>
                <a href="#method-i-drop">drop</a>,
              </li>
            
              
              <li>
                <a href="#method-i-drop_all">drop_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-drop_current">drop_current</a>,
              </li>
            
              
              <li>
                <a href="#method-i-dump_schema_cache">dump_schema_cache</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-env">env</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-fixtures_path">fixtures_path</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>L</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-load_schema_current">load_schema_current</a>,
              </li>
            
              
              <li>
                <a href="#method-i-load_seed">load_seed</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-migrate">migrate</a>,
              </li>
            
              
              <li>
                <a href="#method-i-migrations_paths">migrations_paths</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-purge">purge</a>,
              </li>
            
              
              <li>
                <a href="#method-i-purge_all">purge_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-purge_current">purge_current</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-register_task">register_task</a>,
              </li>
            
              
              <li>
                <a href="#method-i-root">root</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-schema_file">schema_file</a>,
              </li>
            
              
              <li>
                <a href="#method-i-seed_loader">seed_loader</a>,
              </li>
            
              
              <li>
                <a href="#method-i-structure_dump">structure_dump</a>,
              </li>
            
              
              <li>
                <a href="#method-c-structure_dump_flags">structure_dump_flags</a>,
              </li>
            
              
              <li>
                <a href="#method-i-structure_load">structure_load</a>,
              </li>
            
              
              <li>
                <a href="#method-c-structure_load_flags">structure_load_flags</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-target_version">target_version</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  

  
    

    

    
      <!-- Section constants -->
      <h2>Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">LOCAL_HOSTS</td>
            <td>=</td>
            <td class="attr-value">[&quot;127.0.0.1&quot;, &quot;localhost&quot;]</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    

    
      <!-- Section attributes -->
      <h2>Attributes</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>current_config</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>database_configuration</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>db_dir</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>env</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>fixtures_path</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>migrations_paths</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>root</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>seed_loader</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    

    <!-- Methods -->
    
      <h2>Class Public methods</h2>
      
        <div class="method">
          <h3 id="method-c-structure_dump_flags">
            
              structure_dump_flags
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-c-structure_dump_flags" name="method-c-structure_dump_flags" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Extra flags passed to database CLI tool (mysqldump/pg_dump) when calling db:structure:dump</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-structure_dump_flags_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 41</span>
<span class="ruby-identifier">mattr_accessor</span> <span class="ruby-value">:structure_dump_flags</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-keyword">false</span>
</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-c-structure_load_flags">
            
              structure_load_flags
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-c-structure_load_flags" name="method-c-structure_load_flags" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Extra flags passed to database CLI tool when calling db:structure:load</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-structure_load_flags_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 46</span>
<span class="ruby-identifier">mattr_accessor</span> <span class="ruby-value">:structure_load_flags</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-keyword">false</span>
</pre>
              </div>
            </div>
            
          </div>
        
      
    
      <h2>Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-charset">
            
              charset(*arguments)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-charset" name="method-i-charset" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-charset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 194</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">charset</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&quot;adapter&quot;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">charset</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-charset_current">
            
              charset_current(environment = env)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-charset_current" name="method-i-charset_current" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-charset_current_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 190</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">charset_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">charset</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>[<span class="ruby-identifier">environment</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-check_protected_environments-21">
            
              check_protected_environments!()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-check_protected_environments-21" name="method-i-check_protected_environments-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-check_protected_environments-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 55</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">check_protected_environments!</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;DISABLE_DATABASE_ENVIRONMENT_CHECK&quot;</span>]
    <span class="ruby-identifier">current</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">migration_context</span>.<span class="ruby-identifier">current_environment</span>
    <span class="ruby-identifier">stored</span>  = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">migration_context</span>.<span class="ruby-identifier">last_stored_environment</span>

    <span class="ruby-keyword">if</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">migration_context</span>.<span class="ruby-identifier">protected_environment?</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ProtectedEnvironmentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">stored</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">stored</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">stored</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">current</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">EnvironmentMismatchError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">current:</span> <span class="ruby-identifier">current</span>, <span class="ruby-value">stored:</span> <span class="ruby-identifier">stored</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">NoDatabaseError</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-check_schema_file">
            
              check_schema_file(filename)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-check_schema_file" name="method-i-check_schema_file" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-check_schema_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 271</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">check_schema_file</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">filename</span>)
    <span class="ruby-identifier">message</span> = <span class="ruby-node">%{#{filename} doesn&#39;t exist yet. Run `rails db:migrate` to create it, then try again.}</span>.<span class="ruby-identifier">dup</span>
    <span class="ruby-identifier">message</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">%{ If you do not intend to use a database, you should instead alter #{Rails.root}/config/application.rb to limit the frameworks that will be loaded.}</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>)
    <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">abort</span> <span class="ruby-identifier">message</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-check_target_version">
            
              check_target_version()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-check_target_version" name="method-i-check_target_version" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-check_target_version_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 180</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">check_target_version</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">target_version</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-constant">Migration</span><span class="ruby-operator">::</span><span class="ruby-constant">MigrationFilenameRegexp</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>]) <span class="ruby-operator">||</span> <span class="ruby-regexp">/\A\d+\z/</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>]))
    <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Invalid format of target version: `VERSION=#{ENV[&#39;VERSION&#39;]}`&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-collation">
            
              collation(*arguments)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-collation" name="method-i-collation" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-collation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 203</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">collation</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&quot;adapter&quot;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">collation</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-collation_current">
            
              collation_current(environment = env)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-collation_current" name="method-i-collation_current" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-collation_current_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 199</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">collation_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">collation</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>[<span class="ruby-identifier">environment</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-create">
            
              create(*arguments)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-create" name="method-i-create" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 117</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">create</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&quot;adapter&quot;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Created database &#39;#{configuration[&#39;database&#39;]}&#39;&quot;</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">DatabaseAlreadyExists</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Database &#39;#{configuration[&#39;database&#39;]}&#39; already exists&quot;</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Couldn&#39;t create &#39;#{configuration[&#39;database&#39;]}&#39; database. Please check your configuration.&quot;</span>
  <span class="ruby-identifier">raise</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-create_all">
            
              create_all()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-create_all" name="method-i-create_all" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-create_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 129</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">create_all</span>
  <span class="ruby-identifier">old_pool</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">retrieve_connection_pool</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection_specification_name</span>)
  <span class="ruby-identifier">each_local_configuration</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span> <span class="ruby-identifier">create</span> <span class="ruby-identifier">configuration</span> }
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">old_pool</span>
    <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection_handler</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">old_pool</span>.<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">to_hash</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-create_current">
            
              create_current(environment = env)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-create_current" name="method-i-create_current" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-create_current_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 137</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">create_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">create</span> <span class="ruby-identifier">configuration</span>
  }
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">environment</span>.<span class="ruby-identifier">to_sym</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-current_config">
            
              current_config(options = {})
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-current_config" name="method-i-current_config" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-current_config_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 108</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">current_config</span>(<span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">options</span>.<span class="ruby-identifier">reverse_merge!</span> <span class="ruby-value">env:</span> <span class="ruby-identifier">env</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">:config</span>)
    <span class="ruby-ivar">@current_config</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:config</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@current_config</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>[<span class="ruby-identifier">options</span>[<span class="ruby-value">:env</span>]]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-db_dir">
            
              db_dir()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-db_dir" name="method-i-db_dir" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-db_dir_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 80</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">db_dir</span>
  <span class="ruby-ivar">@db_dir</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">paths</span>[<span class="ruby-string">&quot;db&quot;</span>].<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-drop">
            
              drop(*arguments)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-drop" name="method-i-drop" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-drop_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 144</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">drop</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&quot;adapter&quot;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">drop</span>
  <span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Dropped database &#39;#{configuration[&#39;database&#39;]}&#39;&quot;</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">NoDatabaseError</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Database &#39;#{configuration[&#39;database&#39;]}&#39; does not exist&quot;</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Couldn&#39;t drop database &#39;#{configuration[&#39;database&#39;]}&#39;&quot;</span>
  <span class="ruby-identifier">raise</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-drop_all">
            
              drop_all()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-drop_all" name="method-i-drop_all" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-drop_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 156</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">drop_all</span>
  <span class="ruby-identifier">each_local_configuration</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span> <span class="ruby-identifier">drop</span> <span class="ruby-identifier">configuration</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-drop_current">
            
              drop_current(environment = env)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-drop_current" name="method-i-drop_current" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-drop_current_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 160</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">drop_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">drop</span> <span class="ruby-identifier">configuration</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-dump_schema_cache">
            
              dump_schema_cache(conn, filename)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-dump_schema_cache" name="method-i-dump_schema_cache" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Dumps the schema cache in YAML format for the connection into the file</p>

<h4 id="method-i-dump_schema_cache-label-Examples-3A">Examples:</h4>

<pre><code>ActiveRecord::Tasks::DatabaseTasks.dump_schema_cache(ActiveRecord::Base.connection, &quot;tmp/schema_dump.yaml&quot;)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-dump_schema_cache_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 293</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">dump_schema_cache</span>(<span class="ruby-identifier">conn</span>, <span class="ruby-identifier">filename</span>)
  <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">clear!</span>
  <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">data_sources</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">table</span><span class="ruby-operator">|</span> <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">table</span>) }
  <span class="ruby-identifier">open</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-string">&quot;wb&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-constant">YAML</span>.<span class="ruby-identifier">dump</span>(<span class="ruby-identifier">conn</span>.<span class="ruby-identifier">schema_cache</span>)) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-env">
            
              env()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-env" name="method-i-env" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-env_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 100</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">env</span>
  <span class="ruby-ivar">@env</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-fixtures_path">
            
              fixtures_path()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-fixtures_path" name="method-i-fixtures_path" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-fixtures_path_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 88</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">fixtures_path</span>
  <span class="ruby-ivar">@fixtures_path</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;FIXTURES_PATH&quot;</span>]
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">root</span>, <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;FIXTURES_PATH&quot;</span>])
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">root</span>, <span class="ruby-string">&quot;test&quot;</span>, <span class="ruby-string">&quot;fixtures&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-load_schema_current">
            
              load_schema_current(format = ActiveRecord::Base.schema_format, file = nil, environment = env)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-load_schema_current" name="method-i-load_schema_current" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-load_schema_current_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 264</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">load_schema_current</span>(<span class="ruby-identifier">format</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">schema_format</span>, <span class="ruby-identifier">file</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span>, <span class="ruby-identifier">configuration_environment</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">load_schema</span> <span class="ruby-identifier">configuration</span>, <span class="ruby-identifier">format</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">configuration_environment</span>
  }
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">environment</span>.<span class="ruby-identifier">to_sym</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-load_seed">
            
              load_seed()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-load_seed" name="method-i-load_seed" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-load_seed_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 279</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">load_seed</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">seed_loader</span>
    <span class="ruby-identifier">seed_loader</span>.<span class="ruby-identifier">load_seed</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;You tried to load seed data, but no seed loader is specified. Please specify seed &quot;</span> \
          <span class="ruby-string">&quot;loader with ActiveRecord::Tasks::DatabaseTasks.seed_loader = your_seed_loader\n&quot;</span> \
          <span class="ruby-string">&quot;Seed loader should respond to load_seed method&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-migrate">
            
              migrate()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-migrate" name="method-i-migrate" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-migrate_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 166</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">migrate</span>
  <span class="ruby-identifier">check_target_version</span>

  <span class="ruby-identifier">verbose</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERBOSE&quot;</span>] <span class="ruby-operator">?</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERBOSE&quot;</span>] <span class="ruby-operator">!=</span> <span class="ruby-string">&quot;false&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;SCOPE&quot;</span>]
  <span class="ruby-identifier">verbose_was</span>, <span class="ruby-constant">Migration</span>.<span class="ruby-identifier">verbose</span> = <span class="ruby-constant">Migration</span>.<span class="ruby-identifier">verbose</span>, <span class="ruby-identifier">verbose</span>
  <span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">migration_context</span>.<span class="ruby-identifier">migrate</span>(<span class="ruby-identifier">target_version</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">migration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">scope</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">migration</span>.<span class="ruby-identifier">scope</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">clear_cache!</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-constant">Migration</span>.<span class="ruby-identifier">verbose</span> = <span class="ruby-identifier">verbose_was</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-migrations_paths">
            
              migrations_paths()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-migrations_paths" name="method-i-migrations_paths" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-migrations_paths_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 84</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">migrations_paths</span>
  <span class="ruby-ivar">@migrations_paths</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">paths</span>[<span class="ruby-string">&quot;db/migrate&quot;</span>].<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-purge">
            
              purge(configuration)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-purge" name="method-i-purge" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-purge_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 208</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">purge</span>(<span class="ruby-identifier">configuration</span>)
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&quot;adapter&quot;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-identifier">configuration</span>).<span class="ruby-identifier">purge</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-purge_all">
            
              purge_all()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-purge_all" name="method-i-purge_all" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-purge_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 212</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">purge_all</span>
  <span class="ruby-identifier">each_local_configuration</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">purge</span> <span class="ruby-identifier">configuration</span>
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-purge_current">
            
              purge_current(environment = env)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-purge_current" name="method-i-purge_current" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-purge_current_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 218</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">purge_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">configuration</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">purge</span> <span class="ruby-identifier">configuration</span>
  }
  <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">environment</span>.<span class="ruby-identifier">to_sym</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-register_task">
            
              register_task(pattern, task)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-register_task" name="method-i-register_task" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-register_task_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">register_task</span>(<span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">task</span>)
  <span class="ruby-ivar">@tasks</span> <span class="ruby-operator">||=</span> {}
  <span class="ruby-ivar">@tasks</span>[<span class="ruby-identifier">pattern</span>] = <span class="ruby-identifier">task</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-root">
            
              root()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-root" name="method-i-root" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-root_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 96</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">root</span>
  <span class="ruby-ivar">@root</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-schema_file">
            
              schema_file(format = ActiveRecord::Base.schema_format)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-schema_file" name="method-i-schema_file" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-schema_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 255</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">schema_file</span>(<span class="ruby-identifier">format</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">schema_format</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">format</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:ruby</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">db_dir</span>, <span class="ruby-string">&quot;schema.rb&quot;</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-value">:sql</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">db_dir</span>, <span class="ruby-string">&quot;structure.sql&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-seed_loader">
            
              seed_loader()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-seed_loader" name="method-i-seed_loader" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-seed_loader_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 104</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">seed_loader</span>
  <span class="ruby-ivar">@seed_loader</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-structure_dump">
            
              structure_dump(*arguments)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-structure_dump" name="method-i-structure_dump" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-structure_dump_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 225</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">structure_dump</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">delete_at</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&quot;adapter&quot;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">structure_dump</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">structure_dump_flags</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-structure_load">
            
              structure_load(*arguments)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-structure_load" name="method-i-structure_load" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-structure_load_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 231</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">structure_load</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">configuration</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">delete_at</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">class_for_adapter</span>(<span class="ruby-identifier">configuration</span>[<span class="ruby-string">&quot;adapter&quot;</span>]).<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">structure_load</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">structure_load_flags</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-target_version">
            
              target_version()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-target_version" name="method-i-target_version" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-target_version_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/tasks/database_tasks.rb, line 186</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">target_version</span>
  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>].<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
</div>
