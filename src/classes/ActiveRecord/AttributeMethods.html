---
title: ActiveRecord::AttributeMethods
layout: default
---
<div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 6.1.3.2</span><br />
        
        <div class="type">Module</div>
        <h1>
            ActiveRecord::AttributeMethods
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/activerecord/lib/active_record/attribute_methods_rb.html">activerecord/lib/active_record/attribute_methods.rb</a></li>
            
            <li><a href="../../files/activerecord/lib/active_record/attribute_methods/before_type_cast_rb.html">activerecord/lib/active_record/attribute_methods/before_type_cast.rb</a></li>
            
            <li><a href="../../files/activerecord/lib/active_record/attribute_methods/dirty_rb.html">activerecord/lib/active_record/attribute_methods/dirty.rb</a></li>
            
            <li><a href="../../files/activerecord/lib/active_record/attribute_methods/primary_key_rb.html">activerecord/lib/active_record/attribute_methods/primary_key.rb</a></li>
            
            <li><a href="../../files/activerecord/lib/active_record/attribute_methods/query_rb.html">activerecord/lib/active_record/attribute_methods/query.rb</a></li>
            
            <li><a href="../../files/activerecord/lib/active_record/attribute_methods/read_rb.html">activerecord/lib/active_record/attribute_methods/read.rb</a></li>
            
            <li><a href="../../files/activerecord/lib/active_record/attribute_methods/serialization_rb.html">activerecord/lib/active_record/attribute_methods/serialization.rb</a></li>
            
            <li><a href="../../files/activerecord/lib/active_record/attribute_methods/time_zone_conversion_rb.html">activerecord/lib/active_record/attribute_methods/time_zone_conversion.rb</a></li>
            
            <li><a href="../../files/activerecord/lib/active_record/attribute_methods/write_rb.html">activerecord/lib/active_record/attribute_methods/write.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h1 id="module-ActiveRecord::AttributeMethods-label-Active+Record+Attribute+Methods">Active Record Attribute Methods</h1>

    </div>
  

  

  
  


  
    <h2 id="namespace">Namespace</h2>

    
      <h3 id="module">Module</h3>
      <ul>
      
        <li><a href="AttributeMethods/BeforeTypeCast.html">ActiveRecord::AttributeMethods::BeforeTypeCast</a></li>
      
        <li><a href="AttributeMethods/ClassMethods.html">ActiveRecord::AttributeMethods::ClassMethods</a></li>
      
        <li><a href="AttributeMethods/Dirty.html">ActiveRecord::AttributeMethods::Dirty</a></li>
      
        <li><a href="AttributeMethods/PrimaryKey.html">ActiveRecord::AttributeMethods::PrimaryKey</a></li>
      
        <li><a href="AttributeMethods/Query.html">ActiveRecord::AttributeMethods::Query</a></li>
      
        <li><a href="AttributeMethods/Read.html">ActiveRecord::AttributeMethods::Read</a></li>
      
        <li><a href="AttributeMethods/Serialization.html">ActiveRecord::AttributeMethods::Serialization</a></li>
      
        <li><a href="AttributeMethods/TimeZoneConversion.html">ActiveRecord::AttributeMethods::TimeZoneConversion</a></li>
      
        <li><a href="AttributeMethods/Write.html">ActiveRecord::AttributeMethods::Write</a></li>
      
      </ul>
    

    
  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-5B-5D">[]</a>
        </li>
      
        <li>
          <a href="#method-i-5B-5D-3D">[]=</a>
        </li>
      
        <li>
          <a href="#method-i-accessed_fields">accessed_fields</a>
        </li>
      
        <li>
          <a href="#method-i-attribute_for_inspect">attribute_for_inspect</a>
        </li>
      
        <li>
          <a href="#method-i-attribute_names">attribute_names</a>
        </li>
      
        <li>
          <a href="#method-i-attribute_present-3F">attribute_present?</a>
        </li>
      
        <li>
          <a href="#method-i-attributes">attributes</a>
        </li>
      
        <li>
          <a href="#method-i-has_attribute-3F">has_attribute?</a>
        </li>
      
        <li>
          <a href="#method-i-respond_to-3F">respond_to?</a>
        </li>
      
    </ul>
  

  
    <!-- Includes -->
    <h2 id="included-modules">Included Modules</h2>
    <ul>
      
        <li>
          
            <a href="../ActiveModel/AttributeMethods.html">
              ActiveModel::AttributeMethods
            </a>
          
        </li>
      
        <li>
          
            <a href="AttributeMethods/Read.html">
              ActiveRecord::AttributeMethods::Read
            </a>
          
        </li>
      
        <li>
          
            <a href="AttributeMethods/Write.html">
              ActiveRecord::AttributeMethods::Write
            </a>
          
        </li>
      
        <li>
          
            <a href="AttributeMethods/BeforeTypeCast.html">
              ActiveRecord::AttributeMethods::BeforeTypeCast
            </a>
          
        </li>
      
        <li>
          
            <a href="AttributeMethods/Query.html">
              ActiveRecord::AttributeMethods::Query
            </a>
          
        </li>
      
        <li>
          
            <a href="AttributeMethods/PrimaryKey.html">
              ActiveRecord::AttributeMethods::PrimaryKey
            </a>
          
        </li>
      
        <li>
          
            <a href="AttributeMethods/TimeZoneConversion.html">
              ActiveRecord::AttributeMethods::TimeZoneConversion
            </a>
          
        </li>
      
        <li>
          
            <a href="AttributeMethods/Dirty.html">
              ActiveRecord::AttributeMethods::Dirty
            </a>
          
        </li>
      
        <li>
          
            <a href="AttributeMethods/Serialization.html">
              ActiveRecord::AttributeMethods::Serialization
            </a>
          
        </li>
      
    </ul>
  

  
    

    

    
      <!-- Section constants -->
      <h2 id="constants">Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">RESTRICTED_CLASS_METHODS</td>
            <td>=</td>
            <td class="attr-value">%w(private public protected allocate new name parent superclass)</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    

    

    <!-- Methods -->
    
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-5B-5D">
            
              [](attr_name)
            
          </h3>

          
            <div class="description">
              <p>Returns the value of the attribute identified by <code>attr_name</code> after it has been typecast (for example, “2004-12-12” in a date column is cast to a date object, like Date.new(2004, 12, 12)). It raises <code>ActiveModel::MissingAttributeError</code> if the identified attribute is missing.</p>

<p>Note: <code>:id</code> is always present.</p>

<pre><code>class Person &lt; ActiveRecord::Base
  belongs_to :organization
end

person = Person.new(name: &#39;Francesco&#39;, age: &#39;22&#39;)
person[:name] # =&gt; &quot;Francesco&quot;
person[:age]  # =&gt; 22

person = Person.select(&#39;id&#39;).first
person[:name]            # =&gt; ActiveModel::MissingAttributeError: missing attribute: name
person[:organization_id] # =&gt; ActiveModel::MissingAttributeError: missing attribute: organization_id
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-5B-5D_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 330</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">[]</span>(<span class="ruby-identifier">attr_name</span>)
  <span class="ruby-identifier">read_attribute</span>(<span class="ruby-identifier">attr_name</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-identifier">missing_attribute</span>(<span class="ruby-identifier">n</span>, <span class="ruby-identifier">caller</span>) }
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-5B-5D-3D">
            
              []=(attr_name, value)
            
          </h3>

          
            <div class="description">
              <p>Updates the attribute identified by <code>attr_name</code> with the specified <code>value</code>. (Alias for the protected <a href="AttributeMethods/Write.html#method-i-write_attribute"><code>write_attribute</code></a> method).</p>

<pre><code>class Person &lt; ActiveRecord::Base
end

person = Person.new
person[:age] = &#39;22&#39;
person[:age] # =&gt; 22
person[:age].class # =&gt; Integer
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-5B-5D-3D_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 344</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">[]=</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">write_attribute</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-accessed_fields">
            
              accessed_fields()
            
          </h3>

          
            <div class="description">
              <p>Returns the name of all database fields which have been read from this model. This can be useful in development mode to determine which fields need to be selected. For performance critical pages, selecting only the required fields can be an easy performance win (assuming you aren&#39;t using all of the fields on the model).</p>

<p>For example:</p>

<pre><code>class PostsController &lt; ActionController::Base
  after_action :print_accessed_fields, only: :index

  def index
    @posts = Post.all
  end

  private

  def print_accessed_fields
    p @posts.first.accessed_fields
  end
end
</code></pre>

<p>Which allows you to quickly change your code to:</p>

<pre><code>class PostsController &lt; ActionController::Base
  def index
    @posts = Post.select(:id, :title, :author_id, :updated_at)
  end
end
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-accessed_fields_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 377</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">accessed_fields</span>
  <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">accessed</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-attribute_for_inspect">
            
              attribute_for_inspect(attr_name)
            
          </h3>

          
            <div class="description">
              <p>Returns an <code>#inspect</code>-like string for the value of the attribute <code>attr_name</code>. <a href="../String.html"><code>String</code></a> attributes are truncated up to 50 characters, <a href="../Date.html"><code>Date</code></a> and <a href="../Time.html"><code>Time</code></a> attributes are returned in the <code>:db</code> format. Other attributes return the value of <code>#inspect</code> without modification.</p>

<pre><code>person = Person.create!(name: &#39;David Heinemeier Hansson &#39; * 3)

person.attribute_for_inspect(:name)
# =&gt; &quot;\&quot;David Heinemeier Hansson David Heinemeier Hansson ...\&quot;&quot;

person.attribute_for_inspect(:created_at)
# =&gt; &quot;\&quot;2012-10-22 00:15:07\&quot;&quot;

person.attribute_for_inspect(:tag_ids)
# =&gt; &quot;[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-attribute_for_inspect_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 284</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">attribute_for_inspect</span>(<span class="ruby-identifier">attr_name</span>)
  <span class="ruby-identifier">attr_name</span> = <span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">attr_name</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">attribute_aliases</span>[<span class="ruby-identifier">attr_name</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">attr_name</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">_read_attribute</span>(<span class="ruby-identifier">attr_name</span>)
  <span class="ruby-identifier">format_for_inspect</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-attribute_names">
            
              attribute_names()
            
          </h3>

          
            <div class="description">
              <p>Returns an array of names for the attributes available on this object.</p>

<pre><code>class Person &lt; ActiveRecord::Base
end

person = Person.new
person.attribute_names
# =&gt; [&quot;id&quot;, &quot;created_at&quot;, &quot;updated_at&quot;, &quot;name&quot;, &quot;age&quot;]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-attribute_names_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 252</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">attribute_names</span>
  <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">keys</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-attribute_present-3F">
            
              attribute_present?(attr_name)
            
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the specified <code>attribute</code> has been set by the user or by a database load and is neither <code>nil</code> nor <code>empty?</code> (the latter only applies to objects that respond to <code>empty?</code>, most notably Strings). Otherwise, <code>false</code>. Note that it always returns <code>true</code> with boolean attributes.</p>

<pre><code>class Task &lt; ActiveRecord::Base
end

task = Task.new(title: &#39;&#39;, is_done: false)
task.attribute_present?(:title)   # =&gt; false
task.attribute_present?(:is_done) # =&gt; true
task.title = &#39;Buy milk&#39;
task.is_done = true
task.attribute_present?(:title)   # =&gt; true
task.attribute_present?(:is_done) # =&gt; true
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-attribute_present-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 306</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">attribute_present?</span>(<span class="ruby-identifier">attr_name</span>)
  <span class="ruby-identifier">attr_name</span> = <span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">attr_name</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">attribute_aliases</span>[<span class="ruby-identifier">attr_name</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">attr_name</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">_read_attribute</span>(<span class="ruby-identifier">attr_name</span>)
  <span class="ruby-operator">!</span><span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">value</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:empty?</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">empty?</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-attributes">
            
              attributes()
            
          </h3>

          
            <div class="description">
              <p>Returns a hash of all the attributes with their names as keys and the values of the attributes as values.</p>

<pre><code>class Person &lt; ActiveRecord::Base
end

person = Person.create(name: &#39;Francesco&#39;, age: 22)
person.attributes
# =&gt; {&quot;id&quot;=&gt;3, &quot;created_at&quot;=&gt;Sun, 21 Oct 2012 04:53:04, &quot;updated_at&quot;=&gt;Sun, 21 Oct 2012 04:53:04, &quot;name&quot;=&gt;&quot;Francesco&quot;, &quot;age&quot;=&gt;22}
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-attributes_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 264</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">attributes</span>
  <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">to_hash</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-has_attribute-3F">
            
              has_attribute?(attr_name)
            
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the given attribute is in the attributes hash, otherwise <code>false</code>.</p>

<pre><code>class Person &lt; ActiveRecord::Base
  alias_attribute :new_name, :name
end

person = Person.new
person.has_attribute?(:name)     # =&gt; true
person.has_attribute?(:new_name) # =&gt; true
person.has_attribute?(&#39;age&#39;)     # =&gt; true
person.has_attribute?(:nothing)  # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-has_attribute-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 234</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">has_attribute?</span>(<span class="ruby-identifier">attr_name</span>)
  <span class="ruby-identifier">attr_name</span> = <span class="ruby-identifier">attr_name</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">attr_name</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">attribute_aliases</span>[<span class="ruby-identifier">attr_name</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">attr_name</span>
  <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">attr_name</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-respond_to-3F">
            
              respond_to?(name, include_private = false)
            
          </h3>

          
            <div class="description">
              <p>A Person object with a name attribute can ask <code>person.respond_to?(:name)</code>, <code>person.respond_to?(:name=)</code>, and <code>person.respond_to?(:name?)</code> which will all return <code>true</code>. It also defines the attribute methods if they have not been generated.</p>

<pre><code>class Person &lt; ActiveRecord::Base
end

person = Person.new
person.respond_to?(:name)    # =&gt; true
person.respond_to?(:name=)   # =&gt; true
person.respond_to?(:name?)   # =&gt; true
person.respond_to?(&#39;age&#39;)    # =&gt; true
person.respond_to?(&#39;age=&#39;)   # =&gt; true
person.respond_to?(&#39;age?&#39;)   # =&gt; true
person.respond_to?(:nothing) # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-respond_to-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/attribute_methods.rb, line 207</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">respond_to?</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">include_private</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">super</span>

  <span class="ruby-comment"># If the result is true then check for the select case.</span>
  <span class="ruby-comment"># For queries selecting a subset of columns, return false for unselected columns.</span>
  <span class="ruby-comment"># We check defined?(@attributes) not to issue warnings if called on objects that</span>
  <span class="ruby-comment"># have been allocated but not yet initialized.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@attributes</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">symbol_column_to_string</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">_has_attribute?</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
</div>
