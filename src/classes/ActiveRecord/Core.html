---
title: ActiveRecord::Core
layout: default
---
<div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 7.1.0</span><br />
        
        <div class="type">Module</div>
        <h1>
            ActiveRecord::Core
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/activerecord/lib/active_record/core_rb.html">activerecord/lib/active_record/core.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h1 id="module-ActiveRecord::Core-label-Active+Record+Core">Active Record Core</h1>

    </div>
  

  

  
  


  
    <h2 id="namespace">Namespace</h2>

    
      <h3 id="module">Module</h3>
      <ul>
      
        <li><a href="Core/ClassMethods.html">ActiveRecord::Core::ClassMethods</a></li>
      
      </ul>
    

    
      <h3 id="class">Class</h3>
      <ul>
      
        <li><a href="Core/InspectionMask.html">ActiveRecord::Core::InspectionMask</a></li>
      
      </ul>
    
  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-3C-3D-3E">&lt;=&gt;</a>
        </li>
      
        <li>
          <a href="#method-i-3D-3D">==</a>
        </li>
      
        <li>
          <a href="#method-i-clone">clone</a>
        </li>
      
        <li>
          <a href="#method-c-configurations">configurations</a>
        </li>
      
        <li>
          <a href="#method-c-configurations-3D">configurations=</a>
        </li>
      
        <li>
          <a href="#method-i-connection_handler">connection_handler</a>
        </li>
      
        <li>
          <a href="#method-c-connection_handler">connection_handler</a>
        </li>
      
        <li>
          <a href="#method-c-connection_handler-3D">connection_handler=</a>
        </li>
      
        <li>
          <a href="#method-c-current_preventing_writes">current_preventing_writes</a>
        </li>
      
        <li>
          <a href="#method-c-current_role">current_role</a>
        </li>
      
        <li>
          <a href="#method-c-current_shard">current_shard</a>
        </li>
      
        <li>
          <a href="#method-c-destroy_association_async_batch_size">destroy_association_async_batch_size</a>
        </li>
      
        <li>
          <a href="#method-c-destroy_association_async_job">destroy_association_async_job</a>
        </li>
      
        <li>
          <a href="#method-i-dup">dup</a>
        </li>
      
        <li>
          <a href="#method-i-encode_with">encode_with</a>
        </li>
      
        <li>
          <a href="#method-c-enumerate_columns_in_select_statements">enumerate_columns_in_select_statements</a>
        </li>
      
        <li>
          <a href="#method-i-eql-3F">eql?</a>
        </li>
      
        <li>
          <a href="#method-i-freeze">freeze</a>
        </li>
      
        <li>
          <a href="#method-i-frozen-3F">frozen?</a>
        </li>
      
        <li>
          <a href="#method-i-hash">hash</a>
        </li>
      
        <li>
          <a href="#method-i-init_with">init_with</a>
        </li>
      
        <li>
          <a href="#method-i-inspect">inspect</a>
        </li>
      
        <li>
          <a href="#method-c-logger">logger</a>
        </li>
      
        <li>
          <a href="#method-c-new">new</a>
        </li>
      
        <li>
          <a href="#method-i-pretty_print">pretty_print</a>
        </li>
      
        <li>
          <a href="#method-i-readonly-21">readonly!</a>
        </li>
      
        <li>
          <a href="#method-i-readonly-3F">readonly?</a>
        </li>
      
        <li>
          <a href="#method-i-strict_loading-21">strict_loading!</a>
        </li>
      
        <li>
          <a href="#method-i-strict_loading-3F">strict_loading?</a>
        </li>
      
        <li>
          <a href="#method-i-strict_loading_n_plus_one_only-3F">strict_loading_n_plus_one_only?</a>
        </li>
      
        <li>
          <a href="#method-i-values_at">values_at</a>
        </li>
      
    </ul>
  

  

  
    

    

    

    
      <!-- Section attributes -->
      <h2 id="attributes">Attributes</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>strict_loading_mode</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    

    <!-- Methods -->
    
      <h2 id="class-public-methods">Class Public methods</h2>
      
        <div class="method">
          <h3 id="method-c-configurations">
            
              configurations()
            
          </h3>

          
            <div class="description">
              <p>Returns fully resolved <a href="DatabaseConfigurations.html"><code>ActiveRecord::DatabaseConfigurations</code></a> object</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-configurations_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 76</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">configurations</span>
  <span class="ruby-identifier">@@configurations</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-c-configurations-3D">
            
              configurations=(config)
            
          </h3>

          
            <div class="description">
              <p>Contains the database configuration - as is typically stored in config/database.yml - as an <a href="DatabaseConfigurations.html"><code>ActiveRecord::DatabaseConfigurations</code></a> object.</p>

<p>For example, the following database.yml…</p>

<pre><code>development:
  adapter: sqlite3
  database: storage/development.sqlite3

production:
  adapter: sqlite3
  database: storage/production.sqlite3
</code></pre>

<p>…would result in <a href="Core.html#method-c-configurations"><code>ActiveRecord::Base.configurations</code></a> to look like this:</p>

<pre><code>#&lt;ActiveRecord::DatabaseConfigurations:0x00007fd1acbdf800 @configurations=[
  #&lt;ActiveRecord::DatabaseConfigurations::HashConfig:0x00007fd1acbded10 @env_name=&quot;development&quot;,
    @name=&quot;primary&quot;, @config={adapter: &quot;sqlite3&quot;, database: &quot;storage/development.sqlite3&quot;}&gt;,
  #&lt;ActiveRecord::DatabaseConfigurations::HashConfig:0x00007fd1acbdea90 @env_name=&quot;production&quot;,
    @name=&quot;primary&quot;, @config={adapter: &quot;sqlite3&quot;, database: &quot;storage/production.sqlite3&quot;}&gt;
]&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-configurations-3D_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 70</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">configurations=</span>(<span class="ruby-identifier">config</span>)
  <span class="ruby-identifier">@@configurations</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">DatabaseConfigurations</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">config</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-c-connection_handler">
            
              connection_handler()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-connection_handler_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 116</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">connection_handler</span>
  <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">IsolatedExecutionState</span>[<span class="ruby-value">:active_record_connection_handler</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">default_connection_handler</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-c-connection_handler-3D">
            
              connection_handler=(handler)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-connection_handler-3D_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 120</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">connection_handler=</span>(<span class="ruby-identifier">handler</span>)
  <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">IsolatedExecutionState</span>[<span class="ruby-value">:active_record_connection_handler</span>] = <span class="ruby-identifier">handler</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-c-current_preventing_writes">
            
              current_preventing_writes()
            
          </h3>

          
            <div class="description">
              <p>Returns the symbol representing the current setting for preventing writes.</p>

<pre><code>ActiveRecord::Base.connected_to(role: :reading) do
  ActiveRecord::Base.current_preventing_writes #=&gt; true
end

ActiveRecord::Base.connected_to(role: :writing) do
  ActiveRecord::Base.current_preventing_writes #=&gt; false
end
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-current_preventing_writes_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">current_preventing_writes</span>
  <span class="ruby-identifier">connected_to_stack</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:prevent_writes</span>] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hash</span>[<span class="ruby-value">:prevent_writes</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:klasses</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-constant">Base</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:prevent_writes</span>] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">hash</span>[<span class="ruby-value">:prevent_writes</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:klasses</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">connection_class_for_self</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-c-current_role">
            
              current_role()
            
          </h3>

          
            <div class="description">
              <p>Returns the symbol representing the current connected role.</p>

<pre><code>ActiveRecord::Base.connected_to(role: :writing) do
  ActiveRecord::Base.current_role #=&gt; :writing
end

ActiveRecord::Base.connected_to(role: :reading) do
  ActiveRecord::Base.current_role #=&gt; :reading
end
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-current_role_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 142</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">current_role</span>
  <span class="ruby-identifier">connected_to_stack</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:role</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:role</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:klasses</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-constant">Base</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:role</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:role</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:klasses</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">connection_class_for_self</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">default_role</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-c-current_shard">
            
              current_shard()
            
          </h3>

          
            <div class="description">
              <p>Returns the symbol representing the current connected shard.</p>

<pre><code>ActiveRecord::Base.connected_to(role: :reading) do
  ActiveRecord::Base.current_shard #=&gt; :default
end

ActiveRecord::Base.connected_to(role: :writing, shard: :one) do
  ActiveRecord::Base.current_shard #=&gt; :one
end
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-current_shard_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 160</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">current_shard</span>
  <span class="ruby-identifier">connected_to_stack</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:shard</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:shard</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:klasses</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-constant">Base</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:shard</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:shard</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hash</span>[<span class="ruby-value">:klasses</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">connection_class_for_self</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">default_shard</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-c-destroy_association_async_batch_size">
            
              destroy_association_async_batch_size
            
          </h3>

          
            <div class="description">
              <p>Specifies the maximum number of records that will be destroyed in a single background job by the <code>dependent: :destroy_async</code> association option. When <code>nil</code> (default), all dependent records will be destroyed in a single background job. If specified, the records to be destroyed will be split into multiple background jobs.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-destroy_association_async_batch_size_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 46</span>
<span class="ruby-identifier">class_attribute</span> <span class="ruby-value">:destroy_association_async_batch_size</span>, <span class="ruby-value">instance_writer:</span> <span class="ruby-keyword">false</span>, <span class="ruby-value">instance_predicate:</span> <span class="ruby-keyword">false</span>, <span class="ruby-value">default:</span> <span class="ruby-keyword">nil</span>
</code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-c-destroy_association_async_job">
            
              destroy_association_async_job()
            
          </h3>

          
            <div class="description">
              <p>The job class used to destroy associations in the background.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-destroy_association_async_job_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 26</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">destroy_association_async_job</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">_destroy_association_async_job</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">_destroy_association_async_job</span> = <span class="ruby-identifier">_destroy_association_async_job</span>.<span class="ruby-identifier">constantize</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">_destroy_association_async_job</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">NameError</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NameError</span>, <span class="ruby-node">&quot;Unable to load destroy_association_async_job: #{error.message}&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-c-enumerate_columns_in_select_statements">
            
              enumerate_columns_in_select_statements
            
          </h3>

          
            <div class="description">
              <p>Force enumeration of all columns in SELECT statements. e.g. <code>SELECT first_name, last_name FROM ...</code> instead of <code>SELECT * FROM ...</code> This avoids <code>PreparedStatementCacheExpired</code> errors when a column is added to the database while the app is running.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-enumerate_columns_in_select_statements_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 86</span>
<span class="ruby-identifier">class_attribute</span> <span class="ruby-value">:enumerate_columns_in_select_statements</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-keyword">false</span>, <span class="ruby-value">default:</span> <span class="ruby-keyword">false</span>
</code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-c-logger">
            
              logger
            
          </h3>

          
            <div class="description">
              <p>Accepts a logger conforming to the interface of Log4r which is then passed on to any new database connections made and which can be retrieved on both a class and instance level by calling <code>logger</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-logger_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 21</span>
<span class="ruby-identifier">class_attribute</span> <span class="ruby-value">:logger</span>, <span class="ruby-value">instance_writer:</span> <span class="ruby-keyword">false</span>
</code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-c-new">
            
              new(attributes = nil)
            
          </h3>

          
            <div class="description">
              <p>New objects can be instantiated as either empty (pass no construction parameter) or pre-set with attributes but not yet saved (pass a hash with key names matching the associated table column names). In both instances, valid attribute keys are determined by the column names of the associated table – hence you can’t have attributes that aren’t part of the table columns.</p>

<h4 id="method-c-new-label-Example">Example</h4>

<pre><code># Instantiates a single new object
User.new(first_name: &#39;Jamie&#39;)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-c-new_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 424</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">attributes</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-ivar">@new_record</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@attributes</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">_default_attributes</span>.<span class="ruby-identifier">deep_dup</span>

  <span class="ruby-identifier">init_internals</span>
  <span class="ruby-identifier">initialize_internals_callback</span>

  <span class="ruby-identifier">assign_attributes</span>(<span class="ruby-identifier">attributes</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">attributes</span>

  <span class="ruby-keyword">yield</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-identifier">_run_initialize_callbacks</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
      
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-3C-3D-3E">
            
              &lt;=&gt;(other_object)
            
          </h3>

          
            <div class="description">
              <p>Allows sort on objects</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-3C-3D-3E_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 582</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">&lt;=&gt;</span>(<span class="ruby-identifier">other_object</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">other_object</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>)
    <span class="ruby-identifier">to_key</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">other_object</span>.<span class="ruby-identifier">to_key</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-3D-3D">
            
              ==(comparison_object)
            
          </h3>

          
            <div class="description">
              <p>Returns true if <code>comparison_object</code> is the same exact object, or <code>comparison_object</code> is of the same type and <code>self</code> has an ID and it is equal to <code>comparison_object.id</code>.</p>

<p>Note that new records are different from any other record by definition, unless the other record is the receiver itself. Besides, if you fetch existing records with <code>select</code> and leave the ID out, you’re on your own, this predicate will return false.</p>

<p>Note also that destroying a record preserves its ID in the model instance, so deleted models are still comparable.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="Core.html#method-i-eql-3F">eql?</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-3D-3D_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 548</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">==</span>(<span class="ruby-identifier">comparison_object</span>)
  <span class="ruby-keyword">super</span> <span class="ruby-operator">||</span>
    <span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>) <span class="ruby-operator">&amp;&amp;</span>
    <span class="ruby-identifier">primary_key_values_present?</span> <span class="ruby-operator">&amp;&amp;</span>
    <span class="ruby-identifier">comparison_object</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">id</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-clone">
            
              clone
            
          </h3>

          
            <div class="description">
              <p>Identical to Ruby’s clone method.  This is a “shallow” copy.  Be warned that your attributes are not copied. That means that modifying attributes of the clone will modify the original, since they will both point to the same attributes hash. If you need a copy of your attributes hash, please use the <a href="Core.html#method-i-dup"><code>dup</code></a> method.</p>

<pre><code>user = User.first
new_user = user.clone
user.name               # =&gt; &quot;Bob&quot;
new_user.name = &quot;Joe&quot;
user.name               # =&gt; &quot;Joe&quot;

user.object_id == new_user.object_id            # =&gt; false
user.name.object_id == new_user.name.object_id  # =&gt; true

user.name.object_id == user.dup.name.object_id  # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-clone_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 476</span>
    </code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-connection_handler">
            
              connection_handler()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-connection_handler_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 658</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">connection_handler</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">connection_handler</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-dup">
            
              dup
            
          </h3>

          
            <div class="description">
              <p>Duped objects have no id assigned and are treated as new records. Note that this is a “shallow” copy as it copies the object’s attributes only, not its associations. The extent of a “deep” copy is application specific and is therefore left to the application to implement according to its need. The dup method does not preserve the timestamps (created|updated)_(at|on) and locking column.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-dup_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 493</span>
    </code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-encode_with">
            
              encode_with(coder)
            
          </h3>

          
            <div class="description">
              <p>Populate <code>coder</code> with attributes about this record that should be serialized. The structure of <code>coder</code> defined in this method is guaranteed to match the structure of <code>coder</code> passed to the <a href="Core.html#method-i-init_with"><code>init_with</code></a> method.</p>

<p>Example:</p>

<pre><code>class Post &lt; ActiveRecord::Base
end
coder = {}
Post.new.encode_with(coder)
coder # =&gt; {&quot;attributes&quot; =&gt; {&quot;id&quot; =&gt; nil, ... }}
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-encode_with_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 533</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">encode_with</span>(<span class="ruby-identifier">coder</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">yaml_encoder</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-ivar">@attributes</span>, <span class="ruby-identifier">coder</span>)
  <span class="ruby-identifier">coder</span>[<span class="ruby-string">&quot;new_record&quot;</span>] = <span class="ruby-identifier">new_record?</span>
  <span class="ruby-identifier">coder</span>[<span class="ruby-string">&quot;active_record_yaml_version&quot;</span>] = <span class="ruby-value">2</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-eql-3F">
            
              eql?(comparison_object)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="Core.html#method-i-3D-3D">==</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 id="method-i-freeze">
            
              freeze()
            
          </h3>

          
            <div class="description">
              <p>Clone and freeze the attributes hash such that associations are still accessible, even on destroyed records, but cloned models will not be frozen.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-freeze_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 571</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">freeze</span>
  <span class="ruby-ivar">@attributes</span> = <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">clone</span>.<span class="ruby-identifier">freeze</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-frozen-3F">
            
              frozen?()
            
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the attributes hash has been frozen.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-frozen-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 577</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">frozen?</span>
  <span class="ruby-ivar">@attributes</span>.<span class="ruby-identifier">frozen?</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-hash">
            
              hash()
            
          </h3>

          
            <div class="description">
              <p>Delegates to id in order to allow two records of the same type and id to work with something like:</p>

<pre><code>[ Person.find(1), Person.find(2), Person.find(3) ] &amp; [ Person.find(1), Person.find(4) ] # =&gt; [ Person.find(1) ]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-hash_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 558</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">hash</span>
  <span class="ruby-identifier">id</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">id</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">primary_key_values_present?</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">hash</span> <span class="ruby-operator">^</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">hash</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-init_with">
            
              init_with(coder, &amp;block)
            
          </h3>

          
            <div class="description">
              <p>Initialize an empty model object from <code>coder</code>. <code>coder</code> should be the result of previously encoding an Active Record model, using <a href="Core.html#method-i-encode_with"><code>encode_with</code></a>.</p>

<pre><code>class Post &lt; ActiveRecord::Base
end

old_post = Post.new(title: &quot;hello world&quot;)
coder = {}
old_post.encode_with(coder)

post = Post.allocate
post.init_with(coder)
post.title # =&gt; &#39;hello world&#39;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-init_with_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 451</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">init_with</span>(<span class="ruby-identifier">coder</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">coder</span> = <span class="ruby-constant">LegacyYamlAdapter</span>.<span class="ruby-identifier">convert</span>(<span class="ruby-identifier">coder</span>)
  <span class="ruby-identifier">attributes</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">yaml_encoder</span>.<span class="ruby-identifier">decode</span>(<span class="ruby-identifier">coder</span>)
  <span class="ruby-identifier">init_with_attributes</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">coder</span>[<span class="ruby-string">&quot;new_record&quot;</span>], <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-inspect">
            
              inspect()
            
          </h3>

          
            <div class="description">
              <p>Returns the contents of the record as a nicely formatted string.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-inspect_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 663</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">inspect</span>
  <span class="ruby-comment"># We check defined?(@attributes) not to issue warnings if the object is</span>
  <span class="ruby-comment"># allocated but not initialized.</span>
  <span class="ruby-identifier">inspection</span> = <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@attributes</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@attributes</span>
    <span class="ruby-identifier">attribute_names</span>.<span class="ruby-identifier">filter_map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">_has_attribute?</span>(<span class="ruby-identifier">name</span>)
        <span class="ruby-node">&quot;#{name}: #{attribute_for_inspect(name)}&quot;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;, &quot;</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-string">&quot;not initialized&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-node">&quot;#&lt;#{self.class} #{inspection}&gt;&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-pretty_print">
            
              pretty_print(pp)
            
          </h3>

          
            <div class="description">
              <p>Takes a PP and prettily prints this record to it, allowing you to get a nice result from <code>pp record</code> when pp is required.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-pretty_print_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 681</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">pretty_print</span>(<span class="ruby-identifier">pp</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">super</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">custom_inspect_method_defined?</span>
  <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">object_address_group</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@attributes</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@attributes</span>
      <span class="ruby-identifier">attr_names</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">attribute_names</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-identifier">_has_attribute?</span>(<span class="ruby-identifier">name</span>) }
      <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">seplist</span>(<span class="ruby-identifier">attr_names</span>, <span class="ruby-identifier">proc</span> { <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">text</span> <span class="ruby-string">&quot;,&quot;</span> }) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr_name</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">breakable</span> <span class="ruby-string">&quot; &quot;</span>
        <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">group</span>(<span class="ruby-value">1</span>) <span class="ruby-keyword">do</span>
          <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">text</span> <span class="ruby-identifier">attr_name</span>
          <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">text</span> <span class="ruby-string">&quot;:&quot;</span>
          <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">breakable</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">_read_attribute</span>(<span class="ruby-identifier">attr_name</span>)
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">inspection_filter</span>.<span class="ruby-identifier">filter_param</span>(<span class="ruby-identifier">attr_name</span>, <span class="ruby-identifier">value</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span>
          <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">pp</span> <span class="ruby-identifier">value</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">breakable</span> <span class="ruby-string">&quot; &quot;</span>
      <span class="ruby-identifier">pp</span>.<span class="ruby-identifier">text</span> <span class="ruby-string">&quot;not initialized&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-readonly-21">
            
              readonly!()
            
          </h3>

          
            <div class="description">
              <p>Marks this record as read only.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-readonly-21_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 654</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">readonly!</span>
  <span class="ruby-ivar">@readonly</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-readonly-3F">
            
              readonly?()
            
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the record is read only.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-readonly-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 599</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">readonly?</span>
  <span class="ruby-ivar">@readonly</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-strict_loading-21">
            
              strict_loading!(value = true, mode: :all)
            
          </h3>

          
            <div class="description">
              <p>Sets the record to strict_loading mode. This will raise an error if the record tries to lazily load an association.</p>

<pre><code>user = User.first
user.strict_loading! # =&gt; true
user.address.city
=&gt; ActiveRecord::StrictLoadingViolationError
user.comments.to_a
=&gt; ActiveRecord::StrictLoadingViolationError
</code></pre>

<h4 id="method-i-strict_loading-21-label-Parameters">Parameters</h4>
<ul><li>
<p><code>value</code> - Boolean specifying whether to enable or disable strict loading.</p>
</li><li>
<p><code>:mode</code> - <a href="../Symbol.html"><code>Symbol</code></a> specifying strict loading mode. Defaults to :all. Using :n_plus_one_only mode will only raise an error if an association that will lead to an n plus one query is lazily loaded.</p>
</li></ul>

<h4 id="method-i-strict_loading-21-label-Examples">Examples</h4>

<pre><code>user = User.first
user.strict_loading!(false) # =&gt; false
user.address.city # =&gt; &quot;Tatooine&quot;
user.comments.to_a # =&gt; [#&lt;Comment:0x00...]

user.strict_loading!(mode: :n_plus_one_only)
user.address.city # =&gt; &quot;Tatooine&quot;
user.comments.to_a # =&gt; [#&lt;Comment:0x00...]
user.comments.first.ratings.to_a
=&gt; ActiveRecord::StrictLoadingViolationError
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-strict_loading-21_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 637</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">strict_loading!</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword">true</span>, <span class="ruby-value">mode:</span> <span class="ruby-value">:all</span>)
  <span class="ruby-keyword">unless</span> [<span class="ruby-value">:all</span>, <span class="ruby-value">:n_plus_one_only</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">mode</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;The :mode option must be one of [:all, :n_plus_one_only] but #{mode.inspect} was provided.&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@strict_loading_mode</span> = <span class="ruby-identifier">mode</span>
  <span class="ruby-ivar">@strict_loading</span> = <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-strict_loading-3F">
            
              strict_loading?()
            
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the record is in strict_loading mode.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-strict_loading-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 604</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">strict_loading?</span>
  <span class="ruby-ivar">@strict_loading</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-strict_loading_n_plus_one_only-3F">
            
              strict_loading_n_plus_one_only?()
            
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the record uses strict_loading with <code>:n_plus_one_only</code> mode enabled.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-strict_loading_n_plus_one_only-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 649</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">strict_loading_n_plus_one_only?</span>
  <span class="ruby-ivar">@strict_loading_mode</span> <span class="ruby-operator">==</span> <span class="ruby-value">:n_plus_one_only</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-values_at">
            
              values_at(*methods)

            
          </h3>

          
            <div class="description">
              <p>Returns an array of the values returned by the given methods.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-values_at_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/core.rb, line 705</span>
    </code></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
</div>
