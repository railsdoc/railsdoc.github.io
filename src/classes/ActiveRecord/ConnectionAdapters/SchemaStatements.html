---
title: ActiveRecord::ConnectionAdapters::SchemaStatements
layout: default
---
<div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 5.2.4</span><br />
        
        <div class="type">Module</div>
        <h1>
            ActiveRecord::ConnectionAdapters::SchemaStatements
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/activerecord/lib/active_record/connection_adapters/abstract/schema_statements_rb.html">activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  

  

  
  


  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-add_belongs_to">add_belongs_to</a>
        </li>
      
        <li>
          <a href="#method-i-add_column">add_column</a>
        </li>
      
        <li>
          <a href="#method-i-add_foreign_key">add_foreign_key</a>
        </li>
      
        <li>
          <a href="#method-i-add_index">add_index</a>
        </li>
      
        <li>
          <a href="#method-i-add_reference">add_reference</a>
        </li>
      
        <li>
          <a href="#method-i-add_timestamps">add_timestamps</a>
        </li>
      
        <li>
          <a href="#method-i-assume_migrated_upto_version">assume_migrated_upto_version</a>
        </li>
      
        <li>
          <a href="#method-i-change_column">change_column</a>
        </li>
      
        <li>
          <a href="#method-i-change_column_comment">change_column_comment</a>
        </li>
      
        <li>
          <a href="#method-i-change_column_default">change_column_default</a>
        </li>
      
        <li>
          <a href="#method-i-change_column_null">change_column_null</a>
        </li>
      
        <li>
          <a href="#method-i-change_table">change_table</a>
        </li>
      
        <li>
          <a href="#method-i-change_table_comment">change_table_comment</a>
        </li>
      
        <li>
          <a href="#method-i-column_exists-3F">column_exists?</a>
        </li>
      
        <li>
          <a href="#method-i-columns">columns</a>
        </li>
      
        <li>
          <a href="#method-i-create_join_table">create_join_table</a>
        </li>
      
        <li>
          <a href="#method-i-create_table">create_table</a>
        </li>
      
        <li>
          <a href="#method-i-data_source_exists-3F">data_source_exists?</a>
        </li>
      
        <li>
          <a href="#method-i-data_sources">data_sources</a>
        </li>
      
        <li>
          <a href="#method-i-drop_join_table">drop_join_table</a>
        </li>
      
        <li>
          <a href="#method-i-drop_table">drop_table</a>
        </li>
      
        <li>
          <a href="#method-i-foreign_key_exists-3F">foreign_key_exists?</a>
        </li>
      
        <li>
          <a href="#method-i-foreign_keys">foreign_keys</a>
        </li>
      
        <li>
          <a href="#method-i-index_exists-3F">index_exists?</a>
        </li>
      
        <li>
          <a href="#method-i-index_name_exists-3F">index_name_exists?</a>
        </li>
      
        <li>
          <a href="#method-i-indexes">indexes</a>
        </li>
      
        <li>
          <a href="#method-i-native_database_types">native_database_types</a>
        </li>
      
        <li>
          <a href="#method-i-options_include_default-3F">options_include_default?</a>
        </li>
      
        <li>
          <a href="#method-i-primary_key">primary_key</a>
        </li>
      
        <li>
          <a href="#method-i-remove_belongs_to">remove_belongs_to</a>
        </li>
      
        <li>
          <a href="#method-i-remove_column">remove_column</a>
        </li>
      
        <li>
          <a href="#method-i-remove_columns">remove_columns</a>
        </li>
      
        <li>
          <a href="#method-i-remove_foreign_key">remove_foreign_key</a>
        </li>
      
        <li>
          <a href="#method-i-remove_index">remove_index</a>
        </li>
      
        <li>
          <a href="#method-i-remove_reference">remove_reference</a>
        </li>
      
        <li>
          <a href="#method-i-remove_timestamps">remove_timestamps</a>
        </li>
      
        <li>
          <a href="#method-i-rename_column">rename_column</a>
        </li>
      
        <li>
          <a href="#method-i-rename_index">rename_index</a>
        </li>
      
        <li>
          <a href="#method-i-rename_table">rename_table</a>
        </li>
      
        <li>
          <a href="#method-i-table_alias_for">table_alias_for</a>
        </li>
      
        <li>
          <a href="#method-i-table_comment">table_comment</a>
        </li>
      
        <li>
          <a href="#method-i-table_exists-3F">table_exists?</a>
        </li>
      
        <li>
          <a href="#method-i-table_options">table_options</a>
        </li>
      
        <li>
          <a href="#method-i-tables">tables</a>
        </li>
      
        <li>
          <a href="#method-i-view_exists-3F">view_exists?</a>
        </li>
      
        <li>
          <a href="#method-i-views">views</a>
        </li>
      
    </ul>
  

  

  
    

    

    

    

    <!-- Methods -->
    
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-add_belongs_to">
            
              add_belongs_to(table_name, ref_name, **options)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="SchemaStatements.html#method-i-add_reference">add_reference</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 id="method-i-add_column">
            
              add_column(table_name, column_name, type, options = {})
            
          </h3>

          
            <div class="description">
              <p>Add a new <code>type</code> column named <code>column_name</code> to <code>table_name</code>.</p>

<p>The <code>type</code> parameter is normally one of the migrations native types, which is one of the following: <code>:primary_key</code>, <code>:string</code>, <code>:text</code>, <code>:integer</code>, <code>:bigint</code>, <code>:float</code>, <code>:decimal</code>, <code>:numeric</code>, <code>:datetime</code>, <code>:time</code>, <code>:date</code>, <code>:binary</code>, <code>:boolean</code>.</p>

<p>You may use a type not in this list as long as it is supported by your database (for example, “polygon” in <a href="MySQL.html"><code>MySQL</code></a>), but this will not be database agnostic and should usually be avoided.</p>

<p>Available options are (none of these exists by default):</p>
<ul><li>
<p><code>:limit</code> - Requests a maximum column length. This is the number of characters for a <code>:string</code> column and number of bytes for <code>:text</code>, <code>:binary</code> and <code>:integer</code> columns. This option is ignored by some backends.</p>
</li><li>
<p><code>:default</code> - The column&#39;s default value. Use <code>nil</code> for <code>NULL</code>.</p>
</li><li>
<p><code>:null</code> - Allows or disallows <code>NULL</code> values in the column.</p>
</li><li>
<p><code>:precision</code> - Specifies the precision for the <code>:decimal</code> and <code>:numeric</code> columns.</p>
</li><li>
<p><code>:scale</code> - Specifies the scale for the <code>:decimal</code> and <code>:numeric</code> columns.</p>
</li><li>
<p><code>:comment</code> - Specifies the comment for the column. This option is ignored by some backends.</p>
</li></ul>

<p>Note: The precision is the total number of significant digits, and the scale is the number of digits that can be stored following the decimal point. For example, the number 123.45 has a precision of 5 and a scale of 2. A decimal with a precision of 5 and a scale of 2 can range from -999.99 to 999.99.</p>

<p>Please be aware of different RDBMS implementations behavior with <code>:decimal</code> columns:</p>
<ul><li>
<p>The SQL standard says the default scale should be 0, <code>:scale</code> &lt;= <code>:precision</code>, and makes no comments about the requirements of <code>:precision</code>.</p>
</li><li>
<p>MySQL: <code>:precision</code> [1..63], <code>:scale</code> [0..30]. Default is (10,0).</p>
</li><li>
<p>PostgreSQL: <code>:precision</code> [1..infinity], <code>:scale</code> [0..infinity]. No default.</p>
</li><li>
<p>SQLite3: No restrictions on <code>:precision</code> and <code>:scale</code>, but the maximum supported <code>:precision</code> is 16. No default.</p>
</li><li>
<p>Oracle: <code>:precision</code> [1..38], <code>:scale</code> [-84..127]. Default is (38,0).</p>
</li><li>
<p>DB2: <code>:precision</code> [1..63], <code>:scale</code> [0..62]. Default unknown.</p>
</li><li>
<p>SqlServer: <code>:precision</code> [1..38], <code>:scale</code> [0..38]. Default (38,0).</p>
</li></ul>

<h2 id="method-i-add_column-label-Examples">Examples</h2>

<pre><code>add_column(:users, :picture, :binary, limit: 2.megabytes)
# ALTER TABLE &quot;users&quot; ADD &quot;picture&quot; blob(2097152)

add_column(:articles, :status, :string, limit: 20, default: &#39;draft&#39;, null: false)
# ALTER TABLE &quot;articles&quot; ADD &quot;status&quot; varchar(20) DEFAULT &#39;draft&#39; NOT NULL

add_column(:answers, :bill_gates_money, :decimal, precision: 15, scale: 2)
# ALTER TABLE &quot;answers&quot; ADD &quot;bill_gates_money&quot; decimal(15,2)

add_column(:measurements, :sensor_reading, :decimal, precision: 30, scale: 20)
# ALTER TABLE &quot;measurements&quot; ADD &quot;sensor_reading&quot; decimal(30,20)

# While :scale defaults to zero on most databases, it
# probably wouldn&#39;t hurt to include it.
add_column(:measurements, :huge_integer, :decimal, precision: 30)
# ALTER TABLE &quot;measurements&quot; ADD &quot;huge_integer&quot; decimal(30)

# Defines a column that stores an array of a type.
add_column(:users, :skills, :text, array: true)
# ALTER TABLE &quot;users&quot; ADD &quot;skills&quot; text[]

# Defines a column with a database-specific type.
add_column(:shapes, :triangle, &#39;polygon&#39;)
# ALTER TABLE &quot;shapes&quot; ADD &quot;triangle&quot; polygon
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-add_column_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 578</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">add_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">at</span> = <span class="ruby-identifier">create_alter_table</span> <span class="ruby-identifier">table_name</span>
  <span class="ruby-identifier">at</span>.<span class="ruby-identifier">add_column</span>(<span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">execute</span> <span class="ruby-identifier">schema_creation</span>.<span class="ruby-identifier">accept</span> <span class="ruby-identifier">at</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-add_foreign_key">
            
              add_foreign_key(from_table, to_table, options = {})
            
          </h3>

          
            <div class="description">
              <p>Adds a new foreign key. <code>from_table</code> is the table with the key column, <code>to_table</code> contains the referenced primary key.</p>

<p>The foreign key will be named after the following pattern: <code>fk_rails_&lt;identifier&gt;</code>. <code>identifier</code> is a 10 character long string which is deterministically generated from the <code>from_table</code> and <code>column</code>. A custom name can be specified with the <code>:name</code> option.</p>

<h6 id="method-i-add_foreign_key-label-Creating+a+simple+foreign+key">Creating a simple foreign key</h6>

<pre><code>add_foreign_key :articles, :authors
</code></pre>

<p>generates:</p>

<pre><code>ALTER TABLE &quot;articles&quot; ADD CONSTRAINT fk_rails_e74ce85cbc FOREIGN KEY (&quot;author_id&quot;) REFERENCES &quot;authors&quot; (&quot;id&quot;)
</code></pre>

<h6 id="method-i-add_foreign_key-label-Creating+a+foreign+key+on+a+specific+column">Creating a foreign key on a specific column</h6>

<pre><code>add_foreign_key :articles, :users, column: :author_id, primary_key: &quot;lng_id&quot;
</code></pre>

<p>generates:</p>

<pre><code>ALTER TABLE &quot;articles&quot; ADD CONSTRAINT fk_rails_58ca3d3a82 FOREIGN KEY (&quot;author_id&quot;) REFERENCES &quot;users&quot; (&quot;lng_id&quot;)
</code></pre>

<h6 id="method-i-add_foreign_key-label-Creating+a+cascading+foreign+key">Creating a cascading foreign key</h6>

<pre><code>add_foreign_key :articles, :authors, on_delete: :cascade
</code></pre>

<p>generates:</p>

<pre><code>ALTER TABLE &quot;articles&quot; ADD CONSTRAINT fk_rails_e74ce85cbc FOREIGN KEY (&quot;author_id&quot;) REFERENCES &quot;authors&quot; (&quot;id&quot;) ON DELETE CASCADE
</code></pre>

<p>The <code>options</code> hash can include the following keys:</p>
<dl class="rdoc-list label-list"><dt><code>:column</code>
<dd>
<p>The foreign key column name on <code>from_table</code>. Defaults to <code>to_table.singularize + &quot;_id&quot;</code></p>
</dd><dt><code>:primary_key</code>
<dd>
<p>The primary key column name on <code>to_table</code>. Defaults to <code>id</code>.</p>
</dd><dt><code>:name</code>
<dd>
<p>The constraint name. Defaults to <code>fk_rails_&lt;identifier&gt;</code>.</p>
</dd><dt><code>:on_delete</code>
<dd>
<p>Action that happens <code>ON DELETE</code>. Valid values are <code>:nullify</code>, <code>:cascade</code> and <code>:restrict</code></p>
</dd><dt><code>:on_update</code>
<dd>
<p>Action that happens <code>ON UPDATE</code>. Valid values are <code>:nullify</code>, <code>:cascade</code> and <code>:restrict</code></p>
</dd><dt><code>:validate</code>
<dd>
<p>(Postgres only) Specify whether or not the constraint should be validated. Defaults to <code>true</code>.</p>
</dd></dl>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-add_foreign_key_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 960</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">add_foreign_key</span>(<span class="ruby-identifier">from_table</span>, <span class="ruby-identifier">to_table</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">supports_foreign_keys?</span>

  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">foreign_key_options</span>(<span class="ruby-identifier">from_table</span>, <span class="ruby-identifier">to_table</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">at</span> = <span class="ruby-identifier">create_alter_table</span> <span class="ruby-identifier">from_table</span>
  <span class="ruby-identifier">at</span>.<span class="ruby-identifier">add_foreign_key</span> <span class="ruby-identifier">to_table</span>, <span class="ruby-identifier">options</span>

  <span class="ruby-identifier">execute</span> <span class="ruby-identifier">schema_creation</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-identifier">at</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-add_index">
            
              add_index(table_name, column_name, options = {})
            
          </h3>

          
            <div class="description">
              <p>Adds a new index to the table. <code>column_name</code> can be a single <a href="../../Symbol.html"><code>Symbol</code></a>, or an <a href="../../Array.html"><code>Array</code></a> of Symbols.</p>

<p>The index will be named after the table and the column name(s), unless you pass <code>:name</code> as an option.</p>

<h6 id="method-i-add_index-label-Creating+a+simple+index">Creating a simple index</h6>

<pre><code>add_index(:suppliers, :name)
</code></pre>

<p>generates:</p>

<pre><code>CREATE INDEX suppliers_name_index ON suppliers(name)
</code></pre>

<h6 id="method-i-add_index-label-Creating+a+unique+index">Creating a unique index</h6>

<pre><code>add_index(:accounts, [:branch_id, :party_id], unique: true)
</code></pre>

<p>generates:</p>

<pre><code>CREATE UNIQUE INDEX accounts_branch_id_party_id_index ON accounts(branch_id, party_id)
</code></pre>

<h6 id="method-i-add_index-label-Creating+a+named+index">Creating a named index</h6>

<pre><code>add_index(:accounts, [:branch_id, :party_id], unique: true, name: &#39;by_branch_party&#39;)
</code></pre>

<p>generates:</p>

<pre><code>CREATE UNIQUE INDEX by_branch_party ON accounts(branch_id, party_id)
</code></pre>

<h6 id="method-i-add_index-label-Creating+an+index+with+specific+key+length">Creating an index with specific key length</h6>

<pre><code>add_index(:accounts, :name, name: &#39;by_name&#39;, length: 10)
</code></pre>

<p>generates:</p>

<pre><code>CREATE INDEX by_name ON accounts(name(10))
</code></pre>

<h6 id="method-i-add_index-label-Creating+an+index+with+specific+key+lengths+for+multiple+keys">Creating an index with specific key lengths for multiple keys</h6>

<pre><code>add_index(:accounts, [:name, :surname], name: &#39;by_name_surname&#39;, length: {name: 10, surname: 15})
</code></pre>

<p>generates:</p>

<pre><code>CREATE INDEX by_name_surname ON accounts(name(10), surname(15))
</code></pre>

<p>Note: SQLite doesn&#39;t support index length.</p>

<h6 id="method-i-add_index-label-Creating+an+index+with+a+sort+order+-28desc+or+asc-2C+asc+is+the+default-29">Creating an index with a sort order (desc or asc, asc is the default)</h6>

<pre><code>add_index(:accounts, [:branch_id, :party_id, :surname], order: {branch_id: :desc, party_id: :asc})
</code></pre>

<p>generates:</p>

<pre><code>CREATE INDEX by_branch_desc_party ON accounts(branch_id DESC, party_id ASC, surname)
</code></pre>

<p>Note: <a href="MySQL.html"><code>MySQL</code></a> only supports index order from 8.0.1 onwards (earlier versions accepted the syntax but ignored it).</p>

<h6 id="method-i-add_index-label-Creating+a+partial+index">Creating a partial index</h6>

<pre><code>add_index(:accounts, [:branch_id, :party_id], unique: true, where: &quot;active&quot;)
</code></pre>

<p>generates:</p>

<pre><code>CREATE UNIQUE INDEX index_accounts_on_branch_id_and_party_id ON accounts(branch_id, party_id) WHERE active
</code></pre>

<p>Note: Partial indexes are only supported for <a href="PostgreSQL.html"><code>PostgreSQL</code></a> and SQLite 3.8.0+.</p>

<h6 id="method-i-add_index-label-Creating+an+index+with+a+specific+method">Creating an index with a specific method</h6>

<pre><code>add_index(:developers, :name, using: &#39;btree&#39;)
</code></pre>

<p>generates:</p>

<pre><code>CREATE INDEX index_developers_on_name ON developers USING btree (name) -- PostgreSQL
CREATE INDEX index_developers_on_name USING btree ON developers (name) -- MySQL
</code></pre>

<p>Note: only supported by <a href="PostgreSQL.html"><code>PostgreSQL</code></a> and <a href="MySQL.html"><code>MySQL</code></a></p>

<h6 id="method-i-add_index-label-Creating+an+index+with+a+specific+operator+class">Creating an index with a specific operator class</h6>

<pre><code>add_index(:developers, :name, using: &#39;gist&#39;, opclass: :gist_trgm_ops)
# CREATE INDEX developers_on_name ON developers USING gist (name gist_trgm_ops) -- PostgreSQL

add_index(:developers, [:name, :city], using: &#39;gist&#39;, opclass: { city: :gist_trgm_ops })
# CREATE INDEX developers_on_name_and_city ON developers USING gist (name, city gist_trgm_ops) -- PostgreSQL

add_index(:developers, [:name, :city], using: &#39;gist&#39;, opclass: :gist_trgm_ops)
# CREATE INDEX developers_on_name_and_city ON developers USING gist (name gist_trgm_ops, city gist_trgm_ops) -- PostgreSQL
</code></pre>

<p>Note: only supported by <a href="PostgreSQL.html"><code>PostgreSQL</code></a></p>

<h6 id="method-i-add_index-label-Creating+an+index+with+a+specific+type">Creating an index with a specific type</h6>

<pre><code>add_index(:developers, :name, type: :fulltext)
</code></pre>

<p>generates:</p>

<pre><code>CREATE FULLTEXT INDEX index_developers_on_name ON developers (name) -- MySQL
</code></pre>

<p>Note: only supported by <a href="MySQL.html"><code>MySQL</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-add_index_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 763</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">add_index</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">index_name</span>, <span class="ruby-identifier">index_type</span>, <span class="ruby-identifier">index_columns</span>, <span class="ruby-identifier">index_options</span> = <span class="ruby-identifier">add_index_options</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE #{index_type} INDEX #{quote_column_name(index_name)} ON #{quote_table_name(table_name)} (#{index_columns})#{index_options}&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-add_reference">
            
              add_reference(table_name, ref_name, **options)
            
          </h3>

          
            <div class="description">
              <p>Adds a reference. The reference column is a bigint by default, the <code>:type</code> option can be used to specify a different type. Optionally adds a <code>_type</code> column, if <code>:polymorphic</code> option is provided. <a href="SchemaStatements.html#method-i-add_reference"><code>add_reference</code></a> and <a href="SchemaStatements.html#method-i-add_belongs_to"><code>add_belongs_to</code></a> are acceptable.</p>

<p>The <code>options</code> hash can include the following keys:</p>
<dl class="rdoc-list label-list"><dt><code>:type</code>
<dd>
<p>The reference column type. Defaults to <code>:bigint</code>.</p>
</dd><dt><code>:index</code>
<dd>
<p>Add an appropriate index. Defaults to true. See <a href="SchemaStatements.html#method-i-add_index"><code>add_index</code></a> for usage of this option.</p>
</dd><dt><code>:foreign_key</code>
<dd>
<p>Add an appropriate foreign key constraint. Defaults to false.</p>
</dd><dt><code>:polymorphic</code>
<dd>
<p>Whether an additional <code>_type</code> column should be added. Defaults to false.</p>
</dd><dt><code>:null</code>
<dd>
<p>Whether the column allows nulls. Defaults to true.</p>
</dd></dl>

<h6 id="method-i-add_reference-label-Create+a+user_id+bigint+column">Create a user_id bigint column</h6>

<pre><code>add_reference(:products, :user)
</code></pre>

<h6 id="method-i-add_reference-label-Create+a+user_id+string+column">Create a user_id string column</h6>

<pre><code>add_reference(:products, :user, type: :string)
</code></pre>

<h6 id="method-i-add_reference-label-Create+supplier_id-2C+supplier_type+columns+and+appropriate+index">Create supplier_id, supplier_type columns and appropriate index</h6>

<pre><code>add_reference(:products, :supplier, polymorphic: true, index: true)
</code></pre>

<h6 id="method-i-add_reference-label-Create+a+supplier_id+column+with+a+unique+index">Create a supplier_id column with a unique index</h6>

<pre><code>add_reference(:products, :supplier, index: { unique: true })
</code></pre>

<h6 id="method-i-add_reference-label-Create+a+supplier_id+column+with+a+named+index">Create a supplier_id column with a named index</h6>

<pre><code>add_reference(:products, :supplier, index: { name: &quot;my_supplier_index&quot; })
</code></pre>

<h6 id="method-i-add_reference-label-Create+a+supplier_id+column+and+appropriate+foreign+key">Create a supplier_id column and appropriate foreign key</h6>

<pre><code>add_reference(:products, :supplier, foreign_key: true)
</code></pre>

<h6 id="method-i-add_reference-label-Create+a+supplier_id+column+and+a+foreign+key+to+the+firms+table">Create a supplier_id column and a foreign key to the firms table</h6>

<pre><code>add_reference(:products, :supplier, foreign_key: {to_table: :firms})
</code></pre>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="SchemaStatements.html#method-i-add_belongs_to">add_belongs_to</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-add_reference_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 873</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">add_reference</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">ref_name</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
  <span class="ruby-constant">ReferenceDefinition</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">ref_name</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">add_to</span>(<span class="ruby-identifier">update_table_definition</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-keyword">self</span>))
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-add_timestamps">
            
              add_timestamps(table_name, options = {})
            
          </h3>

          
            <div class="description">
              <p>Adds timestamps (<code>created_at</code> and <code>updated_at</code>) columns to <code>table_name</code>. Additional options (like <code>:null</code>) are forwarded to <a href="SchemaStatements.html#method-i-add_column"><code>add_column</code></a>.</p>

<pre><code>add_timestamps(:suppliers, null: true)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-add_timestamps_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 1115</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">add_timestamps</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:null</span>] = <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:null</span>].<span class="ruby-identifier">nil?</span>

  <span class="ruby-identifier">add_column</span> <span class="ruby-identifier">table_name</span>, <span class="ruby-value">:created_at</span>, <span class="ruby-value">:datetime</span>, <span class="ruby-identifier">options</span>
  <span class="ruby-identifier">add_column</span> <span class="ruby-identifier">table_name</span>, <span class="ruby-value">:updated_at</span>, <span class="ruby-value">:datetime</span>, <span class="ruby-identifier">options</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-assume_migrated_upto_version">
            
              assume_migrated_upto_version(version, migrations_paths)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-assume_migrated_upto_version_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 1037</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">assume_migrated_upto_version</span>(<span class="ruby-identifier">version</span>, <span class="ruby-identifier">migrations_paths</span>)
  <span class="ruby-identifier">migrations_paths</span> = <span class="ruby-constant">Array</span>(<span class="ruby-identifier">migrations_paths</span>)
  <span class="ruby-identifier">version</span> = <span class="ruby-identifier">version</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-identifier">sm_table</span> = <span class="ruby-identifier">quote_table_name</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">SchemaMigration</span>.<span class="ruby-identifier">table_name</span>)

  <span class="ruby-identifier">migrated</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">SchemaMigration</span>.<span class="ruby-identifier">all_versions</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:to_i</span>)
  <span class="ruby-identifier">versions</span> = <span class="ruby-identifier">migration_context</span>.<span class="ruby-identifier">migration_files</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">migration_context</span>.<span class="ruby-identifier">parse_migration_filename</span>(<span class="ruby-identifier">file</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">migrated</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">version</span>)
    <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;INSERT INTO #{sm_table} (version) VALUES (#{quote(version)})&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">inserting</span> = (<span class="ruby-identifier">versions</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">migrated</span>).<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">version</span> }
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">inserting</span>.<span class="ruby-identifier">any?</span>
    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">duplicate</span> = <span class="ruby-identifier">inserting</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">inserting</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">v</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> })
      <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Duplicate migration #{duplicate}. Please renumber your migrations to resolve the conflict.&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">supports_multi_insert?</span>
      <span class="ruby-identifier">execute</span> <span class="ruby-identifier">insert_versions_sql</span>(<span class="ruby-identifier">inserting</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">inserting</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">execute</span> <span class="ruby-identifier">insert_versions_sql</span>(<span class="ruby-identifier">v</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-change_column">
            
              change_column(table_name, column_name, type, options = {})
            
          </h3>

          
            <div class="description">
              <p>Changes the column&#39;s definition according to the new options. See <a href="TableDefinition.html#method-i-column"><code>TableDefinition#column</code></a> for details of the options you can use.</p>

<pre><code>change_column(:suppliers, :name, :string, limit: 80)
change_column(:accounts, :description, :text)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-change_column_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 612</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">change_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&quot;change_column is not implemented&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-change_column_comment">
            
              change_column_comment(table_name, column_name, comment)
            
          </h3>

          
            <div class="description">
              <p>Changes the comment for a column or removes it if <code>nil</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-change_column_comment_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 1177</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">change_column_comment</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">comment</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-node">&quot;#{self.class} does not support changing column comments&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-change_column_default">
            
              change_column_default(table_name, column_name, default_or_changes)
            
          </h3>

          
            <div class="description">
              <p>Sets a new default value for a column:</p>

<pre><code>change_column_default(:suppliers, :qualification, &#39;new&#39;)
change_column_default(:accounts, :authorized, 1)
</code></pre>

<p>Setting the default to <code>nil</code> effectively drops the default:</p>

<pre><code>change_column_default(:users, :email, nil)
</code></pre>

<p>Passing a hash containing <code>:from</code> and <code>:to</code> will make this change reversible in migration:</p>

<pre><code>change_column_default(:posts, :state, from: nil, to: &quot;draft&quot;)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-change_column_default_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 630</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">change_column_default</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">default_or_changes</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&quot;change_column_default is not implemented&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-change_column_null">
            
              change_column_null(table_name, column_name, null, default = nil)
            
          </h3>

          
            <div class="description">
              <p>Sets or removes a <code>NOT NULL</code> constraint on a column. The <code>null</code> flag indicates whether the value can be <code>NULL</code>. For example</p>

<pre><code>change_column_null(:users, :nickname, false)
</code></pre>

<p>says nicknames cannot be <code>NULL</code> (adds the constraint), whereas</p>

<pre><code>change_column_null(:users, :nickname, true)
</code></pre>

<p>allows them to be <code>NULL</code> (drops the constraint).</p>

<p>The method accepts an optional fourth argument to replace existing <code>NULL</code>s with some other value. Use that one when enabling the constraint if needed, since otherwise those rows would not be valid.</p>

<p>Please note the fourth argument does not set a column&#39;s default.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-change_column_null_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 650</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">change_column_null</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">null</span>, <span class="ruby-identifier">default</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&quot;change_column_null is not implemented&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-change_table">
            
              change_table(table_name, options = {})
            
          </h3>

          
            <div class="description">
              <p>A block for changing columns in <code>table</code>.</p>

<pre><code># change_table() yields a Table instance
change_table(:suppliers) do |t|
  t.column :name, :string, limit: 60
  # Other column alterations here
end
</code></pre>

<p>The <code>options</code> hash can include the following keys:</p>
<dl class="rdoc-list label-list"><dt><code>:bulk</code>
<dd>
<p>Set this to true to make this a bulk alter query, such as</p>

<pre><code>ALTER TABLE `users` ADD COLUMN age INT, ADD COLUMN birthdate DATETIME ...
</code></pre>

<p>Defaults to false.</p>

<p>Only supported on the <a href="MySQL.html"><code>MySQL</code></a> and <a href="PostgreSQL.html"><code>PostgreSQL</code></a> adapter, ignored elsewhere.</p>
</dd></dl>

<h6 id="method-i-change_table-label-Add+a+column">Add a column</h6>

<pre><code>change_table(:suppliers) do |t|
  t.column :name, :string, limit: 60
end
</code></pre>

<h6 id="method-i-change_table-label-Add+2+integer+columns">Add 2 integer columns</h6>

<pre><code>change_table(:suppliers) do |t|
  t.integer :width, :height, null: false, default: 0
end
</code></pre>

<h6 id="method-i-change_table-label-Add+created_at-2Fupdated_at+columns">Add created_at/updated_at columns</h6>

<pre><code>change_table(:suppliers) do |t|
  t.timestamps
end
</code></pre>

<h6 id="method-i-change_table-label-Add+a+foreign+key+column">Add a foreign key column</h6>

<pre><code>change_table(:suppliers) do |t|
  t.references :company
end
</code></pre>

<p>Creates a <code>company_id(bigint)</code> column.</p>

<h6 id="method-i-change_table-label-Add+a+polymorphic+foreign+key+column">Add a polymorphic foreign key column</h6>

<pre><code>change_table(:suppliers) do |t|
  t.belongs_to :company, polymorphic: true
end
</code></pre>

<p>Creates <code>company_type(varchar)</code> and <code>company_id(bigint)</code> columns.</p>

<h6 id="method-i-change_table-label-Remove+a+column">Remove a column</h6>

<pre><code>change_table(:suppliers) do |t|
  t.remove :company
end
</code></pre>

<h6 id="method-i-change_table-label-Remove+several+columns">Remove several columns</h6>

<pre><code>change_table(:suppliers) do |t|
  t.remove :company_id
  t.remove :width, :height
end
</code></pre>

<h6 id="method-i-change_table-label-Remove+an+index">Remove an index</h6>

<pre><code>change_table(:suppliers) do |t|
  t.remove_index :company_id
end
</code></pre>

<p>See also <a href="Table.html"><code>Table</code></a> for details on all of the various column transformations.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-change_table_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 465</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">change_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">supports_bulk_alter?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:bulk</span>]
    <span class="ruby-identifier">recorder</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Migration</span><span class="ruby-operator">::</span><span class="ruby-constant">CommandRecorder</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>)
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">update_table_definition</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">recorder</span>)
    <span class="ruby-identifier">bulk_change_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">recorder</span>.<span class="ruby-identifier">commands</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">update_table_definition</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-keyword">self</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-change_table_comment">
            
              change_table_comment(table_name, comment)
            
          </h3>

          
            <div class="description">
              <p>Changes the comment for a table or removes it if <code>nil</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-change_table_comment_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 1172</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">change_table_comment</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">comment</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-node">&quot;#{self.class} does not support changing table comments&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-column_exists-3F">
            
              column_exists?(table_name, column_name, type = nil, options = {})
            
          </h3>

          
            <div class="description">
              <p>Checks to see if a column exists in a given table.</p>

<pre><code># Check a column exists
column_exists?(:suppliers, :name)

# Check a column exists of a particular type
column_exists?(:suppliers, :name, :string)

# Check a column exists with a specific definition
column_exists?(:suppliers, :name, :string, limit: 100)
column_exists?(:suppliers, :name, :string, default: &#39;default&#39;)
column_exists?(:suppliers, :name, :string, null: false)
column_exists?(:suppliers, :tax, :decimal, precision: 8, scale: 2)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-column_exists-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 132</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">column_exists?</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">type</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">column_name</span> = <span class="ruby-identifier">column_name</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">checks</span> = []
  <span class="ruby-identifier">checks</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">column_name</span> }
  <span class="ruby-identifier">checks</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">type</span> } <span class="ruby-keyword">if</span> <span class="ruby-identifier">type</span>
  <span class="ruby-identifier">column_options_keys</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attr</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">checks</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">attr</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">attr</span>] } <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">attr</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">columns</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">checks</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">check</span><span class="ruby-operator">|</span> <span class="ruby-identifier">check</span>[<span class="ruby-identifier">c</span>] } }
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-columns">
            
              columns(table_name)
            
          </h3>

          
            <div class="description">
              <p>Returns an array of <code>Column</code> objects for the table specified by <code>table_name</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-columns_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 111</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">columns</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">table_name</span> = <span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">column_definitions</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">new_column_from_field</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">field</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-create_join_table">
            
              create_join_table(table_1, table_2, column_options: {}, **options)
            
          </h3>

          
            <div class="description">
              <p>Creates a new join table with the name created using the lexical order of the first two arguments. These arguments can be a <a href="../../String.html"><code>String</code></a> or a <a href="../../Symbol.html"><code>Symbol</code></a>.</p>

<pre><code># Creates a table called &#39;assemblies_parts&#39; with no id.
create_join_table(:assemblies, :parts)
</code></pre>

<p>You can pass an <code>options</code> hash which can include the following keys:</p>
<dl class="rdoc-list label-list"><dt><code>:table_name</code>
<dd>
<p>Sets the table name, overriding the default.</p>
</dd><dt><code>:column_options</code>
<dd>
<p>Any extra options you want appended to the columns definition.</p>
</dd><dt><code>:options</code>
<dd>
<p>Any extra options you want appended to the table definition.</p>
</dd><dt><code>:temporary</code>
<dd>
<p>Make a temporary table.</p>
</dd><dt><code>:force</code>
<dd>
<p>Set to true to drop the table before creating it. Defaults to false.</p>
</dd></dl>

<p>Note that <a href="SchemaStatements.html#method-i-create_join_table"><code>create_join_table</code></a> does not create any indices by default; you can use its block form to do so yourself:</p>

<pre><code>create_join_table :products, :categories do |t|
  t.index :product_id
  t.index :category_id
end
</code></pre>

<h6 id="method-i-create_join_table-label-Add+a+backend+specific+option+to+the+generated+SQL+-28MySQL-29">Add a backend specific option to the generated SQL (<a href="MySQL.html"><code>MySQL</code></a>)</h6>

<pre><code>create_join_table(:assemblies, :parts, options: &#39;ENGINE=InnoDB DEFAULT CHARSET=utf8&#39;)
</code></pre>

<p>generates:</p>

<pre><code>CREATE TABLE assemblies_parts (
  assembly_id bigint NOT NULL,
  part_id bigint NOT NULL,
) ENGINE=InnoDB DEFAULT CHARSET=utf8
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-create_join_table_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 368</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">create_join_table</span>(<span class="ruby-identifier">table_1</span>, <span class="ruby-identifier">table_2</span>, <span class="ruby-value">column_options:</span> {}, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">join_table_name</span> = <span class="ruby-identifier">find_join_table_name</span>(<span class="ruby-identifier">table_1</span>, <span class="ruby-identifier">table_2</span>, <span class="ruby-identifier">options</span>)

  <span class="ruby-identifier">column_options</span>.<span class="ruby-identifier">reverse_merge!</span>(<span class="ruby-value">null:</span> <span class="ruby-keyword">false</span>, <span class="ruby-value">index:</span> <span class="ruby-keyword">false</span>)

  <span class="ruby-identifier">t1_ref</span>, <span class="ruby-identifier">t2_ref</span> = [<span class="ruby-identifier">table_1</span>, <span class="ruby-identifier">table_2</span>].<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">singularize</span> }

  <span class="ruby-identifier">create_table</span>(<span class="ruby-identifier">join_table_name</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">id:</span> <span class="ruby-keyword">false</span>)) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">td</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">td</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">t1_ref</span>, <span class="ruby-identifier">column_options</span>
    <span class="ruby-identifier">td</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">t2_ref</span>, <span class="ruby-identifier">column_options</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">td</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-create_table">
            
              create_table(table_name, comment: nil, **options)
            
          </h3>

          
            <div class="description">
              <p>Creates a new table with the name <code>table_name</code>. <code>table_name</code> may either be a <a href="../../String.html"><code>String</code></a> or a <a href="../../Symbol.html"><code>Symbol</code></a>.</p>

<p>There are two ways to work with <a href="SchemaStatements.html#method-i-create_table"><code>create_table</code></a>. You can use the block form or the regular form, like this:</p>

<h3 id="method-i-create_table-label-Block+form">Block form</h3>

<pre><code># create_table() passes a TableDefinition object to the block.
# This form will not only create the table, but also columns for the
# table.

create_table(:suppliers) do |t|
  t.column :name, :string, limit: 60
  # Other fields here
end
</code></pre>

<h3 id="method-i-create_table-label-Block+form-2C+with+shorthand">Block form, with shorthand</h3>

<pre><code># You can also use the column types as method calls, rather than calling the column method.
create_table(:suppliers) do |t|
  t.string :name, limit: 60
  # Other fields here
end
</code></pre>

<h3 id="method-i-create_table-label-Regular+form">Regular form</h3>

<pre><code># Creates a table called &#39;suppliers&#39; with no columns.
create_table(:suppliers)
# Add a column to &#39;suppliers&#39;.
add_column(:suppliers, :name, :string, {limit: 60})
</code></pre>

<p>The <code>options</code> hash can include the following keys:</p>
<dl class="rdoc-list label-list"><dt><code>:id</code>
<dd>
<p>Whether to automatically add a primary key column. Defaults to true. Join tables for <a href="../Associations/ClassMethods.html#method-i-has_and_belongs_to_many">ActiveRecord::Base.has_and_belongs_to_many</a> should set it to false.</p>

<p>A <a href="../../Symbol.html"><code>Symbol</code></a> can be used to specify the type of the generated primary key column.</p>
</dd><dt><code>:primary_key</code>
<dd>
<p>The name of the primary key, if one is to be added automatically. Defaults to <code>id</code>. If <code>:id</code> is false, then this option is ignored.</p>

<p>If an array is passed, a composite primary key will be created.</p>

<p>Note that Active Record models will automatically detect their primary key. This can be avoided by using <a href="../AttributeMethods/PrimaryKey/ClassMethods.html#method-i-primary_key-3D">self.primary_key=</a> on the model to define the key explicitly.</p>
</dd><dt><code>:options</code>
<dd>
<p>Any extra options you want appended to the table definition.</p>
</dd><dt><code>:temporary</code>
<dd>
<p>Make a temporary table.</p>
</dd><dt><code>:force</code>
<dd>
<p>Set to true to drop the table before creating it. Set to <code>:cascade</code> to drop dependent objects as well. Defaults to false.</p>
</dd><dt><code>:as</code>
<dd>
<p>SQL to use to generate the table. When this option is used, the block is ignored, as are the <code>:id</code> and <code>:primary_key</code> options.</p>
</dd></dl>

<h6 id="method-i-create_table-label-Add+a+backend+specific+option+to+the+generated+SQL+-28MySQL-29">Add a backend specific option to the generated SQL (<a href="MySQL.html"><code>MySQL</code></a>)</h6>

<pre><code>create_table(:suppliers, options: &#39;ENGINE=InnoDB DEFAULT CHARSET=utf8&#39;)
</code></pre>

<p>generates:</p>

<pre><code>CREATE TABLE suppliers (
  id bigint auto_increment PRIMARY KEY
) ENGINE=InnoDB DEFAULT CHARSET=utf8
</code></pre>

<h6 id="method-i-create_table-label-Rename+the+primary+key+column">Rename the primary key column</h6>

<pre><code>create_table(:objects, primary_key: &#39;guid&#39;) do |t|
  t.column :name, :string, limit: 80
end
</code></pre>

<p>generates:</p>

<pre><code>CREATE TABLE objects (
  guid bigint auto_increment PRIMARY KEY,
  name varchar(80)
)
</code></pre>

<h6 id="method-i-create_table-label-Change+the+primary+key+column+type">Change the primary key column type</h6>

<pre><code>create_table(:tags, id: :string) do |t|
  t.column :label, :string
end
</code></pre>

<p>generates:</p>

<pre><code>CREATE TABLE tags (
  id varchar PRIMARY KEY,
  label varchar
)
</code></pre>

<h6 id="method-i-create_table-label-Create+a+composite+primary+key">Create a composite primary key</h6>

<pre><code>create_table(:orders, primary_key: [:product_id, :client_id]) do |t|
  t.belongs_to :product
  t.belongs_to :client
end
</code></pre>

<p>generates:</p>

<pre><code>CREATE TABLE order (
    product_id bigint NOT NULL,
    client_id bigint NOT NULL
);

ALTER TABLE ONLY &quot;orders&quot;
  ADD CONSTRAINT orders_pkey PRIMARY KEY (product_id, client_id);
</code></pre>

<h6 id="method-i-create_table-label-Do+not+add+a+primary+key+column">Do not add a primary key column</h6>

<pre><code>create_table(:categories_suppliers, id: false) do |t|
  t.column :category_id, :bigint
  t.column :supplier_id, :bigint
end
</code></pre>

<p>generates:</p>

<pre><code>CREATE TABLE categories_suppliers (
  category_id bigint,
  supplier_id bigint
)
</code></pre>

<h6 id="method-i-create_table-label-Create+a+temporary+table+based+on+a+query">Create a temporary table based on a query</h6>

<pre><code>create_table(:long_query, temporary: true,
  as: &quot;SELECT * FROM orders INNER JOIN line_items ON order_id=orders.id&quot;)
</code></pre>

<p>generates:</p>

<pre><code>CREATE TEMPORARY TABLE long_query AS
  SELECT * FROM orders INNER JOIN line_items ON order_id=orders.id
</code></pre>

<p>See also <a href="TableDefinition.html#method-i-column"><code>TableDefinition#column</code></a> for details on how to create columns.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-create_table_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 290</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">create_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-value">comment:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">td</span> = <span class="ruby-identifier">create_table_definition</span> <span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span>[<span class="ruby-value">:temporary</span>], <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>], <span class="ruby-identifier">options</span>[<span class="ruby-value">:as</span>], <span class="ruby-value">comment:</span> <span class="ruby-identifier">comment</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:id</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword">false</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-value">:as</span>]
    <span class="ruby-identifier">pk</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:primary_key</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-constant">Base</span>.<span class="ruby-identifier">get_primary_key</span> <span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">singularize</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">pk</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
      <span class="ruby-identifier">td</span>.<span class="ruby-identifier">primary_keys</span> <span class="ruby-identifier">pk</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">td</span>.<span class="ruby-identifier">primary_key</span> <span class="ruby-identifier">pk</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:id</span>, <span class="ruby-value">:primary_key</span>), <span class="ruby-identifier">options</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">yield</span> <span class="ruby-identifier">td</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:force</span>]
    <span class="ruby-identifier">drop_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">if_exists:</span> <span class="ruby-keyword">true</span>))
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">result</span> = <span class="ruby-identifier">execute</span> <span class="ruby-identifier">schema_creation</span>.<span class="ruby-identifier">accept</span> <span class="ruby-identifier">td</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">supports_indexes_in_create?</span>
    <span class="ruby-identifier">td</span>.<span class="ruby-identifier">indexes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">index_options</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">add_index</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">index_options</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">supports_comments?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">supports_comments_in_create?</span>
    <span class="ruby-identifier">change_table_comment</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">comment</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">present?</span>

    <span class="ruby-identifier">td</span>.<span class="ruby-identifier">columns</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">change_column_comment</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">column</span>.<span class="ruby-identifier">comment</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">column</span>.<span class="ruby-identifier">comment</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-data_source_exists-3F">
            
              data_source_exists?(name)
            
          </h3>

          
            <div class="description">
              <p>Checks to see if the data source <code>name</code> exists on the database.</p>

<pre><code>data_source_exists?(:ebooks)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-data_source_exists-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 45</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">data_source_exists?</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">query_values</span>(<span class="ruby-identifier">data_source_sql</span>(<span class="ruby-identifier">name</span>), <span class="ruby-string">&quot;SCHEMA&quot;</span>).<span class="ruby-identifier">any?</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">present?</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">NotImplementedError</span>
  <span class="ruby-identifier">data_sources</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-data_sources">
            
              data_sources()
            
          </h3>

          
            <div class="description">
              <p>Returns the relation names useable to back Active Record models. For most adapters this means all <a href="SchemaStatements.html#method-i-tables"><code>tables</code></a> and <a href="SchemaStatements.html#method-i-views"><code>views</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-data_sources_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 35</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">data_sources</span>
  <span class="ruby-identifier">query_values</span>(<span class="ruby-identifier">data_source_sql</span>, <span class="ruby-string">&quot;SCHEMA&quot;</span>)
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">NotImplementedError</span>
  <span class="ruby-identifier">tables</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">views</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-drop_join_table">
            
              drop_join_table(table_1, table_2, options = {})
            
          </h3>

          
            <div class="description">
              <p>Drops the join table specified by the given arguments. See <a href="SchemaStatements.html#method-i-create_join_table"><code>create_join_table</code></a> for details.</p>

<p>Although this command ignores the block if one is given, it can be helpful to provide one in a migration&#39;s <code>change</code> method so it can be reverted. In that case, the block will be used by <a href="SchemaStatements.html#method-i-create_join_table"><code>create_join_table</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-drop_join_table_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 388</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">drop_join_table</span>(<span class="ruby-identifier">table_1</span>, <span class="ruby-identifier">table_2</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">join_table_name</span> = <span class="ruby-identifier">find_join_table_name</span>(<span class="ruby-identifier">table_1</span>, <span class="ruby-identifier">table_2</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">drop_table</span>(<span class="ruby-identifier">join_table_name</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-drop_table">
            
              drop_table(table_name, options = {})
            
          </h3>

          
            <div class="description">
              <p>Drops a table from the database.</p>
<dl class="rdoc-list label-list"><dt><code>:force</code>
<dd>
<p>Set to <code>:cascade</code> to drop dependent objects as well. Defaults to false.</p>
</dd><dt><code>:if_exists</code>
<dd>
<p>Set to <code>true</code> to only drop the table if it exists. Defaults to false.</p>
</dd></dl>

<p>Although this command ignores most <code>options</code> and the block if one is given, it can be helpful to provide these in a migration&#39;s <code>change</code> method so it can be reverted. In that case, <code>options</code> and the block will be used by <a href="SchemaStatements.html#method-i-create_table"><code>create_table</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-drop_table_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 495</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">drop_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;DROP TABLE#{&#39; IF EXISTS&#39; if options[:if_exists]} #{quote_table_name(table_name)}&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-foreign_key_exists-3F">
            
              foreign_key_exists?(from_table, options_or_to_table = {})
            
          </h3>

          
            <div class="description">
              <p>Checks to see if a foreign key exists on a table for a given foreign key definition.</p>

<pre><code># Checks to see if a foreign key exists.
foreign_key_exists?(:accounts, :branches)

# Checks to see if a foreign key on a specified column exists.
foreign_key_exists?(:accounts, column: :owner_id)

# Checks to see if a foreign key with a custom name exists.
foreign_key_exists?(:accounts, name: &quot;special_fk_name&quot;)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-foreign_key_exists-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 1010</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">foreign_key_exists?</span>(<span class="ruby-identifier">from_table</span>, <span class="ruby-identifier">options_or_to_table</span> = {})
  <span class="ruby-identifier">foreign_key_for</span>(<span class="ruby-identifier">from_table</span>, <span class="ruby-identifier">options_or_to_table</span>).<span class="ruby-identifier">present?</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-foreign_keys">
            
              foreign_keys(table_name)
            
          </h3>

          
            <div class="description">
              <p>Returns an array of foreign keys for the given table. The foreign keys are represented as ForeignKeyDefinition objects.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-foreign_keys_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 912</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">foreign_keys</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&quot;foreign_keys is not implemented&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-index_exists-3F">
            
              index_exists?(table_name, column_name, options = {})
            
          </h3>

          
            <div class="description">
              <p>Checks to see if an index exists on a table for a given index definition.</p>

<pre><code># Check an index exists
index_exists?(:suppliers, :company_id)

# Check an index on multiple columns exists
index_exists?(:suppliers, [:company_id, :company_type])

# Check a unique index exists
index_exists?(:suppliers, :company_id, unique: true)

# Check an index with a custom name exists
index_exists?(:suppliers, :company_id, name: &quot;idx_company_id&quot;)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-index_exists-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 100</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">index_exists?</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">column_names</span> = <span class="ruby-constant">Array</span>(<span class="ruby-identifier">column_name</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:to_s</span>)
  <span class="ruby-identifier">checks</span> = []
  <span class="ruby-identifier">checks</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-constant">Array</span>(<span class="ruby-identifier">i</span>.<span class="ruby-identifier">columns</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">column_names</span> }
  <span class="ruby-identifier">checks</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">unique</span> } <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:unique</span>]
  <span class="ruby-identifier">checks</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:name</span>].<span class="ruby-identifier">to_s</span> } <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:name</span>]

  <span class="ruby-identifier">indexes</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">checks</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">check</span><span class="ruby-operator">|</span> <span class="ruby-identifier">check</span>[<span class="ruby-identifier">i</span>] } }
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-index_name_exists-3F">
            
              index_name_exists?(table_name, index_name)
            
          </h3>

          
            <div class="description">
              <p>Verifies the existence of an index with a given name.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-index_name_exists-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 822</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">index_name_exists?</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">index_name</span>)
  <span class="ruby-identifier">index_name</span> = <span class="ruby-identifier">index_name</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">indexes</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">index_name</span> }
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-indexes">
            
              indexes(table_name)
            
          </h3>

          
            <div class="description">
              <p>Returns an array of indexes for the given table.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-indexes_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 82</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">indexes</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&quot;#indexes is not implemented&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-native_database_types">
            
              native_database_types()
            
          </h3>

          
            <div class="description">
              <p>Returns a hash of mappings from the abstract data types to the native database types. See <a href="TableDefinition.html#method-i-column"><code>TableDefinition#column</code></a> for details on the recognized abstract data types.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-native_database_types_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 15</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">native_database_types</span>
  {}
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-options_include_default-3F">
            
              options_include_default?(options)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-options_include_default-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 1167</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">options_include_default?</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">options</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value">:default</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">options</span>[<span class="ruby-value">:null</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:default</span>].<span class="ruby-identifier">nil?</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-primary_key">
            
              primary_key(table_name)
            
          </h3>

          
            <div class="description">
              <p>Returns just a table&#39;s primary key</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-primary_key_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 145</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">primary_key</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">pk</span> = <span class="ruby-identifier">primary_keys</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">pk</span> = <span class="ruby-identifier">pk</span>.<span class="ruby-identifier">first</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">pk</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
  <span class="ruby-identifier">pk</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-remove_belongs_to">
            
              remove_belongs_to(table_name, ref_name, foreign_key: false, polymorphic: false, **options)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="SchemaStatements.html#method-i-remove_reference">remove_reference</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 id="method-i-remove_column">
            
              remove_column(table_name, column_name, type = nil, options = {})
            
          </h3>

          
            <div class="description">
              <p>Removes the column from the table definition.</p>

<pre><code>remove_column(:suppliers, :qualification)
</code></pre>

<p>The <code>type</code> and <code>options</code> parameters will be ignored if present. It can be helpful to provide these in a migration&#39;s <code>change</code> method so it can be reverted. In that case, <code>type</code> and <code>options</code> will be used by <a href="SchemaStatements.html#method-i-add_column"><code>add_column</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-remove_column_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 602</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">type</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} #{remove_column_for_alter(table_name, column_name, type, options)}&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-remove_columns">
            
              remove_columns(table_name, *column_names)
            
          </h3>

          
            <div class="description">
              <p>Removes the given columns from the table definition.</p>

<pre><code>remove_columns(:suppliers, :qualification, :experience)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-remove_columns_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 588</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_columns</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">column_names</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;You must specify at least one column name. Example: remove_columns(:people, :first_name)&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">column_name</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">remove_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-remove_foreign_key">
            
              remove_foreign_key(from_table, options_or_to_table = {})
            
          </h3>

          
            <div class="description">
              <p>Removes the given foreign key from the table. Any option parameters provided will be used to re-add the foreign key in case of a migration rollback. It is recommended that you provide any options used when creating the foreign key so that the migration can be reverted properly.</p>

<p>Removes the foreign key on <code>accounts.branch_id</code>.</p>

<pre><code>remove_foreign_key :accounts, :branches
</code></pre>

<p>Removes the foreign key on <code>accounts.owner_id</code>.</p>

<pre><code>remove_foreign_key :accounts, column: :owner_id
</code></pre>

<p>Removes the foreign key named <code>special_fk_name</code> on the <code>accounts</code> table.</p>

<pre><code>remove_foreign_key :accounts, name: :special_fk_name
</code></pre>

<p>The <code>options</code> hash accepts the same keys as <a href="SchemaStatements.html#method-i-add_foreign_key"><code>SchemaStatements#add_foreign_key</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-remove_foreign_key_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 988</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_foreign_key</span>(<span class="ruby-identifier">from_table</span>, <span class="ruby-identifier">options_or_to_table</span> = {})
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">supports_foreign_keys?</span>

  <span class="ruby-identifier">fk_name_to_delete</span> = <span class="ruby-identifier">foreign_key_for!</span>(<span class="ruby-identifier">from_table</span>, <span class="ruby-identifier">options_or_to_table</span>).<span class="ruby-identifier">name</span>

  <span class="ruby-identifier">at</span> = <span class="ruby-identifier">create_alter_table</span> <span class="ruby-identifier">from_table</span>
  <span class="ruby-identifier">at</span>.<span class="ruby-identifier">drop_foreign_key</span> <span class="ruby-identifier">fk_name_to_delete</span>

  <span class="ruby-identifier">execute</span> <span class="ruby-identifier">schema_creation</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-identifier">at</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-remove_index">
            
              remove_index(table_name, options = {})
            
          </h3>

          
            <div class="description">
              <p>Removes the given index from the table.</p>

<p>Removes the index on <code>branch_id</code> in the <code>accounts</code> table if exactly one such index exists.</p>

<pre><code>remove_index :accounts, :branch_id
</code></pre>

<p>Removes the index on <code>branch_id</code> in the <code>accounts</code> table if exactly one such index exists.</p>

<pre><code>remove_index :accounts, column: :branch_id
</code></pre>

<p>Removes the index on <code>branch_id</code> and <code>party_id</code> in the <code>accounts</code> table if exactly one such index exists.</p>

<pre><code>remove_index :accounts, column: [:branch_id, :party_id]
</code></pre>

<p>Removes the index named <code>by_branch_party</code> in the <code>accounts</code> table.</p>

<pre><code>remove_index :accounts, name: :by_branch_party
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-remove_index_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 786</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_index</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">index_name</span> = <span class="ruby-identifier">index_name_for_remove</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;DROP INDEX #{quote_column_name(index_name)} ON #{quote_table_name(table_name)}&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-remove_reference">
            
              remove_reference(table_name, ref_name, foreign_key: false, polymorphic: false, **options)
            
          </h3>

          
            <div class="description">
              <p>Removes the reference(s). Also removes a <code>type</code> column if one exists. <a href="SchemaStatements.html#method-i-remove_reference"><code>remove_reference</code></a> and <a href="SchemaStatements.html#method-i-remove_belongs_to"><code>remove_belongs_to</code></a> are acceptable.</p>

<h6 id="method-i-remove_reference-label-Remove+the+reference">Remove the reference</h6>

<pre><code>remove_reference(:products, :user, index: true)
</code></pre>

<h6 id="method-i-remove_reference-label-Remove+polymorphic+reference">Remove polymorphic reference</h6>

<pre><code>remove_reference(:products, :supplier, polymorphic: true)
</code></pre>

<h6 id="method-i-remove_reference-label-Remove+the+reference+with+a+foreign+key">Remove the reference with a foreign key</h6>

<pre><code>remove_reference(:products, :user, index: true, foreign_key: true)
</code></pre>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="SchemaStatements.html#method-i-remove_belongs_to">remove_belongs_to</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-remove_reference_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 893</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_reference</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">ref_name</span>, <span class="ruby-value">foreign_key:</span> <span class="ruby-keyword">false</span>, <span class="ruby-value">polymorphic:</span> <span class="ruby-keyword">false</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">foreign_key</span>
    <span class="ruby-identifier">reference_name</span> = <span class="ruby-constant">Base</span>.<span class="ruby-identifier">pluralize_table_names</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">ref_name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">pluralize</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">ref_name</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">foreign_key</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
      <span class="ruby-identifier">foreign_key_options</span> = <span class="ruby-identifier">foreign_key</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">foreign_key_options</span> = { <span class="ruby-value">to_table:</span> <span class="ruby-identifier">reference_name</span> }
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">foreign_key_options</span>[<span class="ruby-value">:column</span>] <span class="ruby-operator">||=</span> <span class="ruby-node">&quot;#{ref_name}_id&quot;</span>
    <span class="ruby-identifier">remove_foreign_key</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">foreign_key_options</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">remove_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-node">&quot;#{ref_name}_id&quot;</span>)
  <span class="ruby-identifier">remove_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-node">&quot;#{ref_name}_type&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">polymorphic</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-remove_timestamps">
            
              remove_timestamps(table_name, options = {})
            
          </h3>

          
            <div class="description">
              <p>Removes the timestamp columns (<code>created_at</code> and <code>updated_at</code>) from the table definition.</p>

<pre><code>remove_timestamps(:suppliers)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-remove_timestamps_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 1126</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_timestamps</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">remove_column</span> <span class="ruby-identifier">table_name</span>, <span class="ruby-value">:updated_at</span>
  <span class="ruby-identifier">remove_column</span> <span class="ruby-identifier">table_name</span>, <span class="ruby-value">:created_at</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-rename_column">
            
              rename_column(table_name, column_name, new_column_name)
            
          </h3>

          
            <div class="description">
              <p>Renames a column.</p>

<pre><code>rename_column(:suppliers, :description, :name)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-rename_column_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 658</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rename_column</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">new_column_name</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&quot;rename_column is not implemented&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-rename_index">
            
              rename_index(table_name, old_name, new_name)
            
          </h3>

          
            <div class="description">
              <p>Renames an index.</p>

<p>Rename the <code>index_people_on_last_name</code> index to <code>index_users_on_last_name</code>:</p>

<pre><code>rename_index :people, &#39;index_people_on_last_name&#39;, &#39;index_users_on_last_name&#39;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-rename_index_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 797</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rename_index</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">old_name</span>, <span class="ruby-identifier">new_name</span>)
  <span class="ruby-identifier">validate_index_length!</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">new_name</span>)

  <span class="ruby-comment"># this is a naive implementation; some DBs may support this more efficiently (PostgreSQL, for instance)</span>
  <span class="ruby-identifier">old_index_def</span> = <span class="ruby-identifier">indexes</span>(<span class="ruby-identifier">table_name</span>).<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">old_name</span> }
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">old_index_def</span>
  <span class="ruby-identifier">add_index</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">old_index_def</span>.<span class="ruby-identifier">columns</span>, <span class="ruby-value">name:</span> <span class="ruby-identifier">new_name</span>, <span class="ruby-value">unique:</span> <span class="ruby-identifier">old_index_def</span>.<span class="ruby-identifier">unique</span>)
  <span class="ruby-identifier">remove_index</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-value">name:</span> <span class="ruby-identifier">old_name</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-rename_table">
            
              rename_table(table_name, new_name)
            
          </h3>

          
            <div class="description">
              <p>Renames a table.</p>

<pre><code>rename_table(&#39;octopuses&#39;, &#39;octopi&#39;)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-rename_table_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 479</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rename_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">new_name</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-string">&quot;rename_table is not implemented&quot;</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-table_alias_for">
            
              table_alias_for(table_name)
            
          </h3>

          
            <div class="description">
              <p>Truncates a table alias according to the limits of the current adapter.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-table_alias_for_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 29</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">table_alias_for</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">table_name</span>[<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">table_alias_length</span>].<span class="ruby-identifier">tr</span>(<span class="ruby-string">&quot;.&quot;</span>, <span class="ruby-string">&quot;_&quot;</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-table_comment">
            
              table_comment(table_name)
            
          </h3>

          
            <div class="description">
              <p>Returns the table comment that&#39;s stored in database metadata.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-table_comment_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">table_comment</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-table_exists-3F">
            
              table_exists?(table_name)
            
          </h3>

          
            <div class="description">
              <p>Checks to see if the table <code>table_name</code> exists on the database.</p>

<pre><code>table_exists?(:developers)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-table_exists-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 60</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">table_exists?</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-identifier">query_values</span>(<span class="ruby-identifier">data_source_sql</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-value">type:</span> <span class="ruby-string">&quot;BASE TABLE&quot;</span>), <span class="ruby-string">&quot;SCHEMA&quot;</span>).<span class="ruby-identifier">any?</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">present?</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">NotImplementedError</span>
  <span class="ruby-identifier">tables</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">to_s</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-table_options">
            
              table_options(table_name)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-table_options_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 19</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">table_options</span>(<span class="ruby-identifier">table_name</span>)
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-tables">
            
              tables()
            
          </h3>

          
            <div class="description">
              <p>Returns an array of table names defined in the database.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-tables_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 52</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">tables</span>
  <span class="ruby-identifier">query_values</span>(<span class="ruby-identifier">data_source_sql</span>(<span class="ruby-value">type:</span> <span class="ruby-string">&quot;BASE TABLE&quot;</span>), <span class="ruby-string">&quot;SCHEMA&quot;</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-view_exists-3F">
            
              view_exists?(view_name)
            
          </h3>

          
            <div class="description">
              <p>Checks to see if the view <code>view_name</code> exists on the database.</p>

<pre><code>view_exists?(:ebooks)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-view_exists-3F_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 75</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">view_exists?</span>(<span class="ruby-identifier">view_name</span>)
  <span class="ruby-identifier">query_values</span>(<span class="ruby-identifier">data_source_sql</span>(<span class="ruby-identifier">view_name</span>, <span class="ruby-value">type:</span> <span class="ruby-string">&quot;VIEW&quot;</span>), <span class="ruby-string">&quot;SCHEMA&quot;</span>).<span class="ruby-identifier">any?</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">view_name</span>.<span class="ruby-identifier">present?</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">NotImplementedError</span>
  <span class="ruby-identifier">views</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">view_name</span>.<span class="ruby-identifier">to_s</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-views">
            
              views()
            
          </h3>

          
            <div class="description">
              <p>Returns an array of view names defined in the database.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-views_source">
                <pre><code class="ruby"><span class="ruby-comment"># File activerecord/lib/active_record/connection_adapters/abstract/schema_statements.rb, line 67</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">views</span>
  <span class="ruby-identifier">query_values</span>(<span class="ruby-identifier">data_source_sql</span>(<span class="ruby-value">type:</span> <span class="ruby-string">&quot;VIEW&quot;</span>), <span class="ruby-string">&quot;SCHEMA&quot;</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
</div>
