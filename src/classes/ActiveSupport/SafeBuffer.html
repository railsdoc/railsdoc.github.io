---
title: ActiveSupport::SafeBuffer
layout: default
---
<div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 8.1.0</span><br />
        
        <div class="type">Class</div>
        <h1>
            ActiveSupport::SafeBuffer
            
                <span class="parent">&lt;
                    
                    <a href="../String.html">String</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/activesupport/lib/active_support/core_ext/string/output_safety_rb.html">activesupport/lib/active_support/core_ext/string/output_safety.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  

  

  
  


  
    <h2 id="namespace">Namespace</h2>

    

    
      <h3 id="class">Class</h3>
      <ul>
      
        <li><a href="SafeBuffer/SafeConcatError.html">ActiveSupport::SafeBuffer::SafeConcatError</a></li>
      
      </ul>
    
  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-25">%</a>
        </li>
      
        <li>
          <a href="#method-i-2A">*</a>
        </li>
      
        <li>
          <a href="#method-i-2B">+</a>
        </li>
      
        <li>
          <a href="#method-i-3C-3C">&lt;&lt;</a>
        </li>
      
        <li>
          <a href="#method-i-5B-5D">[]</a>
        </li>
      
        <li>
          <a href="#method-i-5B-5D-3D">[]=</a>
        </li>
      
        <li>
          <a href="#method-i-as_json">as_json</a>
        </li>
      
        <li>
          <a href="#method-i-bytesplice">bytesplice</a>
        </li>
      
        <li>
          <a href="#method-i-chr">chr</a>
        </li>
      
        <li>
          <a href="#method-i-concat">concat</a>
        </li>
      
        <li>
          <a href="#method-i-encode_with">encode_with</a>
        </li>
      
        <li>
          <a href="#method-i-html_safe-3F">html_safe?</a>
        </li>
      
        <li>
          <a href="#method-i-initialize_copy">initialize_copy</a>
        </li>
      
        <li>
          <a href="#method-i-insert">insert</a>
        </li>
      
        <li>
          <a href="#method-c-new">new</a>
        </li>
      
        <li>
          <a href="#method-i-original_concat">original_concat</a>
        </li>
      
        <li>
          <a href="#method-i-prepend">prepend</a>
        </li>
      
        <li>
          <a href="#method-i-replace">replace</a>
        </li>
      
        <li>
          <a href="#method-i-safe_concat">safe_concat</a>
        </li>
      
        <li>
          <a href="#method-i-slice">slice</a>
        </li>
      
        <li>
          <a href="#method-i-slice-21">slice!</a>
        </li>
      
        <li>
          <a href="#method-i-to_param">to_param</a>
        </li>
      
        <li>
          <a href="#method-i-to_s">to_s</a>
        </li>
      
    </ul>
  

  

  
    

    

    
      <!-- Section constants -->
      <h2 id="constants">Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">UNSAFE_STRING_METHODS</td>
            <td>=</td>
            <td class="attr-value">%w(
capitalize chomp chop delete delete_prefix delete_suffix
downcase lstrip next reverse rstrip scrub squeeze strip
succ swapcase tr tr_s unicode_normalize upcase
)</td>
          </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">UNSAFE_STRING_METHODS_WITH_BACKREF</td>
            <td>=</td>
            <td class="attr-value">%w(gsub sub)</td>
          </tr>
          
        
      </table>
    

    

    <!-- Methods -->
    
      <h2 id="class-public-methods">Class Public methods</h2>
      
        <div class="method">
          <h3 id="method-c-new"><code><b>new</b>(_str = &quot;&quot;)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 70
def initialize(_str = &quot;&quot;)
  super
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L70" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-25"><code><b>%</b>(args)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 124
def %(args)
  case args
  when Hash
    escaped_args = args.transform_values { |arg| explicit_html_escape_interpolated_argument(arg) }
  else
    escaped_args = Array(args).map { |arg| explicit_html_escape_interpolated_argument(arg) }
  end

  self.class.new(super(escaped_args))
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L124" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-2A"><code><b>*</b>(_)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 115
def *(_)
  new_string = super
  new_safe_buffer = new_string.is_a?(SafeBuffer) ? new_string : SafeBuffer.new(new_string)
  if @html_unsafe
    new_safe_buffer.instance_variable_set(:@html_unsafe, true)
  end
  new_safe_buffer
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L115" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-2B"><code><b>+</b>(other)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 111
def +(other)
  dup.concat(other)
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L111" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-3C-3C"><code><b>&lt;&lt;</b>(value)</code></h3>

          

          

          
            <p class="method__aka">
              Alias for:
              <a href="/classes/ActiveSupport/SafeBuffer.html#method-i-concat" class="ref-link"><code>concat</code></a>.
            </p>
          

          
          
        </div>
        
        <div class="method">
          <h3 id="method-i-5B-5D"><code><b>[]</b>(*args)</code></h3>

          

          
            <p class="method__aka">
              Also aliased as:
              
              <a href="/classes/ActiveSupport/SafeBuffer.html#method-i-slice" class="ref-link"><code>slice</code></a>.
            </p>
          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 38
def [](*args)
  if html_safe?
    new_string = super

    return unless new_string

    string_into_safe_buffer(new_string, true)
  else
    to_str[*args]
  end
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L38" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-5B-5D-3D"><code><b>[]=</b>(arg1, arg2, arg3 = nil)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 103
def []=(arg1, arg2, arg3 = nil)
  if arg3
    super(arg1, arg2, implicit_html_escape_interpolated_argument(arg3))
  else
    super(arg1, implicit_html_escape_interpolated_argument(arg2))
  end
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L103" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-as_json"><code><b>as_json</b>(*)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 143
def as_json(*)
  to_str
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L143" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-bytesplice"><code><b>bytesplice</b>(*args, value)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 87
def bytesplice(*args, value)
  super(*args, implicit_html_escape_interpolated_argument(value))
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L87" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-chr"><code><b>chr</b>()</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 59
def chr
  return super unless html_safe?

  string_into_safe_buffer(super, true)
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L59" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-concat"><code><b>concat</b>(value)</code></h3>

          

          
            <p class="method__aka">
              Also aliased as:
              
              <a href="/classes/ActiveSupport/SafeBuffer.html#method-i-original_concat" class="ref-link"><code>original_concat</code></a>, <a href="/classes/ActiveSupport/SafeBuffer.html#method-i-3C-3C" class="ref-link"><code>&lt;&lt;</code></a>.
            </p>
          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 79
def concat(value)
  unless value.nil?
    super(implicit_html_escape_interpolated_argument(value))
  end
  self
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L79" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-encode_with"><code><b>encode_with</b>(coder)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 151
def encode_with(coder)
  coder.represent_object nil, to_str
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L151" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-html_safe-3F"><code><b>html_safe?</b>()</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 135
def html_safe?
  @html_unsafe.nil?
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L135" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-initialize_copy"><code><b>initialize_copy</b>(other)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 74
def initialize_copy(other)
  super
  @html_unsafe = true unless other.html_safe?
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L74" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-insert"><code><b>insert</b>(index, value)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 91
def insert(index, value)
  super(index, implicit_html_escape_interpolated_argument(value))
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L91" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-original_concat"><code><b>original_concat</b>(value)</code></h3>

          

          

          
            <p class="method__aka">
              Alias for:
              <a href="/classes/ActiveSupport/SafeBuffer.html#method-i-concat" class="ref-link"><code>concat</code></a>.
            </p>
          

          
          
        </div>
        
        <div class="method">
          <h3 id="method-i-prepend"><code><b>prepend</b>(value)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 95
def prepend(value)
  super(implicit_html_escape_interpolated_argument(value))
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L95" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-replace"><code><b>replace</b>(value)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 99
def replace(value)
  super(implicit_html_escape_interpolated_argument(value))
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L99" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-safe_concat"><code><b>safe_concat</b>(value)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 65
def safe_concat(value)
  raise SafeConcatError unless html_safe?
  original_concat(value)
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L65" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-slice"><code><b>slice</b>(*args)</code></h3>

          

          

          
            <p class="method__aka">
              Alias for:
              <a href="/classes/ActiveSupport/SafeBuffer.html#method-i-5B-5D" class="ref-link"><code>[]</code></a>.
            </p>
          

          
          
        </div>
        
        <div class="method">
          <h3 id="method-i-slice-21"><code><b>slice!</b>(*args)</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 51
def slice!(*args)
  new_string = super

  return new_string if !html_safe? || new_string.nil?

  string_into_safe_buffer(new_string, true)
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L51" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-to_param"><code><b>to_param</b>()</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 147
def to_param
  to_str
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L147" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-to_s"><code><b>to_s</b>()</code></h3>

          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/core_ext/string/output_safety.rb, line 139
def to_s
  self
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/1cdd190a25e483b65f1f25bbd0f13a25d696b461/activesupport/lib/active_support/core_ext/string/output_safety.rb#L139" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
  
</div>

    </div>
</div>
