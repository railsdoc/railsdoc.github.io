---
title: ActiveSupport::ContinuousIntegration
layout: default
---
<div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 8.1.0.rc1</span><br />
        
        <div class="type">Class</div>
        <h1>
            ActiveSupport::ContinuousIntegration
            
                <span class="parent">&lt;
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/activesupport/lib/active_support/continuous_integration_rb.html">activesupport/lib/active_support/continuous_integration.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>Provides a DSL for declaring a continuous integration workflow that can be run either locally or in the cloud. Each step is timed, reports success/error, and is aggregated into a collective report that reports total runtime, as well as whether the entire run was successful or not.</p>

<p>Example:</p>

<pre><code>ActiveSupport::ContinuousIntegration.run do
  step &quot;Setup&quot;, &quot;bin/setup --skip-server&quot;
  step &quot;Style: Ruby&quot;, &quot;bin/rubocop&quot;
  step &quot;Security: Gem audit&quot;, &quot;bin/bundler-audit&quot;
  step &quot;Tests: Rails&quot;, &quot;bin/rails test test:system&quot;

  if success?
    step &quot;Signoff: Ready for merge and deploy&quot;, &quot;gh signoff&quot;
  else
    failure &quot;Skipping signoff; CI failed.&quot;, &quot;Fix the issues and try again.&quot;
  end
end
</code></pre>

<p>Starting with <a href="../Rails.html"><code>Rails</code></a> 8.1, a default ‚Äòbin/ci` and `config/ci.rb` file are created to provide out-of-the-box CI.</p>

    </div>
  

  

  
  


  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-echo">echo</a>
        </li>
      
        <li>
          <a href="#method-i-failure">failure</a>
        </li>
      
        <li>
          <a href="#method-i-heading">heading</a>
        </li>
      
        <li>
          <a href="#method-c-new">new</a>
        </li>
      
        <li>
          <a href="#method-c-run">run</a>
        </li>
      
        <li>
          <a href="#method-i-step">step</a>
        </li>
      
        <li>
          <a href="#method-i-success-3F">success?</a>
        </li>
      
    </ul>
  

  

  
    

    

    
      <!-- Section constants -->
      <h2 id="constants">Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">COLORS</td>
            <td>=</td>
            <td class="attr-value">{
banner: &quot;\033[1;32m&quot;,   # Green
title: &quot;\033[1;35m&quot;,    # Purple
subtitle: &quot;\033[1;90m&quot;, # Medium Gray
error: &quot;\033[1;31m&quot;,    # Red
success: &quot;\033[1;32m&quot;   # Green
}</td>
          </tr>
          
        
      </table>
    

    
      <!-- Section attributes -->
      <h2 id="attributes">Attributes</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>results</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    

    <!-- Methods -->
    
      <h2 id="class-public-methods">Class Public methods</h2>
      
        <div class="method">
          <h3 id="method-c-new">
            
              new()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/continuous_integration.rb, line 64
def initialize
  @results = []
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activesupport/lib/active_support/continuous_integration.rb#L64" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-c-run">
            
              run(title = &quot;Continuous Integration&quot;, subtitle = &quot;Running tests, style checks, and security audits&quot;, &amp;block)
            
          </h3>

          
            <div class="description">
              <p>Perform a CI run. Execute each step, show their results and runtime, and exit with a non-zero status if there are any failures.</p>

<p>Pass an optional title, subtitle, and a block that declares the steps to be executed.</p>

<p>Sets the CI environment variable to ‚Äútrue‚Äù to allow for conditional behavior in the app, like enabling eager loading and disabling logging.</p>

<p>Example:</p>

<pre><code>ActiveSupport::ContinuousIntegration.run do
  step &quot;Setup&quot;, &quot;bin/setup --skip-server&quot;
  step &quot;Style: Ruby&quot;, &quot;bin/rubocop&quot;
  step &quot;Security: Gem audit&quot;, &quot;bin/bundler-audit&quot;
  step &quot;Tests: Rails&quot;, &quot;bin/rails test test:system&quot;

  if success?
    step &quot;Signoff: Ready for merge and deploy&quot;, &quot;gh signoff&quot;
  else
    failure &quot;Skipping signoff; CI failed.&quot;, &quot;Fix the issues and try again.&quot;
  end
end
</code></pre>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/continuous_integration.rb, line 55
def self.run(title = &quot;Continuous Integration&quot;, subtitle = &quot;Running tests, style checks, and security audits&quot;, &amp;block)
  new.tap do |ci|
    ENV[&quot;CI&quot;] = &quot;true&quot;
    ci.heading title, subtitle, padding: false
    ci.report(title, &amp;block)
    abort unless ci.success?
  end
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activesupport/lib/active_support/continuous_integration.rb#L55" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-echo">
            
              echo(text, type:)
            
          </h3>

          
            <div class="description">
              <p>Echo text to the terminal in the color corresponding to the type of the text.</p>

<p>Examples:</p>

<pre><code>echo &quot;This is going to be green!&quot;, type: :success
echo &quot;This is going to be red!&quot;, type: :error
</code></pre>

<p>See <a href="ContinuousIntegration.html#COLORS"><code>ActiveSupport::ContinuousIntegration::COLORS</code></a> for a complete list of options.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/continuous_integration.rb, line 111
def echo(text, type:)
  puts colorize(text, type)
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activesupport/lib/active_support/continuous_integration.rb#L111" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-failure">
            
              failure(title, subtitle = nil)
            
          </h3>

          
            <div class="description">
              <p>Display an error heading with the title and optional subtitle to reflect that the run failed.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/continuous_integration.rb, line 86
def failure(title, subtitle = nil)
  heading title, subtitle, type: :error
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activesupport/lib/active_support/continuous_integration.rb#L86" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-heading">
            
              heading(heading, subtitle = nil, type: :banner, padding: true)
            
          </h3>

          
            <div class="description">
              <p>Display a colorized heading followed by an optional subtitle.</p>

<p>Examples:</p>

<pre><code>heading &quot;Smoke Testing&quot;, &quot;End-to-end tests verifying key functionality&quot;, padding: false
heading &quot;Skipping video encoding tests&quot;, &quot;Install FFmpeg to run these tests&quot;, type: :error
</code></pre>

<p>See <a href="ContinuousIntegration.html#COLORS"><code>ActiveSupport::ContinuousIntegration::COLORS</code></a> for a complete list of options.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/continuous_integration.rb, line 98
def heading(heading, subtitle = nil, type: :banner, padding: true)
  echo &quot;#{padding ? &quot;\n\n&quot; : &quot;&quot;}#{heading}&quot;, type: type
  echo &quot;#{subtitle}#{padding ? &quot;\n&quot; : &quot;&quot;}&quot;, type: :subtitle if subtitle
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activesupport/lib/active_support/continuous_integration.rb#L98" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-step">
            
              step(title, *command)
            
          </h3>

          
            <div class="description">
              <p>Declare a step with a title and a command. The command can either be given as a single string or as multiple strings that will be passed to ‚Äòsystem` as individual arguments (and therefore correctly escaped for paths etc).</p>

<p>Examples:</p>

<pre><code>step &quot;Setup&quot;, &quot;bin/setup&quot;
step &quot;Single test&quot;, &quot;bin/rails&quot;, &quot;test&quot;, &quot;--name&quot;, &quot;test_that_is_one&quot;
</code></pre>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/continuous_integration.rb, line 75
def step(title, *command)
  heading title, command.join(&quot; &quot;), type: :title
  report(title) { results &lt;&lt; system(*command) }
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activesupport/lib/active_support/continuous_integration.rb#L75" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-success-3F">
            
              success?()
            
          </h3>

          
            <div class="description">
              <p>Returns true if all steps were successful.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">üìù Source code</span>
              </summary>

              <pre><code class="ruby"># File activesupport/lib/active_support/continuous_integration.rb, line 81
def success?
  results.all?
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/activesupport/lib/active_support/continuous_integration.rb#L81" target="_blank" class="github_url">üîé See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
  
</div>

    </div>
</div>
