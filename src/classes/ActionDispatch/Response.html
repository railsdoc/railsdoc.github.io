---
title: ActionDispatch::Response
layout: default
---
<div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 7.1.0</span><br />
        
        <div class="type">Class</div>
        <h1>
            ActionDispatch::Response
            
                <span class="parent">&lt;
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/actionpack/lib/action_dispatch/http/response_rb.html">actionpack/lib/action_dispatch/http/response.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h1 id="class-ActionDispatch::Response-label-Action+Dispatch+Response">Action Dispatch Response</h1>

<p>Represents an HTTP response generated by a controller action. Use it to retrieve the current state of the response, or customize the response. It can either represent a real HTTP response (i.e. one that is meant to be sent back to the web browser) or a <a href="TestResponse.html"><code>TestResponse</code></a> (i.e. one that is generated from integration tests).</p>

<p>The Response object for the current request is exposed on controllers as <a href="../ActionController/Metal.html#attribute-i-response"><code>ActionController::Metal#response</code></a>. <a href="../ActionController/Metal.html"><code>ActionController::Metal</code></a> also provides a few additional methods that delegate to attributes of the Response such as <a href="../ActionController/Metal.html#method-i-headers"><code>ActionController::Metal#headers</code></a>.</p>

<p><a href="Integration.html"><code>Integration</code></a> tests will likely also want to inspect responses in more detail. Methods such as <a href="Integration/RequestHelpers.html#method-i-get"><code>Integration::RequestHelpers#get</code></a> and <a href="Integration/RequestHelpers.html#method-i-post"><code>Integration::RequestHelpers#post</code></a> return instances of <a href="TestResponse.html"><code>TestResponse</code></a> (which inherits from Response) for this purpose.</p>

<p>For example, the following demo integration test prints the body of the controller response to the console:</p>

<pre><code>class DemoControllerTest &lt; ActionDispatch::IntegrationTest
  def test_print_root_path_to_console
    get(&#39;/&#39;)
    puts response.body
  end
end
</code></pre>

    </div>
  

  

  
  


  
    <h2 id="namespace">Namespace</h2>

    

    
      <h3 id="class">Class</h3>
      <ul>
      
        <li><a href="Response/RackBody.html">ActionDispatch::Response::RackBody</a></li>
      
      </ul>
    
  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-abort">abort</a>
        </li>
      
        <li>
          <a href="#method-i-await_commit">await_commit</a>
        </li>
      
        <li>
          <a href="#method-i-await_sent">await_sent</a>
        </li>
      
        <li>
          <a href="#method-i-body">body</a>
        </li>
      
        <li>
          <a href="#method-i-body-3D">body=</a>
        </li>
      
        <li>
          <a href="#method-i-body_parts">body_parts</a>
        </li>
      
        <li>
          <a href="#method-i-charset">charset</a>
        </li>
      
        <li>
          <a href="#method-i-charset-3D">charset=</a>
        </li>
      
        <li>
          <a href="#method-i-close">close</a>
        </li>
      
        <li>
          <a href="#method-i-code">code</a>
        </li>
      
        <li>
          <a href="#method-i-commit-21">commit!</a>
        </li>
      
        <li>
          <a href="#method-i-committed-3F">committed?</a>
        </li>
      
        <li>
          <a href="#method-i-content_type">content_type</a>
        </li>
      
        <li>
          <a href="#method-i-content_type-3D">content_type=</a>
        </li>
      
        <li>
          <a href="#method-i-cookies">cookies</a>
        </li>
      
        <li>
          <a href="#method-c-create">create</a>
        </li>
      
        <li>
          <a href="#method-i-delete_header">delete_header</a>
        </li>
      
        <li>
          <a href="#method-i-each">each</a>
        </li>
      
        <li>
          <a href="#method-i-get_header">get_header</a>
        </li>
      
        <li>
          <a href="#method-i-has_header-3F">has_header?</a>
        </li>
      
        <li>
          <a href="#method-i-media_type">media_type</a>
        </li>
      
        <li>
          <a href="#method-c-merge_default_headers">merge_default_headers</a>
        </li>
      
        <li>
          <a href="#method-i-message">message</a>
        </li>
      
        <li>
          <a href="#method-c-new">new</a>
        </li>
      
        <li>
          <a href="#method-i-prepare-21">prepare!</a>
        </li>
      
        <li>
          <a href="#method-i-reset_body-21">reset_body!</a>
        </li>
      
        <li>
          <a href="#method-i-response_code">response_code</a>
        </li>
      
        <li>
          <a href="#method-i-send_file">send_file</a>
        </li>
      
        <li>
          <a href="#method-i-sending-21">sending!</a>
        </li>
      
        <li>
          <a href="#method-i-sending-3F">sending?</a>
        </li>
      
        <li>
          <a href="#method-i-sending_file-3D">sending_file=</a>
        </li>
      
        <li>
          <a href="#method-i-sent-21">sent!</a>
        </li>
      
        <li>
          <a href="#method-i-sent-3F">sent?</a>
        </li>
      
        <li>
          <a href="#method-i-set_header">set_header</a>
        </li>
      
        <li>
          <a href="#method-i-status-3D">status=</a>
        </li>
      
        <li>
          <a href="#method-i-status_message">status_message</a>
        </li>
      
        <li>
          <a href="#method-i-to_a">to_a</a>
        </li>
      
        <li>
          <a href="#method-i-write">write</a>
        </li>
      
    </ul>
  

  
    <!-- Includes -->
    <h2 id="included-modules">Included Modules</h2>
    <ul>
      
        <li>
          
            Rack::Response::Helpers
          
        </li>
      
        <li>
          
            <a href="Http/FilterRedirect.html">
              ActionDispatch::Http::FilterRedirect
            </a>
          
        </li>
      
        <li>
          
            <a href="Http/Cache/Response.html">
              ActionDispatch::Http::Cache::Response
            </a>
          
        </li>
      
        <li>
          
            MonitorMixin
          
        </li>
      
    </ul>
  

  
    

    

    
      <!-- Section constants -->
      <h2 id="constants">Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">CONTENT_TYPE</td>
            <td>=</td>
            <td class="attr-value">&quot;Content-Type&quot;</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">ContentTypeHeader</td>
            <td>=</td>
            <td class="attr-value">Struct.new :mime_type, :charset</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">Header</td>
            <td>=</td>
            <td class="attr-value">Headers</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>To be deprecated:</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">Headers</td>
            <td>=</td>
            <td class="attr-value">::Rack::Headers</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">NO_CONTENT_CODES</td>
            <td>=</td>
            <td class="attr-value">[100, 101, 102, 103, 204, 205, 304]</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">NullContentTypeHeader</td>
            <td>=</td>
            <td class="attr-value">ContentTypeHeader.new nil, nil</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">SET_COOKIE</td>
            <td>=</td>
            <td class="attr-value">&quot;Set-Cookie&quot;</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    

    
      <!-- Section attributes -->
      <h2 id="attributes">Attributes</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>header</td>
            <td class='attr-desc'><p>The headers for the response.</p>

<pre><code>header[&quot;Content-Type&quot;] # =&gt; &quot;text/plain&quot;
header[&quot;Content-Type&quot;] = &quot;application/json&quot;
header[&quot;Content-Type&quot;] # =&gt; &quot;application/json&quot;
</code></pre>

<p>Also aliased as <code>headers</code>.</p>

<pre><code>headers[&quot;Content-Type&quot;] # =&gt; &quot;text/plain&quot;
headers[&quot;Content-Type&quot;] = &quot;application/json&quot;
headers[&quot;Content-Type&quot;] # =&gt; &quot;application/json&quot;
</code></pre>

<p>Also aliased as <code>header</code> for compatibility.</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>headers</td>
            <td class='attr-desc'><p>The headers for the response.</p>

<pre><code>header[&quot;Content-Type&quot;] # =&gt; &quot;text/plain&quot;
header[&quot;Content-Type&quot;] = &quot;application/json&quot;
header[&quot;Content-Type&quot;] # =&gt; &quot;application/json&quot;
</code></pre>

<p>Also aliased as <code>headers</code>.</p>

<pre><code>headers[&quot;Content-Type&quot;] # =&gt; &quot;text/plain&quot;
headers[&quot;Content-Type&quot;] = &quot;application/json&quot;
headers[&quot;Content-Type&quot;] # =&gt; &quot;application/json&quot;
</code></pre>

<p>Also aliased as <code>header</code> for compatibility.</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>request</td>
            <td class='attr-desc'><p>The request that the response is responding to.</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>status</td>
            <td class='attr-desc'><p>The HTTP status code.</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>stream</td>
            <td class='attr-desc'><p>The underlying body, as a streamable object.</p></td>
          </tr>
        
      </table>
    

    <!-- Methods -->
    
      <h2 id="class-public-methods">Class Public methods</h2>
      
        <div class="method">
          <h3 id="method-c-create">
            
              create(status = 200, headers = {}, body = [], default_headers: self.default_headers)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 155
    def self.create(status = 200, headers = {}, body = [], default_headers: self.default_headers)
      headers = merge_default_headers(headers, default_headers)
      new status, headers, body
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L155" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-c-merge_default_headers">
            
              merge_default_headers(original, default)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 160
    def self.merge_default_headers(original, default)
      default.respond_to?(:merge) ? default.merge(original) : original
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L160" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-c-new">
            
              new(status = 200, headers = nil, body = [])
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 167
    def initialize(status = 200, headers = nil, body = [])
      super()

      @headers = Headers.new

      headers&.each do |key, value|
        @headers[key] = value
      end

      self.body, self.status = body, status

      @cv           = new_cond
      @committed    = false
      @sending      = false
      @sent         = false

      prepare_cache_control!

      yield self if block_given?
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L167" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-abort">
            
              abort()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 380
    def abort
      if stream.respond_to?(:abort)
        stream.abort
      elsif stream.respond_to?(:close)
        # `stream.close` should really be reserved for a close from the
        # other direction, but we must fall back to it for
        # compatibility.
        stream.close
      end
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L380" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-await_commit">
            
              await_commit()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 193
    def await_commit
      synchronize do
        @cv.wait_until { @committed }
      end
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L193" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-await_sent">
            
              await_sent()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 199
    def await_sent
      synchronize { @cv.wait_until { @sent } }
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L199" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-body">
            
              body()
            
          </h3>

          
            <div class="description">
              <p>Returns the content of the response as a string. This contains the contents of any calls to <code>render</code>.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 314
    def body
      @stream.body
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L314" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-body-3D">
            
              body=(body)
            
          </h3>

          
            <div class="description">
              <p>Allows you to manually set or override the response body.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 323
    def body=(body)
      if body.respond_to?(:to_path)
        @stream = body
      else
        synchronize do
          @stream = build_buffer self, munge_body_object(body)
        end
      end
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L323" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-body_parts">
            
              body_parts()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 367
    def body_parts
      parts = []
      @stream.each { |x| parts << x }
      parts
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L367" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-charset">
            
              charset()
            
          </h3>

          
            <div class="description">
              <p>The charset of the response. HTML wants to know the encoding of the content you’re giving them, so we need to send that along.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 284
    def charset
      header_info = parsed_content_type_header
      header_info.charset || self.class.default_charset
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L284" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-charset-3D">
            
              charset=(charset)
            
          </h3>

          
            <div class="description">
              <p>Sets the HTTP character set. In case of <code>nil</code> parameter it sets the charset to <code>default_charset</code>.</p>

<pre><code>response.charset = &#39;utf-16&#39; # =&gt; &#39;utf-16&#39;
response.charset = nil      # =&gt; &#39;utf-8&#39;
</code></pre>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 273
    def charset=(charset)
      content_type = parsed_content_type_header.mime_type
      if false == charset
        set_content_type content_type, nil
      else
        set_content_type content_type, charset || self.class.default_charset
      end
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L273" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-close">
            
              close()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 376
    def close
      stream.close if stream.respond_to?(:close)
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L376" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-code">
            
              code()
            
          </h3>

          
            <div class="description">
              <p>Returns a string to ensure compatibility with <code>Net::HTTPResponse</code>.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 295
    def code
      @status.to_s
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L295" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-commit-21">
            
              commit!()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 203
    def commit!
      synchronize do
        before_committed
        @committed = true
        @cv.broadcast
      end
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L203" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-committed-3F">
            
              committed?()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 227
    def committed?; synchronize { @committed }; end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L227" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-content_type">
            
              content_type()
            
          </h3>

          
            <div class="description">
              <p>Content type of response.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 253
    def content_type
      super.presence
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L253" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-content_type-3D">
            
              content_type=(content_type)
            
          </h3>

          
            <div class="description">
              <p>Sets the HTTP response’s content MIME type. For example, in the controller you could write this:</p>

<pre><code>response.content_type = &quot;text/plain&quot;
</code></pre>

<p>If a character set has been defined for this response (see charset=) then the character set information will also be included in the content type information.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 243
    def content_type=(content_type)
      return unless content_type
      new_header_info = parse_content_type(content_type.to_s)
      prev_header_info = parsed_content_type_header
      charset = new_header_info.charset || prev_header_info.charset
      charset ||= self.class.default_charset unless prev_header_info.mime_type
      set_content_type new_header_info.mime_type, charset
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L243" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-cookies">
            
              cookies()
            
          </h3>

          
            <div class="description">
              <p>Returns the response cookies, converted to a <a href="../Hash.html"><code>Hash</code></a> of (name =&gt; value) pairs</p>

<pre><code>assert_equal &#39;AuthorOfNewPage&#39;, r.cookies[&#39;author&#39;]
</code></pre>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 404
    def cookies
      cookies = {}
      if header = get_header(SET_COOKIE)
        header = header.split("\n") if header.respond_to?(:to_str)
        header.each do |cookie|
          if pair = cookie.split(";").first
            key, value = pair.split("=").map { |v| Rack::Utils.unescape(v) }
            cookies[key] = value
          end
        end
      end
      cookies
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L404" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-delete_header">
            
              delete_header(key)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 191
    def delete_header(key); @headers.delete key; end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L191" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-each">
            
              each(&amp;block)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 75
    def each(&block)
      sending!
      x = @stream.each(&block)
      sent!
      x
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L75" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-get_header">
            
              get_header(key)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 189
    def get_header(key);    @headers[key];       end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L189" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-has_header-3F">
            
              has_header?(key)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 188
    def has_header?(key);   @headers.key? key;   end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L188" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-media_type">
            
              media_type()
            
          </h3>

          
            <div class="description">
              <p>Media type of response.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 258
    def media_type
      parsed_content_type_header.mime_type
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L258" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-message">
            
              message()
            
          </h3>

          
            <div class="description">
              <p>Returns the corresponding message for the current HTTP status code:</p>

<pre><code>response.status = 200
response.message # =&gt; &quot;OK&quot;

response.status = 404
response.message # =&gt; &quot;Not Found&quot;
</code></pre>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="Response.html#method-i-status_message">status_message</a>
            </div>
          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 307
    def message
      Rack::Utils::HTTP_STATUS_CODES[@status]
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L307" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-prepare-21">
            
              prepare!()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="Response.html#method-i-to_a">to_a</a>
            </div>
          

          
          
        </div>
        
        <div class="method">
          <h3 id="method-i-reset_body-21">
            
              reset_body!()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 363
    def reset_body!
      @stream = build_buffer(self, [])
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L363" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-response_code">
            
              response_code()
            
          </h3>

          
            <div class="description">
              <p>The response code of the request.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 290
    def response_code
      @status
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L290" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-send_file">
            
              send_file(path)
            
          </h3>

          
            <div class="description">
              <p>Send the file stored at <code>path</code> as the response body.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 358
    def send_file(path)
      commit!
      @stream = FileBody.new(path)
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L358" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-sending-21">
            
              sending!()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 211
    def sending!
      synchronize do
        before_sending
        @sending = true
        @cv.broadcast
      end
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L211" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-sending-3F">
            
              sending?()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 226
    def sending?;   synchronize { @sending };   end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L226" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-sending_file-3D">
            
              sending_file=(v)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 262
    def sending_file=(v)
      if true == v
        self.charset = false
      end
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L262" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-sent-21">
            
              sent!()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 219
    def sent!
      synchronize do
        @sent = true
        @cv.broadcast
      end
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L219" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-sent-3F">
            
              sent?()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 228
    def sent?;      synchronize { @sent };      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L228" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-set_header">
            
              set_header(key, v)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 190
    def set_header(key, v); @headers[key] = v;   end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L190" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-status-3D">
            
              status=(status)
            
          </h3>

          
            <div class="description">
              <p>Sets the HTTP status code.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 231
    def status=(status)
      @status = Rack::Utils.status_code(status)
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L231" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-status_message">
            
              status_message()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="Response.html#method-i-message">message</a>
            </div>
          

          
          
        </div>
        
        <div class="method">
          <h3 id="method-i-to_a">
            
              to_a()
            
          </h3>

          
            <div class="description">
              <p>Turns the <a href="Response.html"><code>Response</code></a> into a Rack-compatible array of the status, headers, and body. Allows explicit splatting:</p>

<pre><code>status, headers, body = *response
</code></pre>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="Response.html#method-i-prepare-21">prepare!</a>
            </div>
          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 395
    def to_a
      commit!
      rack_response @status, @headers.to_hash
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L395" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-write">
            
              write(string)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/response.rb, line 318
    def write(string)
      @stream.write string
    end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/d39db5d1891f7509cde2efc425c9d69bbb77e670/actionpack/lib/action_dispatch/http/response.rb#L318" target="_blank" class="github_url">See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
  
</div>

    </div>
</div>
