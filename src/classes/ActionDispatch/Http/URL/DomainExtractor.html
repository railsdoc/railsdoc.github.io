---
title: ActionDispatch::Http::URL::DomainExtractor
layout: default
---
<div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 8.1.0.rc1</span><br />
        
        <div class="type">Module</div>
        <h1>
            ActionDispatch::Http::URL::DomainExtractor
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../../files/actionpack/lib/action_dispatch/http/url_rb.html">actionpack/lib/action_dispatch/http/url.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p><a href="DomainExtractor.html"><code>DomainExtractor</code></a> provides utility methods for extracting domain and subdomain information from host strings. This module is used internally by Action Dispatch to parse host names and separate the domain from subdomains based on the top-level domain (TLD) length.</p>

<p>The module assumes a standard domain structure where domains consist of: - Subdomains (optional, can be multiple levels) - Domain name - Top-level domain (TLD, can be multiple levels like .co.uk)</p>

<p>For example, in “api.staging.example.co.uk”: - Subdomains: [“api”, “staging”] - Domain: “example.co.uk” (with tld_length=2) - TLD: “co.uk”</p>

    </div>
  

  

  
  


  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-domain_from">domain_from</a>
        </li>
      
        <li>
          <a href="#method-i-subdomains_from">subdomains_from</a>
        </li>
      
    </ul>
  

  

  
    

    

    

    

    <!-- Methods -->
    
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-domain_from"><code><b>domain_from</b>(host, tld_length)</code></h3>

          <div class="description">
<p>Extracts the domain part from a host string, including the specified number of top-level domain components.</p>

<p>The domain includes the main domain name plus the TLD components. The <code>tld_length</code> parameter specifies how many components from the right should be considered part of the TLD.</p>

<p>==== <a href="../Parameters.html"><code>Parameters</code></a></p>

<p>[<code>host</code>] The host string to extract the domain from.</p>

<p>[<code>tld_length</code>] The number of domain components that make up the TLD. For example, use 1 for “.com” or 2 for “.co.uk”.</p>

<p>==== Examples</p>

<p># Standard TLD (tld_length = 1) <a href="DomainExtractor.html#method-i-domain_from"><code>DomainExtractor.domain_from</code></a>(“<a href="www.example.com">www.example.com</a>”, 1) # =&gt; “example.com”</p>

<p># Country-code TLD (tld_length = 2) <a href="DomainExtractor.html#method-i-domain_from"><code>DomainExtractor.domain_from</code></a>(“<a href="www.example.co.uk">www.example.co.uk</a>”, 2) # =&gt; “example.co.uk”</p>

<p># Multiple subdomains <a href="DomainExtractor.html#method-i-domain_from"><code>DomainExtractor.domain_from</code></a>(“api.staging.myapp.herokuapp.com”, 1) # =&gt; “herokuapp.com”</p>

<p># Single component (returns the host itself) <a href="DomainExtractor.html#method-i-domain_from"><code>DomainExtractor.domain_from</code></a>(“localhost”, 1) # =&gt; “localhost”</p>
</div>

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">📝 Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 64
def domain_from(host, tld_length)
  host.split(&quot;.&quot;).last(1 + tld_length).join(&quot;.&quot;)
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/actionpack/lib/action_dispatch/http/url.rb#L64" target="_blank" class="github_url">🔎 See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-subdomains_from"><code><b>subdomains_from</b>(host, tld_length)</code></h3>

          <div class="description">
<p>Extracts the subdomain components from a host string as an <a href="../../../Array.html"><code>Array</code></a>.</p>

<p>Returns all the components that come before the domain and TLD parts. The <code>tld_length</code> parameter is used to determine where the domain begins so that everything before it is considered a subdomain.</p>

<p>==== <a href="../Parameters.html"><code>Parameters</code></a></p>

<p>[<code>host</code>] The host string to extract subdomains from.</p>

<p>[<code>tld_length</code>] The number of domain components that make up the TLD. This affects where the domain boundary is calculated.</p>

<p>==== Examples</p>

<p># Standard TLD (tld_length = 1) <a href="DomainExtractor.html#method-i-subdomains_from"><code>DomainExtractor.subdomains_from</code></a>(“<a href="www.example.com">www.example.com</a>”, 1) # =&gt; [“www”]</p>

<p># Country-code TLD (tld_length = 2) <a href="DomainExtractor.html#method-i-subdomains_from"><code>DomainExtractor.subdomains_from</code></a>(“api.staging.example.co.uk”, 2) # =&gt; [“api”, “staging”]</p>

<p># No subdomains <a href="DomainExtractor.html#method-i-subdomains_from"><code>DomainExtractor.subdomains_from</code></a>(“example.com”, 1) # =&gt; []</p>

<p># Single subdomain with complex TLD <a href="DomainExtractor.html#method-i-subdomains_from"><code>DomainExtractor.subdomains_from</code></a>(“<a href="www.mysite.co.uk">www.mysite.co.uk</a>”, 2) # =&gt; [“www”]</p>

<p># Multiple levels of subdomains <a href="DomainExtractor.html#method-i-subdomains_from"><code>DomainExtractor.subdomains_from</code></a>(“dev.api.staging.example.com”, 1) # =&gt; [“dev”, “api”, “staging”]</p>
</div>

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">📝 Source code</span>
              </summary>

              <pre><code class="ruby"># File actionpack/lib/action_dispatch/http/url.rb, line 104
def subdomains_from(host, tld_length)
  parts = host.split(&quot;.&quot;)
  parts[0..-(tld_length + 2)]
end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/4720fe9c00605d6ad2d50904e98a4d5522ffbce2/actionpack/lib/action_dispatch/http/url.rb#L104" target="_blank" class="github_url">🔎 See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
  
</div>

    </div>
</div>
