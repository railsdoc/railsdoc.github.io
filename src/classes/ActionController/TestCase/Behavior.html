---
title: ActionController::TestCase::Behavior
layout: default
---
<div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 7.1.0</span><br />
        
        <div class="type">Module</div>
        <h1>
            ActionController::TestCase::Behavior
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/actionpack/lib/action_controller/test_case_rb.html">actionpack/lib/action_controller/test_case.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  

  

  
  


  
    <h2 id="namespace">Namespace</h2>

    
      <h3 id="module">Module</h3>
      <ul>
      
        <li><a href="Behavior/ClassMethods.html">ActionController::TestCase::Behavior::ClassMethods</a></li>
      
      </ul>
    

    
  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-build_response">build_response</a>
        </li>
      
        <li>
          <a href="#method-i-controller_class_name">controller_class_name</a>
        </li>
      
        <li>
          <a href="#method-i-delete">delete</a>
        </li>
      
        <li>
          <a href="#method-i-generated_path">generated_path</a>
        </li>
      
        <li>
          <a href="#method-i-get">get</a>
        </li>
      
        <li>
          <a href="#method-i-head">head</a>
        </li>
      
        <li>
          <a href="#method-i-patch">patch</a>
        </li>
      
        <li>
          <a href="#method-i-post">post</a>
        </li>
      
        <li>
          <a href="#method-i-process">process</a>
        </li>
      
        <li>
          <a href="#method-i-put">put</a>
        </li>
      
        <li>
          <a href="#method-i-query_parameter_names">query_parameter_names</a>
        </li>
      
        <li>
          <a href="#method-i-setup_controller_request_and_response">setup_controller_request_and_response</a>
        </li>
      
    </ul>
  

  
    <!-- Includes -->
    <h2 id="included-modules">Included Modules</h2>
    <ul>
      
        <li>
          
            <a href="../../ActionDispatch/TestProcess.html">
              ActionDispatch::TestProcess
            </a>
          
        </li>
      
        <li>
          
            <a href="../../ActiveSupport/Testing/ConstantLookup.html">
              ActiveSupport::Testing::ConstantLookup
            </a>
          
        </li>
      
        <li>
          
            Rails::Dom::Testing::Assertions
          
        </li>
      
        <li>
          
            <a href="../../ActionDispatch/Assertions.html">
              ActionDispatch::Assertions
            </a>
          
        </li>
      
    </ul>
  

  
    

    

    

    
      <!-- Section attributes -->
      <h2 id="attributes">Attributes</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>request</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>response</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    

    <!-- Methods -->
    
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-build_response">
            
              build_response(klass)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-build_response_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_controller/test_case.rb, line 564</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">build_response</span>(<span class="ruby-identifier">klass</span>)
  <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">create</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-controller_class_name">
            
              controller_class_name()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-controller_class_name_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_controller/test_case.rb, line 524</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">controller_class_name</span>
  <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">anonymous?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;anonymous&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">controller_path</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-delete">
            
              delete(action, **args)
            
          </h3>

          
            <div class="description">
              <p>Simulate a DELETE request with the given parameters and set/volley the response. See <code>get</code> for more details.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-delete_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_controller/test_case.rb, line 439</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">delete</span>(<span class="ruby-identifier">action</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">process</span>(<span class="ruby-identifier">action</span>, <span class="ruby-value">method:</span> <span class="ruby-string">&quot;DELETE&quot;</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-generated_path">
            
              generated_path(generated_extras)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-generated_path_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_controller/test_case.rb, line 528</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">generated_path</span>(<span class="ruby-identifier">generated_extras</span>)
  <span class="ruby-identifier">generated_extras</span>[<span class="ruby-value">0</span>]
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-get">
            
              get(action, **args)
            
          </h3>

          
            <div class="description">
              <p>Simulate a GET request with the given parameters.</p>
<ul><li>
<p><code>action</code>: The controller action to call.</p>
</li><li>
<p><code>params</code>: The hash with HTTP parameters that you want to pass. This may be <code>nil</code>.</p>
</li><li>
<p><code>body</code>: The request body with a string that is appropriately encoded (<code>application/x-www-form-urlencoded</code> or <code>multipart/form-data</code>).</p>
</li><li>
<p><code>session</code>: A hash of parameters to store in the session. This may be <code>nil</code>.</p>
</li><li>
<p><code>flash</code>: A hash of parameters to store in the flash. This may be <code>nil</code>.</p>
</li></ul>

<p>You can also simulate POST, PATCH, PUT, DELETE, and HEAD requests with <code>post</code>, <code>patch</code>, <code>put</code>, <code>delete</code>, and <code>head</code>. Example sending parameters, session, and setting a flash message:</p>

<pre><code>get :show,
  params: { id: 7 },
  session: { user_id: 1 },
  flash: { notice: &#39;This is flash message&#39; }
</code></pre>

<p>Note that the request method is not verified. The different methods are available to make the tests more expressive.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-get_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_controller/test_case.rb, line 413</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get</span>(<span class="ruby-identifier">action</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">res</span> = <span class="ruby-identifier">process</span>(<span class="ruby-identifier">action</span>, <span class="ruby-value">method:</span> <span class="ruby-string">&quot;GET&quot;</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">update</span> <span class="ruby-identifier">res</span>.<span class="ruby-identifier">cookies</span>
  <span class="ruby-identifier">res</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-head">
            
              head(action, **args)
            
          </h3>

          
            <div class="description">
              <p>Simulate a HEAD request with the given parameters and set/volley the response. See <code>get</code> for more details.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-head_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_controller/test_case.rb, line 445</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">head</span>(<span class="ruby-identifier">action</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">process</span>(<span class="ruby-identifier">action</span>, <span class="ruby-value">method:</span> <span class="ruby-string">&quot;HEAD&quot;</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-patch">
            
              patch(action, **args)
            
          </h3>

          
            <div class="description">
              <p>Simulate a PATCH request with the given parameters and set/volley the response. See <code>get</code> for more details.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-patch_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_controller/test_case.rb, line 427</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">patch</span>(<span class="ruby-identifier">action</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">process</span>(<span class="ruby-identifier">action</span>, <span class="ruby-value">method:</span> <span class="ruby-string">&quot;PATCH&quot;</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-post">
            
              post(action, **args)
            
          </h3>

          
            <div class="description">
              <p>Simulate a POST request with the given parameters and set/volley the response. See <code>get</code> for more details.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-post_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_controller/test_case.rb, line 421</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">post</span>(<span class="ruby-identifier">action</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">process</span>(<span class="ruby-identifier">action</span>, <span class="ruby-value">method:</span> <span class="ruby-string">&quot;POST&quot;</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-process">
            
              process(action, method: &quot;GET&quot;, params: nil, session: nil, body: nil, flash: {}, format: nil, xhr: false, as: nil)
            
          </h3>

          
            <div class="description">
              <p>Simulate an HTTP request to <code>action</code> by specifying request method, parameters and set/volley the response.</p>
<ul><li>
<p><code>action</code>: The controller action to call.</p>
</li><li>
<p><code>method</code>: Request method used to send the HTTP request. Possible values are <code>GET</code>, <code>POST</code>, <code>PATCH</code>, <code>PUT</code>, <code>DELETE</code>, <code>HEAD</code>. Defaults to <code>GET</code>. Can be a symbol.</p>
</li><li>
<p><code>params</code>: The hash with HTTP parameters that you want to pass. This may be <code>nil</code>.</p>
</li><li>
<p><code>body</code>: The request body with a string that is appropriately encoded (<code>application/x-www-form-urlencoded</code> or <code>multipart/form-data</code>).</p>
</li><li>
<p><code>session</code>: A hash of parameters to store in the session. This may be <code>nil</code>.</p>
</li><li>
<p><code>flash</code>: A hash of parameters to store in the flash. This may be <code>nil</code>.</p>
</li><li>
<p><code>format</code>: Request format. Defaults to <code>nil</code>. Can be string or symbol.</p>
</li><li>
<p><code>as</code>: Content type. Defaults to <code>nil</code>. Must be a symbol that corresponds to a mime type.</p>
</li></ul>

<p>Example calling <code>create</code> action and sending two params:</p>

<pre><code>process :create,
  method: &#39;POST&#39;,
  params: {
    user: { name: &#39;Gaurish Sharma&#39;, email: &#39;user@example.com&#39; }
  },
  session: { user_id: 1 },
  flash: { notice: &#39;This is flash message&#39; }
</code></pre>

<p>To simulate <code>GET</code>, <code>POST</code>, <code>PATCH</code>, <code>PUT</code>, <code>DELETE</code>, and <code>HEAD</code> requests prefer using <a href="Behavior.html#method-i-get"><code>get</code></a>, <a href="Behavior.html#method-i-post"><code>post</code></a>, <a href="Behavior.html#method-i-patch"><code>patch</code></a>, <a href="Behavior.html#method-i-put"><code>put</code></a>, <a href="Behavior.html#method-i-delete"><code>delete</code></a> and <a href="Behavior.html#method-i-head"><code>head</code></a> methods respectively which will make tests more expressive.</p>

<p>It’s not recommended to make more than one request in the same test. Instance variables that are set in one request will not persist to the next request, but it’s not guaranteed that all Rails internal state will be reset. Prefer <a href="../../ActionDispatch/IntegrationTest.html"><code>ActionDispatch::IntegrationTest</code></a> for making multiple requests in the same test.</p>

<p>Note that the request method is not verified.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-process_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_controller/test_case.rb, line 484</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">process</span>(<span class="ruby-identifier">action</span>, <span class="ruby-value">method:</span> <span class="ruby-string">&quot;GET&quot;</span>, <span class="ruby-value">params:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">session:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">body:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">flash:</span> {}, <span class="ruby-value">format:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">xhr:</span> <span class="ruby-keyword">false</span>, <span class="ruby-value">as:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">check_required_ivars</span>
  <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">clear_instance_variables_between_requests</span>

  <span class="ruby-identifier">action</span> = <span class="ruby-operator">+</span><span class="ruby-identifier">action</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">http_method</span> = <span class="ruby-identifier">method</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">upcase</span>

  <span class="ruby-ivar">@html_document</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">update</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">cookies</span>)
  <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">update_cookies_from_jar</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">set_header</span> <span class="ruby-string">&quot;HTTP_COOKIE&quot;</span>, <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">to_header</span>
  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">delete_header</span> <span class="ruby-string">&quot;action_dispatch.cookies&quot;</span>

  <span class="ruby-ivar">@request</span>          = <span class="ruby-constant">TestRequest</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">scrub_env!</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>), <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">session</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">class</span>
  <span class="ruby-ivar">@response</span>         = <span class="ruby-identifier">build_response</span> <span class="ruby-ivar">@response_klass</span>
  <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">request</span> = <span class="ruby-ivar">@request</span>
  <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">recycle!</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">body</span>
    <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">set_header</span> <span class="ruby-string">&quot;RAW_POST_DATA&quot;</span>, <span class="ruby-identifier">body</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">set_header</span> <span class="ruby-string">&quot;REQUEST_METHOD&quot;</span>, <span class="ruby-identifier">http_method</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">as</span>
    <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">content_type</span> = <span class="ruby-constant">Mime</span>[<span class="ruby-identifier">as</span>].<span class="ruby-identifier">to_s</span>
    <span class="ruby-identifier">format</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">as</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">parameters</span> = (<span class="ruby-identifier">params</span> <span class="ruby-operator">||</span> {}).<span class="ruby-identifier">symbolize_keys</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">format</span>
    <span class="ruby-identifier">parameters</span>[<span class="ruby-value">:format</span>] = <span class="ruby-identifier">format</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">setup_request</span>(<span class="ruby-identifier">controller_class_name</span>, <span class="ruby-identifier">action</span>, <span class="ruby-identifier">parameters</span>, <span class="ruby-identifier">session</span>, <span class="ruby-identifier">flash</span>, <span class="ruby-identifier">xhr</span>)
  <span class="ruby-identifier">process_controller_response</span>(<span class="ruby-identifier">action</span>, <span class="ruby-identifier">cookies</span>, <span class="ruby-identifier">xhr</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-put">
            
              put(action, **args)
            
          </h3>

          
            <div class="description">
              <p>Simulate a PUT request with the given parameters and set/volley the response. See <code>get</code> for more details.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-put_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_controller/test_case.rb, line 433</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">put</span>(<span class="ruby-identifier">action</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">process</span>(<span class="ruby-identifier">action</span>, <span class="ruby-value">method:</span> <span class="ruby-string">&quot;PUT&quot;</span>, <span class="ruby-operator">**</span><span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-query_parameter_names">
            
              query_parameter_names(generated_extras)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-query_parameter_names_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_controller/test_case.rb, line 532</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">query_parameter_names</span>(<span class="ruby-identifier">generated_extras</span>)
  <span class="ruby-identifier">generated_extras</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">+</span> [<span class="ruby-value">:controller</span>, <span class="ruby-value">:action</span>]
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 id="method-i-setup_controller_request_and_response">
            
              setup_controller_request_and_response()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                
              </p>
              <div id="method-i-setup_controller_request_and_response_source">
                <pre><code class="ruby"><span class="ruby-comment"># File actionpack/lib/action_controller/test_case.rb, line 536</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">setup_controller_request_and_response</span>
  <span class="ruby-ivar">@controller</span> = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span> <span class="ruby-ivar">@controller</span>

  <span class="ruby-ivar">@response_klass</span> = <span class="ruby-constant">ActionDispatch</span><span class="ruby-operator">::</span><span class="ruby-constant">TestResponse</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">klass</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">controller_class</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">klass</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Live</span>
      <span class="ruby-ivar">@response_klass</span> = <span class="ruby-constant">LiveTestResponse</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@controller</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-ivar">@controller</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>
      <span class="ruby-keyword">rescue</span>
        <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;could not construct controller #{klass}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$VERBOSE</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@request</span>          = <span class="ruby-constant">TestRequest</span>.<span class="ruby-identifier">create</span>(<span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">class</span>)
  <span class="ruby-ivar">@response</span>         = <span class="ruby-identifier">build_response</span> <span class="ruby-ivar">@response_klass</span>
  <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">request</span> = <span class="ruby-ivar">@request</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@controller</span>
    <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">request</span> = <span class="ruby-ivar">@request</span>
    <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span> = {}
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></code></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </div>
</div>
