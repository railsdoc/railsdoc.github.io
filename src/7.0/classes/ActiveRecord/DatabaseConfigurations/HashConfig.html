---
title: ActiveRecord::DatabaseConfigurations::HashConfig
layout: default
---
<div class="main">
    <div class="banner">
        
            <span>Ruby on Rails 7.0.8</span><br />
        
        <div class="type">Class</div>
        <h1>
            ActiveRecord::DatabaseConfigurations::HashConfig
            
                <span class="parent">&lt;
                    
                    ActiveRecord::DatabaseConfigurations::DatabaseConfig
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/activerecord/lib/active_record/database_configurations/hash_config_rb.html">activerecord/lib/active_record/database_configurations/hash_config.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>A <a href="HashConfig.html"><code>HashConfig</code></a> object is created for each database configuration entry that is created from a hash.</p>

<p>A hash config:</p>

<pre><code>{ &quot;development&quot; =&gt; { &quot;database&quot; =&gt; &quot;db_name&quot; } }
</code></pre>

<p>Becomes:</p>

<pre><code>#&lt;ActiveRecord::DatabaseConfigurations::HashConfig:0x00007fd1acbded10
  @env_name=&quot;development&quot;, @name=&quot;primary&quot;, @config={database: &quot;db_name&quot;}&gt;
</code></pre>

<h4 id="class-ActiveRecord::DatabaseConfigurations::HashConfig-label-Options">Options</h4>
<ul><li>
<p><code>:env_name</code> - The Rails environment, i.e. â€œdevelopmentâ€.</p>
</li><li>
<p><code>:name</code> - The db config name. In a standard two-tier database configuration this will default to â€œprimaryâ€. In a multiple database three-tier database configuration this corresponds to the name used in the second tier, for example â€œprimary_readonlyâ€.</p>
</li><li>
<p><code>:config</code> - The config hash. This is the hash that contains the database adapter, name, and other important information for database connections.</p>
</li></ul>

    </div>
  

  

  
  


  

  
    <h2 id="methods">Methods</h2>
    <ul>
      
        <li>
          <a href="#method-i-adapter">adapter</a>
        </li>
      
        <li>
          <a href="#method-i-checkout_timeout">checkout_timeout</a>
        </li>
      
        <li>
          <a href="#method-i-database">database</a>
        </li>
      
        <li>
          <a href="#method-i-default_schema_cache_path">default_schema_cache_path</a>
        </li>
      
        <li>
          <a href="#method-i-host">host</a>
        </li>
      
        <li>
          <a href="#method-i-idle_timeout">idle_timeout</a>
        </li>
      
        <li>
          <a href="#method-i-lazy_schema_cache_path">lazy_schema_cache_path</a>
        </li>
      
        <li>
          <a href="#method-i-max_queue">max_queue</a>
        </li>
      
        <li>
          <a href="#method-i-max_threads">max_threads</a>
        </li>
      
        <li>
          <a href="#method-i-migrations_paths">migrations_paths</a>
        </li>
      
        <li>
          <a href="#method-i-min_threads">min_threads</a>
        </li>
      
        <li>
          <a href="#method-c-new">new</a>
        </li>
      
        <li>
          <a href="#method-i-pool">pool</a>
        </li>
      
        <li>
          <a href="#method-i-reaping_frequency">reaping_frequency</a>
        </li>
      
        <li>
          <a href="#method-i-replica-3F">replica?</a>
        </li>
      
        <li>
          <a href="#method-i-schema_cache_path">schema_cache_path</a>
        </li>
      
        <li>
          <a href="#method-i-schema_dump">schema_dump</a>
        </li>
      
    </ul>
  

  

  
    

    

    

    
      <!-- Section attributes -->
      <h2 id="attributes">Attributes</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>configuration_hash</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    

    <!-- Methods -->
    
      <h2 id="class-public-methods">Class Public methods</h2>
      
        <div class="method">
          <h3 id="method-c-new">
            
              new(env_name, name, configuration_hash)
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 30
      def initialize(env_name, name, configuration_hash)
        super(env_name, name)
        @configuration_hash = configuration_hash.symbolize_keys.freeze
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L30" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
      <h2 id="instance-public-methods">Instance Public methods</h2>
      
        <div class="method">
          <h3 id="method-i-adapter">
            
              adapter()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 96
      def adapter
        configuration_hash[:adapter]
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L96" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-checkout_timeout">
            
              checkout_timeout()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 81
      def checkout_timeout
        (configuration_hash[:checkout_timeout] || 5).to_f
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L81" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-database">
            
              database()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 57
      def database
        configuration_hash[:database]
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L57" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-default_schema_cache_path">
            
              default_schema_cache_path()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 107
      def default_schema_cache_path
        &quot;db/schema_cache.yml&quot;
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L107" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-host">
            
              host()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 49
      def host
        configuration_hash[:host]
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L49" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-idle_timeout">
            
              idle_timeout()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 91
      def idle_timeout
        timeout = configuration_hash.fetch(:idle_timeout, 300).to_f
        timeout if timeout &gt; 0
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L91" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-lazy_schema_cache_path">
            
              lazy_schema_cache_path()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 111
      def lazy_schema_cache_path
        schema_cache_path || default_schema_cache_path
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L111" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-max_queue">
            
              max_queue()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 77
      def max_queue
        max_threads * 4
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L77" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-max_threads">
            
              max_threads()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 73
      def max_threads
        (configuration_hash[:max_threads] || pool).to_i
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L73" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-migrations_paths">
            
              migrations_paths()
            
          </h3>

          
            <div class="description">
              <p>The migrations paths for a database configuration. If the <code>migrations_paths</code> key is present in the config, <code>migrations_paths</code> will return its value.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 45
      def migrations_paths
        configuration_hash[:migrations_paths]
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L45" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-min_threads">
            
              min_threads()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 69
      def min_threads
        (configuration_hash[:min_threads] || 0).to_i
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L69" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-pool">
            
              pool()
            
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 65
      def pool
        (configuration_hash[:pool] || 5).to_i
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L65" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-reaping_frequency">
            
              reaping_frequency()
            
          </h3>

          
            <div class="description">
              <p><code>reaping_frequency</code> is configurable mostly for historical reasons, but it could also be useful if someone wants a very low <code>idle_timeout</code>.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 87
      def reaping_frequency
        configuration_hash.fetch(:reaping_frequency, 60)&amp;.to_f
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L87" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-replica-3F">
            
              replica?()
            
          </h3>

          
            <div class="description">
              <p>Determines whether a database configuration is for a replica / readonly connection. If the <code>replica</code> key is present in the config, <code>replica?</code> will return <code>true</code>.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 38
      def replica?
        configuration_hash[:replica]
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L38" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-schema_cache_path">
            
              schema_cache_path()
            
          </h3>

          
            <div class="description">
              <p>The path to the schema cache dump file for a database. If omitted, the filename will be read from ENV or a default will be derived.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 103
      def schema_cache_path
        configuration_hash[:schema_cache_path]
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L103" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
        <div class="method">
          <h3 id="method-i-schema_dump">
            
              schema_dump(format = ActiveRecord.schema_format)
            
          </h3>

          
            <div class="description">
              <p>Determines whether to dump the schema/structure files and the filename that should be used.</p>

<p>If <code>configuration_hash[:schema_dump]</code> is set to <code>false</code> or <code>nil</code> the schema will not be dumped.</p>

<p>If the config option is set that will be used. Otherwise Rails will generate the filename from the database config name.</p>
            </div>
          

          

          

          
          
            <details class="method__source">
              <summary>
                <span class="label">ğŸ“ Source code</span>
              </summary>

              <pre><code class="ruby"># File activerecord/lib/active_record/database_configurations/hash_config.rb, line 127
      def schema_dump(format = ActiveRecord.schema_format)
        if configuration_hash.key?(:schema_dump)
          if config = configuration_hash[:schema_dump]
            config
          end
        elsif primary?
          schema_file_type(format)
        else
          &quot;#{name}_#{schema_file_type(format)}&quot;
        end
      end</code></pre>
              
                <a href="https://github.com/rails/rails/blob/fc734f28e65ef8829a1a939ee6702c1f349a1d5a/activerecord/lib/active_record/database_configurations/hash_config.rb#L127" target="_blank" class="github_url">ğŸ” See on GitHub</a>
              
            </details>
          
        </div>
        
      
    
  
</div>

    </div>
</div>
